{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"angular\"","webpack:///./src/demo-app.ts","webpack:///./src/ng-weekly-scheduler/app/module.ts","webpack:///./src/ng-weekly-scheduler.less?f909","webpack:///./src/ng-weekly-scheduler.less","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./node_modules/style-loader/lib/urls.js","webpack:///./src/ng-weekly-scheduler/adapter/module.ts","webpack:///./src/ng-weekly-scheduler/adapter/AdapterService.ts","webpack:///./src/ng-weekly-scheduler/configuration/module.ts","webpack:///./src/ng-weekly-scheduler/configuration/ConfigurationService.ts","webpack:///./src/ng-weekly-scheduler/conflicting-options/module.ts","webpack:///./src/ng-weekly-scheduler/conflicting-options/ConflictingOptionsService.ts","webpack:///./src/ng-weekly-scheduler/drag/module.ts","webpack:///./src/ng-weekly-scheduler/drag/DragService.ts","webpack:///./src/ng-weekly-scheduler/element-offset/module.ts","webpack:///./src/ng-weekly-scheduler/element-offset/ElementOffsetService.ts","webpack:///./src/ng-weekly-scheduler/end-adjuster/module.ts","webpack:///./src/ng-weekly-scheduler/end-adjuster/EndAdjusterService.ts","webpack:///./src/ng-weekly-scheduler/fill-empty-with-default/module.ts","webpack:///./src/ng-weekly-scheduler/fill-empty-with-default/FillEmptyWithDefaultService.ts","webpack:///./src/ng-weekly-scheduler/full-calendar/module.ts","webpack:///./src/ng-weekly-scheduler/full-calendar/FullCalendarDirective.ts","webpack:///./src/ng-weekly-scheduler/ghost-slot/module.ts","webpack:///./src/ng-weekly-scheduler/ghost-slot/ghost-slot.ts","webpack:///./src/ng-weekly-scheduler/group-by/module.ts","webpack:///./src/ng-weekly-scheduler/group-by/GroupService.ts","webpack:///./src/ng-weekly-scheduler/handle/module.ts","webpack:///./src/ng-weekly-scheduler/handle/HandleDirective.ts","webpack:///./src/ng-weekly-scheduler/hourly-grid/module.ts","webpack:///./src/ng-weekly-scheduler/hourly-grid/HourlyGridDirective.ts","webpack:///./src/ng-weekly-scheduler/last-ghost-day/module.ts","webpack:///./src/ng-weekly-scheduler/last-ghost-day/LastGhostDayService.ts","webpack:///./src/ng-weekly-scheduler/max-time-slot/module.ts","webpack:///./src/ng-weekly-scheduler/max-time-slot/MaxTimeSlotDirective.ts","webpack:///./src/ng-weekly-scheduler/minimum-separation/module.ts","webpack:///./src/ng-weekly-scheduler/minimum-separation/MinimumSeparationDirective.ts","webpack:///./src/ng-weekly-scheduler/missing-days/module.ts","webpack:///./src/ng-weekly-scheduler/missing-days/MissingDaysService.ts","webpack:///./src/ng-weekly-scheduler/mono-schedule/module.ts","webpack:///./src/ng-weekly-scheduler/mono-schedule/MonoScheduleDirective.ts","webpack:///./src/ng-weekly-scheduler/mouse-tracker/module.ts","webpack:///./src/ng-weekly-scheduler/mouse-tracker/MouseTrackerService.ts","webpack:///./src/ng-weekly-scheduler/multislider/module.ts","webpack:///./src/ng-weekly-scheduler/multislider/multislider.ts","webpack:///./src/ng-weekly-scheduler/multislider/multislider.html","webpack:///./src/ng-weekly-scheduler/null-end/module.ts","webpack:///./src/ng-weekly-scheduler/null-end/NullEndDirective.ts","webpack:///./src/ng-weekly-scheduler/overlap/module.ts","webpack:///./src/ng-weekly-scheduler/overlap/OverlapDirective.ts","webpack:///./src/ng-weekly-scheduler/overlap/OverlapService.ts","webpack:///./src/ng-weekly-scheduler/purge-default/module.ts","webpack:///./src/ng-weekly-scheduler/purge-default/PurgeDefaultService.ts","webpack:///./src/ng-weekly-scheduler/resize/module.ts","webpack:///./src/ng-weekly-scheduler/resize/ResizeService.ts","webpack:///./src/ng-weekly-scheduler/restriction-explanations/module.ts","webpack:///./src/ng-weekly-scheduler/restriction-explanations/RestrictionExplanationsComponent.ts","webpack:///./src/ng-weekly-scheduler/revalidate/module.ts","webpack:///./src/ng-weekly-scheduler/revalidate/RevalidateDirective.ts","webpack:///./src/ng-weekly-scheduler/schedule-area-container/module.ts","webpack:///./src/ng-weekly-scheduler/schedule-area-container/schedule-area-container.ts","webpack:///./src/ng-weekly-scheduler/schedule-count/module.ts","webpack:///./src/ng-weekly-scheduler/schedule-count/ScheduleCountDirective.ts","webpack:///./src/ng-weekly-scheduler/schedule-validator/module.ts","webpack:///./src/ng-weekly-scheduler/schedule-validator/FullCalendarValidatorService.ts","webpack:///./src/ng-weekly-scheduler/schedule-validator/MaxTimeSlotValidatorService.ts","webpack:///./src/ng-weekly-scheduler/schedule-validator/MinimumSeparationValidatorService.ts","webpack:///./src/ng-weekly-scheduler/schedule-validator/MonoScheduleValidatorService.ts","webpack:///./src/ng-weekly-scheduler/schedule-validator/NullEndValidatorService.ts","webpack:///./src/ng-weekly-scheduler/schedule-validator/OverlapValidatorService.ts","webpack:///./src/ng-weekly-scheduler/schedule-validator/ScheduleCountValidatorService.ts","webpack:///./src/ng-weekly-scheduler/scroll/module.ts","webpack:///./src/ng-weekly-scheduler/scroll/ScrollService.ts","webpack:///./src/ng-weekly-scheduler/time/module.ts","webpack:///./src/ng-weekly-scheduler/time/SecondsAsTextFilter.ts","webpack:///./src/ng-weekly-scheduler/time/TimeConstantsService.ts","webpack:///./src/ng-weekly-scheduler/time/TimeOfDayFilter.ts","webpack:///./src/ng-weekly-scheduler/time-range/module.ts","webpack:///./src/ng-weekly-scheduler/time-range/TimeRangeComponent.ts","webpack:///./src/ng-weekly-scheduler/touch/module.ts","webpack:///./src/ng-weekly-scheduler/touch/TouchService.ts","webpack:///./src/ng-weekly-scheduler/weekly-scheduler-config/module.ts","webpack:///./src/ng-weekly-scheduler/weekly-scheduler-config/DayMap.ts","webpack:///./src/ng-weekly-scheduler/weekly-scheduler-config/NullEndWidth.ts","webpack:///./src/ng-weekly-scheduler/weekly-scheduler/module.ts","webpack:///./src/ng-weekly-scheduler/weekly-scheduler/weekly-scheduler.ts","webpack:///./src/ng-weekly-scheduler/weekly-scheduler/weekly-scheduler.html","webpack:///./src/ng-weekly-scheduler/weekly-scheduler-item/module.ts","webpack:///./src/ng-weekly-scheduler/weekly-scheduler-item/WeeklySchedulerItemFactory.ts","webpack:///./src/ng-weekly-scheduler/weekly-scheduler-item/WeeklySchedulerItem.ts","webpack:///./src/ng-weekly-scheduler/weekly-scheduler-range/module.ts","webpack:///./src/ng-weekly-scheduler/weekly-scheduler-range/WeeklySchedulerRangeFactory.ts","webpack:///./src/ng-weekly-scheduler/weekly-scheduler-range/WeeklySchedulerRange.ts","webpack:///./src/ng-weekly-scheduler/weekly-slot/module.ts","webpack:///./src/ng-weekly-scheduler/weekly-slot/weekly-slot.ts","webpack:///./src/ng-weekly-scheduler/weekly-slot/weekly-slot.html","webpack:///./src/ng-weekly-scheduler/value-normalization/module.ts","webpack:///./src/ng-weekly-scheduler/value-normalization/ValueNormalizationService.ts","webpack:///./src/ng-weekly-scheduler/zoom/module.ts","webpack:///./src/ng-weekly-scheduler/zoom/ZoomService.ts","webpack:///./src/ng-weekly-scheduler/demo/DemoItem.ts","webpack:///./src/ng-weekly-scheduler/demo/DemoAdapter.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","angular","module_1","DemoItem_1","DemoAdapter_1","default","controller","$q","$scope","$timeout","$log","model","options","buttonClasses","createItem","day","schedules","DemoItem","defaultValue","editSlot","schedule","start","when","fillEmptyWithDefault","interval","fillNullEnds","maxTimeSlot","minimumSeparation","onChange","isValid","console","log","restrictionExplanations","saveScheduler","result","adapter","getSnapshot","DemoAdapter","end","element","document","ready","bootstrap","module_2","module_3","module_4","module_5","module_6","module_7","module_8","module_9","module_10","module_11","module_12","module_13","module_14","module_15","module_16","module_17","module_18","module_19","module_20","module_21","module_22","module_23","module_24","module_25","module_26","module_27","module_28","module_29","module_30","module_31","module_32","module_33","module_34","module_35","module_36","module_37","module_38","module_39","content","hmr","transform","insertInto","undefined","locals","push","useSourceMap","list","toString","this","map","item","cssMapping","btoa","sourceMapping","sourceMap","base64","unescape","encodeURIComponent","JSON","stringify","data","concat","sourceURLs","sources","source","sourceRoot","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","length","id","_i","fn","memo","stylesInDom","isOldIE","window","all","atob","apply","arguments","getElement","target","parent","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","e","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","j","parts","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","style","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createElement","attrs","type","nonce","nc","getNonce","addAttrs","el","keys","forEach","setAttribute","obj","update","remove","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","href","styleSheet","cssText","createTextNode","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","cssNode","childNodes","location","baseUrl","protocol","host","currentDir","pathname","replace","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1","test","AdapterService_1","service","AdapterService","$name","groupService","itemFactory","getItemsFromAdapter","config","initialData","customModelToWeeklySchedulerRange","groupedSchedules","groupSchedules","parseInt","$inject","ConfigurationService_1","ConfigurationService","timeConstants","getConfiguration","intervalCount","SECONDS_IN_DAY","defaultOptions","getDefaultOptions","userOptions","merge","extend","maxValue","hourCount","HOURS_IN_DAY","monoSchedule","noop","onRemove","fullCalendar","nullEnds","scheduleCount","pluralizedSlot","count","exact","scheduleCountOptions","ConflictingOptionsService_1","ConflictingOptionsService","getConflictingOptions","isDefined","DragService_1","DragService","endAdjusterService","nullEndWidth","rangeFactory","getDragRangeFromSchedule","createRange","adjustEndForView","ElementOffsetService_1","ElementOffsetService","left","$element","getBoundingClientRect","right","EndAdjusterService_1","EndAdjusterService","adjustEndForModel","FillEmptyWithDefaultService_1","FillEmptyWithDefaultService","fill","getFilledSchedules","getEmptySchedule","getEndSchedule","lastSchedule","getStartSchedule","firstSchedule","getFilledSchedulesForSingleSchedule","shouldFillNullEnd","getNullEndValue","scheduleTouchesStart","scheduleTouchesEnd","getSortedSchedules","len","currentSchedule","nextSchedule","startSchedule","schedulesTouch","newSchedule","getNewSchedule","endSchedule","sort","a","b","earlierSchedule","laterSchedule","FullCalendarDirective_1","directive","FullCalendarDirective","Factory","validator","_this","scope","ngModelCtrl","brFullCalendar","$validators","error","modelValue","validate","require","ghost_slot_1","component","GhostSlotComponent","GhostSlotController","$controllerAs","controllerAs","multiSliderCtrl","template","transclude","GroupService_1","GroupService","reduce","reducer","array","HandleDirective_1","HandleDirective","$document","mouseTrackerService","touchService","restrict","ondrag","ondragstop","ondragstart","immediate","x","mousemoveEvent","mouseupEvent","getPageX","event","pageX","mousemove","delta","isFunction","$apply","mouseup","unbind","startDrag","on","$applyAsync","preventDefault","stopPropagation","getMousePosition","HourlyGridDirective_1","HourlyGridDirective","GRID_TEMPLATE","schedulerCtrl","doGrid","handleClickEvent","child","$emit","nbElements","tickcount","gridItemEl","clone","empty","addClass","isUndefined","noText","currentHour","meridiem","text","numIntervalsInTick","SECONDS_IN_HOUR","intervalPercentage","grandChild","attr","append","LastGhostDayService_1","LastGhostDayService","getLastGhostDay","items","originIndex","getOriginIndex","renderedGhostIndices","getRenderedGhostIndices","above","every","$isGhostOrigin","$renderGhost","MaxTimeSlotDirective_1","MaxTimeSlotDirective","brMaxTimeSlot","MinimumSeparationDirective_1","MinimumSeparationDirective","brMinimumSeparation","MissingDaysService_1","MissingDaysService","dayMap","fillItems","stringKey","filteredItems","label","copy","MonoScheduleDirective_1","MonoScheduleDirective","brMonoSchedule","MouseTrackerService_1","MouseTrackerService","run","initialize","setMousePosition","mousePosition","y","pageY","multislider_1","MultiSliderComponent","MultiSliderController","elementOffsetService","valueNormalizationService","$postLink","onMouseEnter","onMouseLeave","onMouseUp","$on","ghostSchedule","commitGhost","removeGhost","dragSchedule","addDragSchedule","ghostValues","createGhost","removeDragSchedule","pendingSchedule","commitDragSchedule","addSchedule","$isActive","removeSchedule","$setDirty","mergeSchedule","getScheduleForAdd","normalizeValue","openEditorForAdd","canEdit","adjustGhost","updatedLeftValue","updatedRightValue","point","mouseValue","getValAtMousePosition","existingLeftValue","startingGhostValues","normalizeGhostValue","setGhostValues","positionGhost","val","onGhostWrapperMouseDown","editable","onGhostWrapperMouseMove","onGhostWrapperMouseUp","then","editedGhostSchedule","catch","canAddSchedule","addScheduleAndMerge","pixelToVal","editSchedule","$isEditing","originalSchedule_1","range","shouldDelete","premergeSchedule","equals","finally","getSlotLeft","getUnderlyingInterval","offsetLeft","getSlotRight","underlyingInterval","offsetRight","offsetWidth","clientWidth","normalizeIntervalValue","parentElement","$isDeleting","pixel","percent","Math","floor","rightmost","bindings","NullEndDirective_1","NullEndDirective","OverlapDirective_1","OverlapService_1","OverlapDirective","OverlapService","getOverlapState","current","other","currentStart","currentEnd","otherStart","otherEnd","PurgeDefaultService_1","PurgeDefaultService","purge","ResizeService_1","provider","ResizeServiceProvider","resizeService","customResizeEvents","serviceInitialized","$get","setCustomResizeEvents","events","$rootScope","$window","addEventListener","$broadcast","RestrictionExplanationsComponent_1","RestrictionExplanationsComponent","RestrictionExplanationsController","$filter","explanations","$onInit","RevalidateDirective_1","RevalidateDirective","$watch","ngModel","$validate","schedule_area_container_1","ScheduleAreaContainerComponent","ScheduleAreaContainerController","scrollService","zoomService","hijackScroll","resetZoom","zoomInACell","zoomIn","ScheduleCountDirective_1","ScheduleCountDirective","brScheduleCount","FullCalendarValidatorService_1","MaxTimeSlotValidatorService_1","MinimumSeparationValidatorService_1","MonoScheduleValidatorService_1","NullEndValidatorService_1","OverlapValidatorService_1","ScheduleCountValidatorService_1","FullCalendarValidatorService","MaxTimeSlotValidatorService","MinimumSeparationValidatorService","MonoScheduleValidatorService","NullEndScheduleValidatorService","OverlapValidatorService","ScheduleCountValidatorService","validateStartAtMinValue","validateEndAtMaxValue","loopLen","next","some","schedulesToValidate","overlapService","overlapState","validateExactCount","validateMaxCount","ScrollService_1","ScrollService","ctrlKey","zoomByScroll","wheelDelta","detail","scrollLeft","SecondsAsTextFilter_1","TimeConstantsService_1","TimeOfDayFilter_1","SecondsAsTextFilter","TimeOfDayFilter","TimeConstantsService","factoryFunction","seconds","hours","addHoursToResult","minutes","SECONDS_IN_MINUTE","addMinutesToResult","addSecondsToResult","MINUTES_IN_DAY","MINUTES_IN_HOUR","remainingMinutes","displayHours","TimeRangeComponent_1","TimeRangeComponent","TimeRangeController","hasStart","hasEnd","TouchService_1","TouchService","getTouches","originalEvent","touches","changedTouches","DayMap_1","NullEndWidth_1","constant","DayMap","NullEndWidth","_a","weekly_scheduler_1","WeeklySchedulerComponent","WeeklySchedulerController","adapterService","configurationService","conflictingOptionsService","lastGhostDayService","missingDaysService","invalidMessage","buildItemsFromAdapter","watchAdapter","watchHoverClass","lastGhostDay","getInvalidMessage","conflictingOptions","hasInvalidSchedule","formController","$invalid","buildItems","purgeItems","mergeOverlaps","_originalItems","items_1","purgeDefaultSchedules","forceNullEnds","prepareItems","items_2","fillEmptySlotsWithDefaultSchedules","rollback","$setPristine","save","hoverClass","find","removeClass","WeeklySchedulerItemFactory_1","WeeklySchedulerItemFactory","WeeklySchedulerItem_1","fillEmptyWithDefaultService","purgeDefaultService","builder","WeeklySchedulerItem","hasNoSchedules","hasEditFunction","canEditSchedule","itemIsEditable","scheduleIsEditable","canRenderGhost","hasSchedule","mergeOverlapsForSchedule","needsOverlapsMerged","getOverlapHandler","handleNoOverlap","handleCurrentIsInsideOther","handleCurrentCoversOther","handleOtherEndIsInsideCurrent","handleOtherStartIsInsideCurrent","handleOtherEndIsCurrentStart","handleOtherStartIsCurrentEnd","hasSameValueAs","overlapHandler","WeeklySchedulerRangeFactory_1","WeeklySchedulerRangeFactory","WeeklySchedulerRange_1","WeeklySchedulerRange","$class","updatedSchedule","updatedStart","updateStart","updatedEnd","updateEnd","canUpdateEnd","canUpdateStart","changed","newEndBeforeOrAtMax","newEndAfterOrAtExistingStart","newStartBeforeOrAtExistingEnd","newStartAfterOrAtMin","weekly_slot_1","WeeklySlotComponent","WeeklySlotController","dragService","getDragStartValues","editSelf","drag","ui","getDelta","newStart","round","valuesOnDragStart","newEnd","duration","endDrag","endResize","resizeStart","resizeEnd","startResize","ValueNormalizationService_1","ValueNormalizationService","min","max","ZoomService_1","ZoomService","selector","broadcastZoomedInEvent","broadcastZoomedOutEvent","getCurrentZoomWidth","width","getZoomElement","container","setZoomWidth","zoom","level","elementCount","containerWidth","boxWidth","gutterSize","scheduleAreaWidthPercent","currentWidth","Array"],"mappings":"aACA,IAAAA,EAAA,GAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,GAAA,CACAG,EAAAH,EACAI,GAAA,EACAH,QAAA,IAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QAKAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,EAAA,CAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,eAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,YAAA,CAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,KAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,GAIAlC,IAAAmC,EAAA,mBClFAhC,EAAAD,QAAAkC,uFCAA,IAAAA,EAAApC,EAAA,GAGAqC,EAAArC,EAAA,GACAsC,EAAAtC,EAAA,KACAuC,EAAAvC,EAAA,KAGEoC,EAAQjC,OAAO,UAAW,CAACkC,EAAAG,UACxBC,WAAW,iBAAkB,CAAC,KAAM,SAAU,WAAY,OACzD,SAAUC,EAAuBC,EAAQC,EAAUC,GAEjDF,EAAOG,MAAQ,CACbC,QAAS,CACPC,cAAe,CAAC,QAChBC,WAAY,SAACC,EAAKC,GAChB,OAAO,IAAIb,EAAAc,SAASF,EAAKC,IAE3BE,cAAc,EACdC,SAAU,SAAUC,GAGlB,OAFAA,EAASC,OAAS,GAClBD,EAASlC,OAAQ,EACVqB,EAAGe,KAAKF,IAEjBG,sBAAsB,EACtBC,SAAU,GACVC,aAAc,KACdC,YAAa,KACbC,kBAAmB,IACnBC,SAAU,SAACC,GACTC,QAAQC,IAAI,aAEdC,wBAAyB,CACvBN,YAAa,SAACxC,GAAU,qCAA+BA,EAAK,MAE9D+C,cAAe,WAGb,OAFAzB,EAAO0B,OAAS1B,EAAO2B,QAAQC,cAExB7B,EAAGe,MAAK,MAKrBd,EAAO2B,QAAU,IAAI/B,EAAAiC,YAAY,CAC/B,CACEtB,IAAG,EACHM,MAAO,KACPiB,IAAK,KACLpD,OAAO,QAKbe,EAAQsC,QAAQC,UAAUC,MAAM,WAC9BxC,EAAQyC,UAAUF,SAAU,CAAC,6FCtDrC,IAAAvC,EAAApC,EAAA,GACAA,EAAA,GAEA,IAAAqC,EAAArC,EAAA,GACA8E,EAAA9E,EAAA,IACA+E,EAAA/E,EAAA,IACAgF,EAAAhF,EAAA,IACAiF,EAAAjF,EAAA,IACAkF,EAAAlF,EAAA,IACAmF,EAAAnF,EAAA,IACAoF,EAAApF,EAAA,IACAqF,EAAArF,EAAA,IACAsF,EAAAtF,EAAA,IACAuF,EAAAvF,EAAA,IACAwF,EAAAxF,EAAA,IACAyF,EAAAzF,EAAA,IACA0F,EAAA1F,EAAA,IACA2F,EAAA3F,EAAA,IACA4F,EAAA5F,EAAA,IACA6F,EAAA7F,EAAA,IACA8F,EAAA9F,EAAA,IACA+F,EAAA/F,EAAA,IACAgG,EAAAhG,EAAA,IACAiG,EAAAjG,EAAA,IACAkG,EAAAlG,EAAA,IACAmG,EAAAnG,EAAA,IACAoG,EAAApG,EAAA,IACAqG,EAAArG,EAAA,IACAsG,EAAAtG,EAAA,IACAuG,EAAAvG,EAAA,IACAwG,EAAAxG,EAAA,IACAyG,EAAAzG,EAAA,IACA0G,EAAA1G,EAAA,IACA2G,EAAA3G,EAAA,IACA4G,EAAA5G,EAAA,IACA6G,EAAA7G,EAAA,IACA8G,EAAA9G,EAAA,IACA+G,EAAA/G,EAAA,IACAgH,EAAAhH,EAAA,IACAiH,EAAAjH,EAAA,IACAkH,EAAAlH,EAAA,IACAmH,EAAAnH,EAAA,IAUAE,EAAAsC,QAAeJ,EAAQjC,OAAO,qBAAsB,CAChDkC,EAAAG,QACAsC,EAAAtC,QACAuC,EAAAvC,QACAwC,EAAAxC,QACAyC,EAAAzC,QACA0C,EAAA1C,QACA2C,EAAA3C,QACA4C,EAAA5C,QACA8C,EAAA9C,QACA6C,EAAA7C,QACA+C,EAAA/C,QACAgD,EAAAhD,QACAiD,EAAAjD,QACAkD,EAAAlD,QACAmD,EAAAnD,QACAqD,EAAArD,QACAsD,EAAAtD,QACAoD,EAAApD,QACAuD,EAAAvD,QACAwD,EAAAxD,QACAyD,EAAAzD,QACA0D,EAAA1D,QACA2D,EAAA3D,QACA4D,EAAA5D,QACA6D,EAAA7D,QACA8D,EAAA9D,QACA+D,EAAA/D,QACAgE,EAAAhE,QACAiE,EAAAjE,QACAkE,EAAAlE,QACAmE,EAAAnE,QACAoE,EAAApE,QACAqE,EAAArE,QACAsE,EAAAtE,QACAuE,EAAAvE,QACAwE,EAAAxE,QACAyE,EAAAzE,QACA0E,EAAA1E,QACA2E,EAAA3E,UAEH7B,sBC3FD,IAAAyG,EAAcpH,EAAQ,GAEtB,iBAAAoH,MAAA,EAA4CjH,EAAAC,EAASgH,EAAA,MAOrD,IAAArE,EAAA,CAAesE,KAAA,EAEfC,eAPAA,EAQAC,gBAAAC,GAEaxH,EAAQ,EAARA,CAAwDoH,EAAArE,GAErEqE,EAAAK,SAAAtH,EAAAD,QAAAkH,EAAAK,0BCjBAtH,EAAAD,QAA2BF,EAAQ,EAARA,EAAwD,IAEnF0H,KAAA,CAAcvH,EAAAC,EAAS,0lLAA0lL,mCCMjnLD,EAAAD,QAAA,SAAAyH,GACA,IAAAC,EAAA,GAmDA,OAjDAA,EAAAC,SAAA,WACA,OAAAC,KAAAC,IAAA,SAAAC,GACA,IAAAZ,EAkDA,SAAAY,EAAAL,GACA,IAAAP,EAAAY,EAAA,OAEAC,EAAAD,EAAA,GAEA,IAAAC,EACA,OAAAb,EAGA,GAAAO,GAAA,mBAAAO,KAAA,CACA,IAAAC,GAWAC,EAXAH,EAaAI,EAAAH,KAAAI,SAAAC,mBAAAC,KAAAC,UAAAL,MACAM,EAAA,+DAAmEC,OAAAN,GACnE,OAAAM,OAAAD,EAAA,QAdAE,EAAAX,EAAAY,QAAAd,IAAA,SAAAe,GACA,uBAAAH,OAAAV,EAAAc,YAAAJ,OAAAG,EAAA,SAEA,OAAA1B,GAAAuB,OAAAC,GAAAD,OAAA,CAAAR,IAAAa,KAAA,MAOA,IAAAZ,EAEAC,EACAK,EAPA,OAAAtB,GAAA4B,KAAA,MAnEAC,CAAAjB,EAAAL,GAEA,OAAAK,EAAA,GACA,UAAAW,OAAAX,EAAA,QAA2CW,OAAAvB,EAAA,KAG3CA,IACK4B,KAAA,KAKLpB,EAAAxH,EAAA,SAAAE,EAAA4I,GACA,iBAAA5I,IAEAA,EAAA,OAAAA,EAAA,MAKA,IAFA,IAAA6I,EAAA,GAEA/I,EAAA,EAAmBA,EAAA0H,KAAAsB,OAAiBhJ,IAAA,CAEpC,IAAAiJ,EAAAvB,KAAA1H,GAAA,GAEA,MAAAiJ,IACAF,EAAAE,IAAA,GAIA,QAAAC,EAAA,EAAoBA,EAAAhJ,EAAA8I,OAAqBE,IAAA,CACzC,IAAAtB,EAAA1H,EAAAgJ,GAKA,MAAAtB,EAAA,IAAAmB,EAAAnB,EAAA,MACAkB,IAAAlB,EAAA,GACAA,EAAA,GAAAkB,EACSA,IACTlB,EAAA,OAAAW,OAAAX,EAAA,cAAAW,OAAAO,EAAA,MAGAtB,EAAAF,KAAAM,MAKAJ,oBCvDA,IAEA2B,EACAC,EAHAC,EAAA,GAWAC,GATAH,EASA,WAMA,OAAAI,QAAAhF,mBAAAiF,MAAAD,OAAAE,MAZA,WAEA,YADA,IAAAL,MAAAD,EAAAO,MAAAhC,KAAAiC,YACAP,IAoBAQ,EAAA,SAAAT,GACA,IAAAC,EAAA,GAEA,gBAAAS,EAAAC,GAMA,sBAAAD,EACA,OAAAA,IAEA,YAAAT,EAAAS,GAAA,CACA,IAAAE,EApBA,SAAAF,EAAAC,GACA,OAAAA,EACAA,EAAAE,cAAAH,GAEAtF,SAAAyF,cAAAH,IAgBA1J,KAAAuH,KAAAmC,EAAAC,GAEA,GAAAP,OAAAU,mBAAAF,aAAAR,OAAAU,kBACA,IAGAF,IAAAG,gBAAAC,KACK,MAAAC,GACLL,EAAA,KAGAX,EAAAS,GAAAE,EAEA,OAAAX,EAAAS,IA1BA,GA8BAQ,EAAA,KACAC,EAAA,EACAC,EAAA,GAEAC,EAAc5K,EAAQ,GAqDtB,SAAA6K,EAAAC,EAAA/H,GACA,QAAA3C,EAAA,EAAgBA,EAAA0K,EAAA1B,OAAmBhJ,IAAA,CACnC,IAAA4H,EAAA8C,EAAA1K,GACA2K,EAAAtB,EAAAzB,EAAAqB,IAEA,GAAA0B,EAAA,CACAA,EAAAC,OAEA,QAAAC,EAAA,EAAiBA,EAAAF,EAAAG,MAAA9B,OAA2B6B,IAC5CF,EAAAG,MAAAD,GAAAjD,EAAAkD,MAAAD,IAGA,KAAQA,EAAAjD,EAAAkD,MAAA9B,OAAuB6B,IAC/BF,EAAAG,MAAAxD,KAAAyD,EAAAnD,EAAAkD,MAAAD,GAAAlI,QAEG,CACH,IAAAmI,EAAA,GAEA,IAAAD,EAAA,EAAiBA,EAAAjD,EAAAkD,MAAA9B,OAAuB6B,IACxCC,EAAAxD,KAAAyD,EAAAnD,EAAAkD,MAAAD,GAAAlI,IAGA0G,EAAAzB,EAAAqB,IAAA,CAA2BA,GAAArB,EAAAqB,GAAA2B,KAAA,EAAAE,WAK3B,SAAAE,EAAAxD,EAAA7E,GAIA,IAHA,IAAA+H,EAAA,GACAO,EAAA,GAEAjL,EAAA,EAAgBA,EAAAwH,EAAAwB,OAAiBhJ,IAAA,CACjC,IAAA4H,EAAAJ,EAAAxH,GACAiJ,EAAAtG,EAAAuI,KAAAtD,EAAA,GAAAjF,EAAAuI,KAAAtD,EAAA,GAIAuD,EAAA,CAAcC,IAHdxD,EAAA,GAGcyD,MAFdzD,EAAA,GAEcI,UADdJ,EAAA,IAGAqD,EAAAhC,GACAgC,EAAAhC,GAAA6B,MAAAxD,KAAA6D,GADAT,EAAApD,KAAA2D,EAAAhC,GAAA,CAAkDA,KAAA6B,MAAA,CAAAK,KAIlD,OAAAT,EAGA,SAAAY,EAAA3I,EAAA4I,GACA,IAAA1B,EAAAD,EAAAjH,EAAAwE,YAEA,IAAA0C,EACA,UAAA2B,MAAA,+GAGA,IAAAC,EAAAlB,IAAAvB,OAAA,GAEA,WAAArG,EAAA+I,SACAD,EAEGA,EAAAE,YACH9B,EAAA+B,aAAAL,EAAAE,EAAAE,aAEA9B,EAAAgC,YAAAN,GAJA1B,EAAA+B,aAAAL,EAAA1B,EAAAiC,YAMAvB,EAAAjD,KAAAiE,QACE,cAAA5I,EAAA+I,SACF7B,EAAAgC,YAAAN,OACE,qBAAA5I,EAAA+I,WAAA/I,EAAA+I,SAAAK,OAIF,UAAAP,MAAA,8LAHA,IAAAG,EAAA/B,EAAAjH,EAAA+I,SAAAK,OAAAlC,GACAA,EAAA+B,aAAAL,EAAAI,IAMA,SAAAK,EAAAT,GACA,UAAAA,EAAAU,WAAA,SACAV,EAAAU,WAAAC,YAAAX,GAEA,IAAAY,EAAA5B,EAAA6B,QAAAb,GACAY,GAAA,GACA5B,EAAA8B,OAAAF,EAAA,GAIA,SAAAG,EAAA3J,GACA,IAAA4I,EAAAhH,SAAAgI,cAAA,SAMA,QAJAnF,IAAAzE,EAAA6J,MAAAC,OACA9J,EAAA6J,MAAAC,KAAA,iBAGArF,IAAAzE,EAAA6J,MAAAE,MAAA,CACA,IAAAA,EAgCA,WACK,EAIL,OAAQ9M,EAAA+M,GArCRC,GACAF,IACA/J,EAAA6J,MAAAE,SAOA,OAHAG,EAAAtB,EAAA5I,EAAA6J,OACAlB,EAAA3I,EAAA4I,GAEAA,EAiBA,SAAAsB,EAAAC,EAAAN,GACA9L,OAAAqM,KAAAP,GAAAQ,QAAA,SAAAzL,GACAuL,EAAAG,aAAA1L,EAAAiL,EAAAjL,MAYA,SAAAwJ,EAAAmC,EAAAvK,GACA,IAAA4I,EAAA4B,EAAAC,EAAAnJ,EAGA,GAAAtB,EAAAuE,WAAAgG,EAAA9B,IAAA,CAKA,KAJAnH,EAAA,mBAAAtB,EAAAuE,UACAvE,EAAAuE,UAAAgG,EAAA9B,KACAzI,EAAAuE,UAAA9E,QAAA8K,EAAA9B,MASA,oBAJA8B,EAAA9B,IAAAnH,EAUA,GAAAtB,EAAA0H,UAAA,CACA,IAAAgD,EAAA/C,IAEAiB,EAAAlB,MAAAiC,EAAA3J,IAEAwK,EAAAG,EAAA9L,KAAA,KAAA+J,EAAA8B,GAAA,GACAD,EAAAE,EAAA9L,KAAA,KAAA+J,EAAA8B,GAAA,QAGAH,EAAAlF,WACA,mBAAAuF,KACA,mBAAAA,IAAAC,iBACA,mBAAAD,IAAAE,iBACA,mBAAAC,MACA,mBAAA5F,MAEAyD,EAlEA,SAAA5I,GACA,IAAAgL,EAAApJ,SAAAgI,cAAA,QAUA,YARAnF,IAAAzE,EAAA6J,MAAAC,OACA9J,EAAA6J,MAAAC,KAAA,YAEA9J,EAAA6J,MAAAoB,IAAA,aAEAf,EAAAc,EAAAhL,EAAA6J,OACAlB,EAAA3I,EAAAgL,GAEAA,EAuDAE,CAAAlL,GACAwK,EAiFA,SAAAQ,EAAAhL,EAAAuK,GACA,IAAA9B,EAAA8B,EAAA9B,IACApD,EAAAkF,EAAAlF,UAQA8F,OAAA1G,IAAAzE,EAAAoL,uBAAA/F,GAEArF,EAAAoL,uBAAAD,KACA1C,EAAAZ,EAAAY,IAGApD,IAEAoD,GAAA,uDAAuDtD,KAAAI,SAAAC,mBAAAC,KAAAC,UAAAL,MAAA,OAGvD,IAAAgG,EAAA,IAAAN,KAAA,CAAAtC,GAAA,CAA6BqB,KAAA,aAE7BwB,EAAAN,EAAAO,KAEAP,EAAAO,KAAAX,IAAAC,gBAAAQ,GAEAC,GAAAV,IAAAE,gBAAAQ,IA5GAzM,KAAA,KAAA+J,EAAA5I,GACAyK,EAAA,WACApB,EAAAT,GAEAA,EAAA2C,MAAAX,IAAAE,gBAAAlC,EAAA2C,SAGA3C,EAAAe,EAAA3J,GACAwK,EAsDA,SAAA5B,EAAA2B,GACA,IAAA9B,EAAA8B,EAAA9B,IACAC,EAAA6B,EAAA7B,MAEAA,GACAE,EAAA0B,aAAA,QAAA5B,GAGA,GAAAE,EAAA4C,WACA5C,EAAA4C,WAAAC,QAAAhD,MACE,CACF,KAAAG,EAAAO,YACAP,EAAAW,YAAAX,EAAAO,YAGAP,EAAAM,YAAAtH,SAAA8J,eAAAjD,MArEA5J,KAAA,KAAA+J,GACA6B,EAAA,WACApB,EAAAT,KAMA,OAFA4B,EAAAD,GAEA,SAAAoB,GACA,GAAAA,EAAA,CACA,GACAA,EAAAlD,MAAA8B,EAAA9B,KACAkD,EAAAjD,QAAA6B,EAAA7B,OACAiD,EAAAtG,YAAAkF,EAAAlF,UAEA,OAGAmF,EAAAD,EAAAoB,QAEAlB,KA1PArN,EAAAD,QAAA,SAAA0H,EAAA7E,GACA,uBAAA4L,cACA,iBAAAhK,SAAA,UAAAiH,MAAA,iEAGA7I,KAAA,IAEA6J,MAAA,iBAAA7J,EAAA6J,MAAA7J,EAAA6J,MAAA,GAIA7J,EAAA0H,WAAA,kBAAA1H,EAAA0H,YAAA1H,EAAA0H,UAAAf,KAGA3G,EAAAwE,aAAAxE,EAAAwE,WAAA,QAGAxE,EAAA+I,WAAA/I,EAAA+I,SAAA,UAEA,IAAAhB,EAAAM,EAAAxD,EAAA7E,GAIA,OAFA8H,EAAAC,EAAA/H,GAEA,SAAA6L,GAGA,IAFA,IAAAC,EAAA,GAEAzO,EAAA,EAAiBA,EAAA0K,EAAA1B,OAAmBhJ,IAAA,CACpC,IAAA4H,EAAA8C,EAAA1K,IACA2K,EAAAtB,EAAAzB,EAAAqB,KAEA2B,OACA6D,EAAAnH,KAAAqD,GAGA6D,GAEA/D,EADAO,EAAAwD,EAAA7L,GACAA,GAGA,IAAA3C,EAAA,EAAiBA,EAAAyO,EAAAzF,OAAsBhJ,IAAA,CACvC,IAAA2K,EAEA,QAFAA,EAAA8D,EAAAzO,IAEA4K,KAAA,CACA,QAAAC,EAAA,EAAmBA,EAAAF,EAAAG,MAAA9B,OAA2B6B,IAAAF,EAAAG,MAAAD,YAE9CxB,EAAAsB,EAAA1B,QAkNA,IACAyF,EADAC,GACAD,EAAA,GAEA,SAAAE,EAAAC,GAGA,OAFAH,EAAAE,GAAAC,EAEAH,EAAAI,OAAAC,SAAAnG,KAAA,QAIA,SAAA0E,EAAA/B,EAAAqD,EAAAxB,EAAAF,GACA,IAAA9B,EAAAgC,EAAA,GAAAF,EAAA9B,IAEA,GAAAG,EAAA4C,WACA5C,EAAA4C,WAAAC,QAAAO,EAAAC,EAAAxD,OACE,CACF,IAAA4D,EAAAzK,SAAA8J,eAAAjD,GACA6D,EAAA1D,EAAA0D,WAEAA,EAAAL,IAAArD,EAAAW,YAAA+C,EAAAL,IAEAK,EAAAjG,OACAuC,EAAAK,aAAAoD,EAAAC,EAAAL,IAEArD,EAAAM,YAAAmD,oBC7UAjP,EAAAD,QAAA,SAAAsL,GAEA,IAAA8D,EAAA,oBAAA3F,eAAA2F,SAEA,IAAAA,EACA,UAAA1D,MAAA,oCAIA,IAAAJ,GAAA,iBAAAA,EACA,OAAAA,EAGA,IAAA+D,EAAAD,EAAAE,SAAA,KAAAF,EAAAG,KACAC,EAAAH,EAAAD,EAAAK,SAAAC,QAAA,iBA2DA,OA/BApE,EAAAoE,QAAA,+DAAAC,EAAAC,GAEA,IAWAC,EAXAC,EAAAF,EACAG,OACAL,QAAA,oBAAA/O,EAAAqP,GAAwC,OAAAA,IACxCN,QAAA,oBAAA/O,EAAAqP,GAAwC,OAAAA,IAGxC,0DAAAC,KAAAH,GACAH,GAQAE,EAFA,IAAAC,EAAAxD,QAAA,MAEAwD,EACG,IAAAA,EAAAxD,QAAA,KAEH+C,EAAAS,EAGAN,EAAAM,EAAAJ,QAAA,YAIA,OAAApH,KAAAC,UAAAsH,GAAA,uFCnFA,IAAA3N,EAAApC,EAAA,GACAoQ,EAAApQ,EAAA,GAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,6BAA8B,IACrCkQ,QAAQD,EAAAE,eAAeC,MAAOH,EAAAE,gBAC9B3P,oFCAL,IAAA2P,EAAA,WAQI,SAAAA,EACYE,EACAC,GADA3I,KAAA0I,eACA1I,KAAA2I,cAoBhB,OAhBIH,EAAAtO,UAAA0O,oBAAA,SAAoBC,EAAqCrM,GACrD,IAAID,EAAS,GAEb,GAAIC,EAAS,CACX,IAAInB,EAAYmB,EAAQsM,YAAY7I,IAAI,SAAAW,GAAQ,OAAApE,EAAQuM,kCAAkCnI,KACtFoI,EAAmBhJ,KAAK0I,aAAaO,eAAe5N,GAExD,IAAK,IAAIxB,KAAOmP,EAAkB,CAChC,IAAI9I,EAAOF,KAAK2I,YAAYxN,WAAW0N,EAAQK,SAASrP,EAAK,IAAKmP,EAAiBnP,IAEnF0C,EAAOqD,KAAKM,IAIhB,OAAO3D,GA3BJiM,EAAAC,MAAQ,kCAERD,EAAAW,QAAU,CACb,gCACA,gCAyBRX,EA9BA,GAAapQ,EAAAoQ,gGCNb,IAAAlO,EAAApC,EAAA,GACAkR,EAAAlR,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,mCAAoC,IAC3CkQ,QAAQa,EAAAC,qBAAqBZ,MAAOW,EAAAC,sBACpCxQ,oFCNL,IAAAyB,EAAApC,EAAA,GAKAmR,EAAA,WAOI,SAAAA,EACYC,GAAAtJ,KAAAsJ,gBAkDhB,OA9CWD,EAAAnP,UAAAqP,iBAAP,SAAwBtO,GACpB,IAAIY,EAAWZ,EAAQY,UAAY,IAC/B2N,EAAgBxJ,KAAKsJ,cAAcG,eAAiB5N,EAElD6N,EAAiB1J,KAAK2J,oBAExBC,EAActP,EAAQuP,MAAMH,EAAgBzO,GAShD,OAPaX,EAAQwP,OAAOF,EAAa,CACrC/N,SAAUA,EACVkO,SAAU/J,KAAKsJ,cAAcG,eAC7BO,UAAWhK,KAAKsJ,cAAcW,aAC9BT,cAAeA,KAMfH,EAAAnP,UAAAyP,kBAAR,WACI,MAAO,CACHxO,WAAY,SAACC,EAAKC,GAAgB,MAAO,CAAED,IAAKA,EAAKC,UAAWA,IAChE6O,cAAc,EACdjO,SAAU,WAAM,OAAA3B,EAAQ6P,QACxBC,SAAU,WAAM,OAAA9P,EAAQ6P,QACxB9N,wBAAyB,CACrBN,YAAa,SAACxC,GAAU,+BAAyBA,GACjDyC,kBAAmB,SAACzC,GAAU,gCAA0BA,EAAK,WAC7D8Q,aAAc,qEACdH,aAAc,oDACdI,SAAU,yHACVC,cAAe,SAACtP,GACZ,IAAIuP,EAAiB,QAA4B,IAAlBvP,EAAQwP,MAAc,GAAK,KAE1D,OAAIxP,EAAQyP,MACD,mCAAmCzP,EAAQwP,MAAK,IAAID,EAAc,WAElE,4CAA4CvP,EAAQwP,MAAK,IAAID,EAAc,aAI9FG,qBAAsB,CAClBF,MAAO,KACPC,OAAO,KArDZrB,EAAAZ,MAAQ,wCAERY,EAAAF,QAAU,CACb,yCAsDRE,EA1DA,GAAajR,EAAAiR,sGCLb,IAAA/O,EAAApC,EAAA,GACA0S,EAAA1S,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,wCAAyC,IAChDkQ,QAAQqC,EAAAC,0BAA0BpC,MAAOmC,EAAAC,2BACzChS,oFCNL,IAAAyB,EAAApC,EAAA,GAIA2S,EAAA,oBAAAA,KAkBA,OAfWA,EAAA3Q,UAAA4Q,sBAAP,SAA6B7P,GACzB,OAAIA,EAAQqP,UAAYrP,EAAQ0P,sBAAwB1P,EAAQ0P,qBAAqBF,MAAQ,EAClF,uDAGPxP,EAAQoP,cAAgBpP,EAAQW,qBACzB,0EAGPX,EAAQW,uBAAyBtB,EAAQyQ,UAAU9P,EAAQM,cACpD,gFAGJ,IAfJsP,EAAApC,MAAQ,6CAiBnBoC,EAlBA,GAAazS,EAAAyS,2GCJb,IAAAvQ,EAAApC,EAAA,GACA8S,EAAA9S,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,0BAA2B,IAClCkQ,QAAQyC,EAAAC,YAAYxC,MAAOuC,EAAAC,aAC3BpS,oFCAL,IAAAoS,EAAA,WASI,SAAAA,EACYC,EACAC,EACAC,GAFApL,KAAAkL,qBACAlL,KAAAmL,eACAnL,KAAAoL,eAchB,OAVWH,EAAA/Q,UAAAmR,yBAAP,SAAgCxC,EAAqCpN,GACjE,OAAOuE,KAAKoL,aAAaE,YAAYzC,EAAQ,CACzCzN,IAAKK,EAASL,IACdM,MAAOD,EAASC,MAChBiB,IAAKkM,EAAOyB,SACRtK,KAAKkL,mBAAmBK,iBAAiB1C,EAAQpN,EAASC,MAAQsE,KAAKmL,cACvEnL,KAAKkL,mBAAmBK,iBAAiB1C,EAAQpN,EAASkB,KAC9DpD,MAAOkC,EAASlC,SAtBjB0R,EAAAxC,MAAQ,+BAERwC,EAAA9B,QAAU,CACb,sCACA,gCACA,iCAoBR8B,EA1BA,GAAa7S,EAAA6S,6FCNb,IAAA3Q,EAAApC,EAAA,GACAsT,EAAAtT,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,mCAAoC,IAC3CkQ,QAAQiD,EAAAC,qBAAqBhD,MAAO+C,EAAAC,sBACpC5S,oFCAL,IAAA4S,EAAA,oBAAAA,KAUA,OAPWA,EAAAvR,UAAAwR,KAAP,SAAYC,GACR,OAAOA,EAAS,GAAGC,wBAAwBF,MAGxCD,EAAAvR,UAAA2R,MAAP,SAAaF,GACT,OAAOA,EAAS,GAAGC,wBAAwBC,OAPxCJ,EAAAhD,MAAQ,wCASnBgD,EAVA,GAAarT,EAAAqT,sGCNb,IAAAnR,EAAApC,EAAA,GACA4T,EAAA5T,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,iCAAkC,IACzCkQ,QAAQuD,EAAAC,mBAAmBtD,MAAOqD,EAAAC,oBAClClT,oFCHL,IAAAkT,EAAA,oBAAAA,KAkBA,OAfWA,EAAA7R,UAAA8R,kBAAP,SAAyBnD,EAAqClM,GAC1D,OAAIA,IAAQkM,EAAOkB,SACR,EAGJpN,GAGJoP,EAAA7R,UAAAqR,iBAAP,SAAwB1C,EAAqClM,GACzD,OAAY,IAARA,EACOkM,EAAOkB,SAGXpN,GAfJoP,EAAAtD,MAAQ,sCAiBnBsD,EAlBA,GAAa3T,EAAA2T,oGCHb,IAAAzR,EAAApC,EAAA,GACA+T,EAAA/T,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,0CAA2C,IAClDkQ,QAAQ0D,EAAAC,4BAA4BzD,MAAOwD,EAAAC,6BAC3CrT,oFCEL,IAAAqT,EAAA,WAQI,SAAAA,EACYhB,EACAE,GADApL,KAAAkL,qBACAlL,KAAAoL,eAoIhB,OAhIIc,EAAAhS,UAAAiS,KAAA,SAAKjM,EAAgC2I,GACjC,IAAIxN,EAAY6E,EAAK7E,UAErB,OAAKA,EAAUiG,OAIRtB,KAAKoM,mBAAmB/Q,EAAWwN,GAH/B,CAAC7I,KAAKqM,iBAAiBnM,EAAM2I,KAMpCqD,EAAAhS,UAAAmS,iBAAR,SAAyBnM,EAAgC2I,GACrD,OAAO7I,KAAKoL,aAAaE,YAAYzC,EAAQ,CACzCzN,IAAK8E,EAAK9E,IACVM,MAAO,EACPiB,IAAKqD,KAAKkL,mBAAmBc,kBAAkBnD,EAAQA,EAAOkB,UAC9DxQ,MAAOsP,EAAOtN,gBAId2Q,EAAAhS,UAAAoS,eAAR,SAAuBC,EAAyC1D,GAC5D,OAAO7I,KAAKoL,aAAaE,YAAYzC,EAAQ,CACzCzN,IAAKmR,EAAanR,IAClBM,MAAO6Q,EAAa5P,IACpBA,IAAKqD,KAAKkL,mBAAmBc,kBAAkBnD,EAAQA,EAAOkB,UAC9DxQ,MAAOsP,EAAOtN,gBAId2Q,EAAAhS,UAAAsS,iBAAR,SAAyBC,EAA0C5D,GAC/D,OAAO7I,KAAKoL,aAAaE,YAAYzC,EAAQ,CACzCzN,IAAKqR,EAAcrR,IACnBM,MAAO,EACPiB,IAAK8P,EAAc/Q,MACnBnC,MAAOsP,EAAOtN,gBAId2Q,EAAAhS,UAAAwS,oCAAR,SAA4CjR,EAAqCoN,GACzE7I,KAAK2M,kBAAkBlR,EAAUoN,KACjCpN,EAASkB,IAAMqD,KAAK4M,gBAAgBnR,EAAUoN,IAGlD,IAAIxN,EAAY,CAACI,GAUjB,OARKuE,KAAK6M,qBAAqBpR,EAAUoN,IACrCxN,EAAUuE,KAAKI,KAAKwM,iBAAiB/Q,EAAUoN,IAG9C7I,KAAK8M,mBAAmBrR,EAAUoN,IACnCxN,EAAUuE,KAAKI,KAAKsM,eAAe7Q,EAAUoN,IAG1C7I,KAAK+M,mBAAmB1R,IAG3B6Q,EAAAhS,UAAAkS,mBAAR,SAA2B/Q,EAAwCwN,GAG/D,GAAyB,KAFzBxN,EAAY2E,KAAK+M,mBAAmB1R,IAEtBiG,OACV,OAAOtB,KAAK0M,oCAAoCrR,EAAU,GAAIwN,GAMlE,IAHA,IAAImE,EAAM3R,EAAUiG,OAAS,EAGpBhJ,EAAI,EAAGA,EAAI0U,EAAK1U,IAAK,CAC1B,IAAI2U,EAAkB5R,EAAU/C,GAC5B4U,EAAe7R,EAAU/C,EAAI,GAIjC,GAFuB,GAALA,IAEE0H,KAAK6M,qBAAqBI,EAAiBpE,GAAS,CACpE,IAAIsE,EAAgBnN,KAAKwM,iBAAiBS,EAAiBpE,GAE3DxN,EAAUuE,KAAKuN,GAGnB,IAAKnN,KAAKoN,eAAeH,EAAiBC,GAAe,CACrD,IAAIG,EAAcrN,KAAKsN,eAAeL,EAAiBC,EAAcrE,GAErExN,EAAUuE,KAAKyN,GAKnB,GAFiB/U,GAAK0U,EAAM,IAEThN,KAAK8M,mBAAmBI,EAAcrE,GAAS,CAC9D,IAAI0E,EAAcvN,KAAKsM,eAAeY,EAAcrE,GAEpDxN,EAAUuE,KAAK2N,GACf,OAIR,OAAOvN,KAAK+M,mBAAmB1R,IAG3B6Q,EAAAhS,UAAAoT,eAAR,SAAuBL,EAA4CC,EAAyCrE,GACxG,OAAO7I,KAAKoL,aAAaE,YAAYzC,EAAQ,CACzCzN,IAAK6R,EAAgB7R,IACrBM,MAAOuR,EAAgBtQ,IACvBA,IAAKuQ,EAAaxR,MAClBnC,MAAOsP,EAAOtN,gBAId2Q,EAAAhS,UAAA0S,gBAAR,SAAwBnR,EAAqCoN,GACzD,OAAOpN,EAASC,MAAQmN,EAAO/M,cAG3BoQ,EAAAhS,UAAA6S,mBAAR,SAA2B1R,GACvB,OAAOA,EAAUmS,KAAK,SAACC,EAAGC,GAAM,OAAAD,EAAE/R,MAAQgS,EAAEhS,SAGxCwQ,EAAAhS,UAAAkT,eAAR,SAAuBO,EAA4CC,GAC/D,OAAOD,EAAgBhR,MAAQiR,EAAclS,OAGzCwQ,EAAAhS,UAAA2S,qBAAR,SAA6BpR,EAAqCoN,GAC9D,OAA0B,IAAnBpN,EAASC,OAGZwQ,EAAAhS,UAAA4S,mBAAR,SAA2BrR,EAAqCoN,GAC5D,OAAOpN,EAASkB,MAAQqD,KAAKkL,mBAAmBc,kBAAkBnD,EAAQA,EAAOkB,WAG7EmC,EAAAhS,UAAAyS,kBAAR,SAA0BlR,EAAqCoN,GAC3D,OAAwB,OAAjBpN,EAASkB,KAAgBkM,EAAOyB,UAAYzB,EAAO/M,cA3IvDoQ,EAAAzD,MAAQ,+CAERyD,EAAA/C,QAAU,CACb,sCACA,iCAyIR+C,EA9IA,GAAa9T,EAAA8T,6GCRb,IAAA5R,EAAApC,EAAA,GACA2V,EAAA3V,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,kCAAmC,IAC1CyV,UAAUD,EAAAE,sBAAsBtF,MAAOoF,EAAAE,sBAAsBC,WAC7DnV,oFCDL,IAAAkV,EAAA,WAGI,SAAAA,EACYE,GADZ,IAAAC,EAAAlO,KACYA,KAAAiO,YAIZjO,KAAAiG,KAAO,SAACkI,EAAuBvR,EAAmCkI,EAA4BsJ,GACtFtJ,EAAMuJ,iBACND,EAAYE,YAAYJ,EAAKD,UAAUM,OAAS,SAACC,GAC7C,OAAON,EAAKD,UAAUQ,SAASD,EAAWnT,UAAWmT,EAAW3F,WAK5E7I,KAAA0O,QAAU,UAWd,OATWX,EAAAC,QAAP,WACI,IAAIF,EAAY,SAACG,GACb,OAAO,IAAIF,EAAsBE,IAKrC,OAFAH,EAAU3E,QAAU,CAAC,iDAEd2E,GAxBJC,EAAAtF,MAAQ,iBA0BnBsF,EA3BA,GAAa3V,EAAA2V,uGCLb,IAAAzT,EAAApC,EAAA,GACAyW,EAAAzW,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,+BAAgC,IACvCuW,UAAUD,EAAAE,mBAAmBpG,MAAO,IAAIkG,EAAAE,oBACxClU,WAAWgU,EAAAG,oBAAoBrG,MAAOkG,EAAAG,qBACtCjW,oFCJL,IAAAiW,EAAA,WAQI,SAAAA,EACYnD,GAAA3L,KAAA2L,WAKhB,OAbWmD,EAAArG,MAAQ,wBACRqG,EAAAC,cAAgB,gBAEhBD,EAAA3F,QAAU,CACb,YASR2F,EAdA,GAAa1W,EAAA0W,sBAiBb,IAAAD,EAAA,oBAAAA,IAGI7O,KAAArF,WAAamU,EAAoBrG,MACjCzI,KAAAgP,aAAeF,EAAoBC,cAEnC/O,KAAA0O,QAAU,CACNO,gBAAiB,kBAGrBjP,KAAAkP,SAAW,oEAIXlP,KAAAmP,YAAa,EACjB,OAdWN,EAAApG,MAAQ,cAcnBoG,EAfA,GAAazW,EAAAyW,oGCpBb,IAAAvU,EAAApC,EAAA,GACAkX,EAAAlX,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,6BAA8B,IACrCkQ,QAAQ6G,EAAAC,aAAa5G,MAAO2G,EAAAC,cAC5BxW,oFCGL,IAAAwW,EAAA,oBAAAA,KAoBA,OAjBIA,EAAAnV,UAAA+O,eAAA,SAAe5N,GAeX,OAZaA,EAAUiU,OAAO,SAACC,EAAStC,EAAiB/F,EAAOsI,GAC5D,IAAI3V,EAAMoT,EAAgB7R,IAQ1B,OANKmU,EAAQ1V,KACT0V,EAAQ1V,GAAO,IAGnB0V,EAAQ1V,GAAK+F,KAAKqN,GAEXsC,GAXiD,KAHzDF,EAAA5G,MAAQ,gCAmBnB4G,EApBA,GAAajX,EAAAiX,8FCTb,IAAA/U,EAAApC,EAAA,GACAuX,EAAAvX,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,4BAA6B,IACpCyV,UAAU2B,EAAAC,gBAAgBjH,MAAOgH,EAAAC,gBAAgB1B,WACjDnV,oFCNL,IAAAyB,EAAApC,EAAA,GAKAwX,EAAA,WA6EE,SAAAA,EACUC,EACAC,EACAC,GAHV,IAAA3B,EAAAlO,KACUA,KAAA2P,YACA3P,KAAA4P,sBACA5P,KAAA6P,eA9EV7P,KAAA8P,SAAW,IAEX9P,KAAAmO,MAAQ,CACN4B,OAAQ,IACRC,WAAY,IACZC,YAAa,IACbC,UAAW,KAGblQ,KAAAiG,KAAO,SAACkI,EAAOvR,GACb,IAAI+S,EAAYzB,EAAKyB,UACjBC,EAAsB1B,EAAK0B,oBAC3BC,EAAe3B,EAAK2B,aACpBM,EAAI,EAGJC,EAAyB,sBACzBC,EAAuB,mBAsB3B,SAAAC,EAAkBC,GAChB,OAAOA,EAAMC,OAASX,EAAaS,SAASC,GAG9C,SAAAE,EAAmBF,GACjB,IACIG,EADQJ,EAASC,GACDJ,EAEhB7V,EAAQqW,WAAWxC,EAAM4B,SAC3B5B,EAAMyC,OAAOzC,EAAM4B,OAAO,CAAEW,MAAOA,KAIvC,SAAAG,IACElB,EAAUmB,OAAOV,EAAgBK,GACjCd,EAAUmB,OAAOT,EAAcQ,GAE3BvW,EAAQqW,WAAWxC,EAAM6B,aAC3B7B,EAAMyC,OAAOzC,EAAM6B,cAIvB,SAAAe,IACEpB,EAAUqB,GAAGZ,EAAgBK,GAC7Bd,EAAUqB,GAAGX,EAAcQ,GAEvBvW,EAAQqW,WAAWxC,EAAM8B,cAC3B9B,EAAM8C,YAAY9C,EAAM8B,eA/C5BrT,EAAQoU,GAJqB,uBAM7B,SAAmBT,GACjBJ,EAAIG,EAASC,GAGbA,EAAMW,iBAGNX,EAAMY,kBAENJ,MAwCE5C,EAAM+B,YApCRC,EAAIP,EAAoBwB,mBAAmBjB,EAE3CY,MAqDN,OAPSrB,EAAA1B,QAAP,WACE,IAAIF,EAAY,SAAC6B,EAAWC,EAAqBC,GAAiB,WAAIH,EAAgBC,EAAWC,EAAqBC,IAItH,OAFA/B,EAAU3E,QAAU,CAAC,YAAa,uCAAwC,iCAEnE2E,GAxFF4B,EAAAjH,MAAQ,WA0FjBiH,EA3FA,GAAatX,EAAAsX,iGCLb,IAAApV,EAAApC,EAAA,GACAmZ,EAAAnZ,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,gCAAiC,IACxCyV,UAAUuD,EAAAC,oBAAoB7I,MAAO4I,EAAAC,oBAAoBtD,WACzDnV,oFCNL,IAAAyB,EAAApC,EAAA,GAOAoZ,EAAA,WA+DI,SAAAA,EACYhI,GADZ,IAAA4E,EAAAlO,KACYA,KAAAsJ,gBA7DZtJ,KAAA8P,SAAW,IACX9P,KAAA0O,QAAU,qBAEF1O,KAAAuR,cAAgBjX,EAAQsC,QAAQ,iCAmDxCoD,KAAAiG,KAAO,SAACkI,EAAOvR,EAASkI,EAAO0M,GACvBA,EAAc3I,QACdqF,EAAKuD,OAAOtD,EAAOvR,EAASkI,EAAO0M,EAAc3I,SAgB7D,OAnEYyI,EAAApX,UAAAwX,iBAAR,SAAyBC,EAAO3H,EAAWvF,EAAK0J,GAC5CwD,EAAM7X,KAAK,QAAS,WAChBqU,EAAMyC,OAAO,WACTzC,EAAMyD,MAAK,iCAAwC,CAC/CC,WAAY7H,EACZvF,IAAKA,SAMb6M,EAAApX,UAAAuX,OAAR,SAAetD,EAAOvR,EAASkI,EAAO+D,GAElC,IAAIiJ,EAAYjJ,EAAOmB,UACnB+H,EAAa/R,KAAKuR,cAAcS,QAGpCpV,EAAQqV,QAGRrV,EAAQsV,SAAS,WAEjB,IAAK,IAAI5Z,EAAI,EAAGA,EAAIwZ,EAAWxZ,IAAK,CAClC,IAAIqZ,EAAQI,EAAWC,QAEvB,GAAI1X,EAAQ6X,YAAYrN,EAAMsN,QAAS,CACrCpS,KAAK0R,iBAAiBC,EAAOG,EAAWxZ,EAAG6V,GAE3C,IAAIkE,EAAc/Z,EAAI,GAClBga,EAAWha,GAAK,GAAK,IAAM,IAE/BqZ,EAAMY,KAAK,IAAGF,GAAe,MAAOC,QAKpC,IAHA,IAAIE,EAAqBxS,KAAKsJ,cAAcmJ,gBAAkB5J,EAAOhN,SACjE6W,EAAqB,IAAMF,EAEtBrP,EAAI,EAAGA,EAAIqP,EAAoBrP,IAAK,CACzC,IAAIwP,EAAa3S,KAAKuR,cAAcS,QACpCW,EAAWC,KAAK,OAASta,EAAIka,EAAsBrP,GAAK0F,EAAOhN,UAC/D8W,EAAWT,SAAS,YACpBS,EAAWjP,IAAI,QAASgP,EAAqB,KAC7Cf,EAAMkB,OAAOF,GAInB/V,EAAQiW,OAAOlB,KAedL,EAAAtD,QAAP,WACI,IAAIF,EAAY,SAACxE,GAAkB,WAAIgI,EAAoBhI,IAI3D,OAFAwE,EAAU3E,QAAU,CAAC,yCAEd2E,GAxEJwD,EAAA7I,MAAQ,eA0EnB6I,EA3EA,GAAalZ,EAAAkZ,qGCPb,IAAAhX,EAAApC,EAAA,GACA4a,EAAA5a,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,kCAAmC,IAC1CkQ,QAAQuK,EAAAC,oBAAoBtK,MAAOqK,EAAAC,qBACnCla,oFCHL,IAAAka,EAAA,oBAAAA,KAoDA,OA7CWA,EAAA7Y,UAAA8Y,gBAAP,SAAuBC,GACnB,IAAIC,EAAclT,KAAKmT,eAAeF,GAClCG,EAAuBpT,KAAKqT,wBAAwBJ,GAGpDK,EAAQF,EAAqBG,MAAM,SAAAjb,GAAK,OAAAA,GAAK4a,IAKjD,OAAOE,EAFiBE,EAAQ,EAAIF,EAAqB9R,OAAS,IAM9DyR,EAAA7Y,UAAAiZ,eAAR,SAAuBF,GAInB,IAHA,IAAIC,EACAlG,EAAMiG,EAAM3R,OAEPhJ,EAAI,EAAGA,EAAI0U,EAAK1U,IAAK,CAG1B,GAFkB2a,EAAM3a,GAERkb,eAAgB,CAC5BN,EAAc5a,EACd,OAIR,OAAO4a,GAIHH,EAAA7Y,UAAAmZ,wBAAR,SAAgCJ,GAI5B,IAHA,IAAIG,EAAuB,GACvBpG,EAAMiG,EAAM3R,OAEPhJ,EAAI,EAAGA,EAAI0U,EAAK1U,IAAK,CACR2a,EAAM3a,GAERmb,cACZL,EAAqBxT,KAAKtH,GAIlC,OAAO8a,GAjDJL,EAAAtK,MAAQ,uCAmDnBsK,EApDA,GAAa3a,EAAA2a,qGCHb,IAAAzY,EAAApC,EAAA,GACAwb,EAAAxb,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,iCAAkC,IACzCyV,UAAU4F,EAAAC,qBAAqBlL,MAAOiL,EAAAC,qBAAqB3F,WAC3DnV,oFCDL,IAAA8a,EAAA,WAGI,SAAAA,EACY1F,GADZ,IAAAC,EAAAlO,KACYA,KAAAiO,YAIZjO,KAAAiG,KAAO,SAACkI,EAAuBvR,EAAmCkI,EAA4BsJ,GACtFtJ,EAAM8O,gBACNxF,EAAYE,YAAYJ,EAAKD,UAAUM,OAAS,SAACC,GAC7C,OAAON,EAAKD,UAAUQ,SAASD,EAAWnT,UAAWmT,EAAW3F,WAK5E7I,KAAA0O,QAAU,UAWd,OATWiF,EAAA3F,QAAP,WACI,IAAIF,EAAY,SAACG,GACb,OAAO,IAAI0F,EAAqB1F,IAKpC,OAFAH,EAAU3E,QAAU,CAAC,gDAEd2E,GAxBJ6F,EAAAlL,MAAQ,gBA0BnBkL,EA3BA,GAAavb,EAAAub,sGCLb,IAAArZ,EAAApC,EAAA,GACA2b,EAAA3b,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,uCAAwC,IAC/CyV,UAAU+F,EAAAC,2BAA2BrL,MAAOoL,EAAAC,2BAA2B9F,WACvEnV,oFCDL,IAAAib,EAAA,WAGI,SAAAA,EACY7F,GADZ,IAAAC,EAAAlO,KACYA,KAAAiO,YAIZjO,KAAAiG,KAAO,SAACkI,EAAuBvR,EAAmCkI,EAA4BsJ,GACtFtJ,EAAMiP,sBACN3F,EAAYE,YAAYJ,EAAKD,UAAUM,OAAS,SAACC,GAC7C,OAAON,EAAKD,UAAUQ,SAASD,EAAWnT,UAAWmT,EAAW3F,WAK5E7I,KAAA0O,QAAU,UAWd,OATWoF,EAAA9F,QAAP,WACI,IAAIF,EAAY,SAACG,GACb,OAAO,IAAI6F,EAA2B7F,IAK1C,OAFAH,EAAU3E,QAAU,CAAC,sDAEd2E,GAxBJgG,EAAArL,MAAQ,sBA0BnBqL,EA3BA,GAAa1b,EAAA0b,4GCLb,IAAAxZ,EAAApC,EAAA,GACA8b,EAAA9b,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,iCAAkC,IACzCkQ,QAAQyL,EAAAC,mBAAmBxL,MAAOuL,EAAAC,oBAClCpb,oFCNL,IAAAyB,EAAApC,EAAA,GAOA+b,EAAA,WAQI,SAAAA,EACYC,EACAvL,GADA3I,KAAAkU,SACAlU,KAAA2I,cA2BhB,OApBWsL,EAAA/Z,UAAAia,UAAP,SAAiBtL,EAAqCoK,GAAtD,IAAA/E,EAAAlO,KACQzD,EAAqC,GAiBzC,OAfAjC,EAAQgL,QAAQtF,KAAKkU,OAAQ,SAAC9Y,EAAagZ,GACzC,IAAIva,EAAMqP,SAASkL,EAAW,IAC1BC,EAAgBpB,EAAM7L,OAAO,SAAAlH,GAAQ,OAAAA,EAAK9E,MAAQvB,IAClDqG,EAAiCmU,EAAc/S,OAAS+S,EAAc,GAAK,KAE1EnU,GAIHA,EAAKoU,MAAQlZ,EAEbmB,EAAOqD,KAAKM,IALZ3D,EAAOqD,KAAKsO,EAAKvF,YAAYxN,WAAW0N,EAAQhP,EAAK,OASlDS,EAAQia,KAAKhY,GAAQiR,KAAK,SAACC,EAAGC,GAAM,OAAAD,EAAErS,IAAMsS,EAAEtS,OAlClD6Y,EAAAxL,MAAQ,sCAERwL,EAAA9K,QAAU,CACb,0BACA,gCAgCR8K,EArCA,GAAa7b,EAAA6b,oGCPb,IAAA3Z,EAAApC,EAAA,GACAsc,EAAAtc,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,kCAAmC,IAC1CyV,UAAU0G,EAAAC,sBAAsBhM,MAAO+L,EAAAC,sBAAsBzG,WAC7DnV,oFCDL,IAAA4b,EAAA,WAGI,SAAAA,EACYxG,GADZ,IAAAC,EAAAlO,KACYA,KAAAiO,YAIZjO,KAAAiG,KAAO,SAACkI,EAAuBvR,EAAmCkI,EAA4BsJ,GACtFtJ,EAAM4P,iBACNtG,EAAYE,YAAYJ,EAAKD,UAAUM,OAAS,SAACC,GAC7C,OAAON,EAAKD,UAAUQ,SAASD,EAAWnT,UAAWmT,EAAW3F,WAK5E7I,KAAA0O,QAAU,UAWd,OATW+F,EAAAzG,QAAP,WACI,IAAIF,EAAY,SAACG,GACb,OAAO,IAAIwG,EAAsBxG,IAKrC,OAFAH,EAAU3E,QAAU,CAAC,iDAEd2E,GAxBJ2G,EAAAhM,MAAQ,iBA0BnBgM,EA3BA,GAAarc,EAAAqc,uGCLb,IAAAna,EAAApC,EAAA,GACAyc,EAAAzc,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,kCAAmC,IAC1CkQ,QAAQoM,EAAAC,oBAAoBnM,MAAOkM,EAAAC,qBACnCC,IAAI,CAACF,EAAAC,oBAAoBnM,MAAO,SAACmH,GAC9BA,EAAoBkF,gBAEvBjc,oFCNL,IAAA+b,EAAA,WAKI,SAAAA,EACYjF,GAAA3P,KAAA2P,YAsBhB,OAhBWiF,EAAA1a,UAAA4a,WAAP,WACI,IAEIvE,EAAQvQ,KAAK+U,iBAAiBjb,KAAKkG,MAEvCA,KAAK2P,UAAUmB,OAJG,sBAIeP,GACjCvQ,KAAK2P,UAAUqB,GALG,sBAKWT,IAG1BqE,EAAA1a,UAAAkX,iBAAP,WACI,OAAOpR,KAAKgV,eAGRJ,EAAA1a,UAAA6a,iBAAR,SAAyBxE,GACrBvQ,KAAKgV,cAAgB,CAAE7E,EAAGI,EAAMC,MAAOyE,EAAG1E,EAAM2E,QAzB7CN,EAAAnM,MAAQ,uCAERmM,EAAAzL,QAAU,CAAC,aAyBtByL,EA5BA,GAAaxc,EAAAwc,qGCHb,IAAAta,EAAApC,EAAA,GACAid,EAAAjd,EAAA,IAEAE,EAAAsC,QACIJ,EAAQjC,OAAO,iCAAkC,IAChDuW,UAAUuG,EAAAC,qBAAqB3M,MAAO,IAAI0M,EAAAC,sBAC1Cza,WAAWwa,EAAAE,sBAAsB5M,MAAO0M,EAAAE,uBACxCxc,oFCPL,IAAAyB,EAAApC,EAAA,GAaAmd,EAAA,WAgBE,SAAAA,EACU1J,EACA/Q,EACAC,EACAya,EACApK,EACA0E,EACAzE,EACAC,EACAmK,GARAvV,KAAA2L,WACA3L,KAAApF,KACAoF,KAAAnF,SACAmF,KAAAsV,uBACAtV,KAAAkL,qBACAlL,KAAA4P,sBACA5P,KAAAmL,eACAnL,KAAAoL,eACApL,KAAAuV,4BAERvV,KAAKpD,QAAUoD,KAAK2L,SAAS,GAkUjC,OAjTS0J,EAAAnb,UAAAsb,UAAP,eAAAtH,EAAAlO,KACEA,KAAK2L,SAASqF,GAAG,aAAc,WAC7B9C,EAAKuH,iBAGPzV,KAAK2L,SAASqF,GAAG,aAAc,WAC7B9C,EAAKwH,iBAGP1V,KAAK2L,SAASqF,GAAG,UAAW,WACzB9C,EAAKyH,cAGR3V,KAAKnF,OAAO+a,IAAG,gCAAqC,SAACrF,EAA8BsF,GAC7E3H,EAAKhO,KAAKuT,cACZvF,EAAK4H,YAAYD,KAIrB7V,KAAKnF,OAAO+a,IAAG,gCAAqC,SAACrF,EAA8BnV,GAC5E8S,EAAKhO,KAAKsT,gBAAkBtF,EAAKhO,KAAK9E,MAAQA,GACjD8S,EAAK6H,gBAIT/V,KAAKnF,OAAO+a,IAAG,oCAA0C,WACvD1H,EAAK6H,iBAIDV,EAAAnb,UAAAub,aAAR,WAEMzV,KAAKE,KAAKuT,cACZzT,KAAKnF,OAAO+W,MAAK,qCAGf5R,KAAKgW,cACPhW,KAAKiW,kBAGHjW,KAAKkW,cAAgBlW,KAAKE,KAAKuT,cACjCzT,KAAKmW,eAIDd,EAAAnb,UAAAwb,aAAR,WACM1V,KAAKgW,cACPhW,KAAKoW,sBAIDf,EAAAnb,UAAAyb,UAAR,WACM3V,KAAKqW,iBACPrW,KAAKsW,sBAIDjB,EAAAnb,UAAA+b,gBAAR,WACEjW,KAAKgW,aAAa5a,IAAM4E,KAAKE,KAAK9E,IAClC4E,KAAKqW,gBAAkBrW,KAAKE,KAAKqW,YAAYvW,KAAKgW,cAClDhW,KAAKqW,gBAAgBG,WAAY,GAG3BnB,EAAAnb,UAAAkc,mBAAR,WACEpW,KAAKE,KAAKuW,eAAezW,KAAKgW,cAC9BhW,KAAKoO,YAAYsI,YACjB1W,KAAKqW,gBAAkB,MAGjBhB,EAAAnb,UAAAoc,mBAAR,WACEtW,KAAKqW,gBAAgBG,WAAY,EAEjCxW,KAAKoO,YAAYsI,YACjB1W,KAAKE,KAAKyW,cAAc3W,KAAKqW,iBAC7BrW,KAAKqW,gBAAkB,MAGjBhB,EAAAnb,UAAA0c,kBAAR,SAA0Blb,EAAeiB,GAevC,OAdAjB,EAAQsE,KAAKuV,0BAA0BsB,eAAenb,EAAO,EAAGiB,GAChEA,EAAMqD,KAAKuV,0BAA0BsB,eAAela,EAAKjB,EAAOsE,KAAK6I,OAAOkB,UAExE/J,KAAK6I,OAAOyB,WACd3N,EAAM,MAGO,CACbvB,IAAK4E,KAAKE,KAAK9E,IACfM,MAAOA,EACPiB,IAAKA,EACLpD,MAAOyG,KAAK6I,OAAOtN,eAMf8Z,EAAAnb,UAAA4c,iBAAR,SAAyBrb,GACvB,OAAIuE,KAAKE,KAAK6W,UACL/W,KAAK6I,OAAOrN,SAASC,GAErBuE,KAAKpF,GAAGe,KAAKF,IAKjB4Z,EAAAnb,UAAA8c,YAAP,WACE,IAKIC,EACAC,EANAC,EAAQnX,KAAK4P,oBAAoBwB,mBACjCgG,EAAqBpX,KAAKqX,sBAAsBF,EAAMhH,GAEtDmH,EAA4BtX,KAAKuX,oBAAoB7L,KAKrD0L,EAAaE,GACfL,EAAmBG,EACnBF,EAAoBI,IAEpBL,EAAmBK,EACnBJ,EAAoBE,GAGtB,IAAIlB,EAAc,CAChBxK,KAAM1L,KAAKwX,oBAAoBP,GAC/BpL,MAAO7L,KAAKwX,oBAAoBN,IAGlClX,KAAKyX,eAAe,CAClBvB,YAAaA,KAKVb,EAAAnb,UAAAwd,cAAP,WACE,IAAIP,EAAQnX,KAAK4P,oBAAoBwB,mBACjCuG,EAAM3X,KAAKqX,sBAAsBF,EAAMhH,GAE3CnQ,KAAKuX,oBAAsB,CACzB7L,KAAMiM,EACN9L,MAAO7L,KAAK6I,OAAOyB,SAAWqN,EAAM3X,KAAKmL,aAAewM,EAAM3X,KAAK6I,OAAOhN,UAG5EmE,KAAKyX,eAAe,CAClBvB,YAAa5b,EAAQia,KAAKvU,KAAKuX,wBAI5BlC,EAAAnb,UAAA0d,wBAAP,WACO5X,KAAKE,KAAK2X,WAIf7X,KAAKE,KAAKsT,gBAAiB,EAC3BxT,KAAKmW,gBAGAd,EAAAnb,UAAA4d,wBAAP,WAEM9X,KAAK6I,OAAOyB,SACdtK,KAAK0X,gBAIH1X,KAAKE,KAAKuT,cACZzT,KAAKgX,eAIF3B,EAAAnb,UAAA6d,sBAAP,eAAA7J,EAAAlO,KACM6V,EAAgB7V,KAAK4W,kBAAkB5W,KAAKkW,YAAYxK,KAAM1L,KAAKkW,YAAYrK,OAEnF7L,KAAK8W,iBAAiBjB,GAAemC,KAAK,SAAAC,GACxC/J,EAAKrT,OAAO+W,MAAK,mCAAyCqG,KACzDC,MAAM,WACPhK,EAAKrT,OAAO+W,MAAK,oCAIbyD,EAAAnb,UAAAic,YAAR,WACEnW,KAAKE,KAAKuT,cAAe,EACzBzT,KAAK0X,iBAGCrC,EAAAnb,UAAA4b,YAAR,SAAoBD,GACd7V,KAAKE,KAAKiY,mBACZnY,KAAKE,KAAKkY,oBAAoBvC,GAC9B7V,KAAKoO,YAAYsI,YACjB1W,KAAK6I,OAAO5M,YAGd+D,KAAK+V,eAGCV,EAAAnb,UAAAkX,iBAAR,SAAyBZ,GAIvB,OAFWA,EADUxQ,KAAKsV,qBAAqB5J,KAAK1L,KAAK2L,WAMnD0J,EAAAnb,UAAAmd,sBAAR,SAA8B7G,GAC5B,OAAOxQ,KAAKqY,WAAWrY,KAAKoR,iBAAiBZ,KAMvC6E,EAAAnb,UAAAoe,aAAR,SAAqB7c,GAArB,IAAAyS,EAAAlO,KACE,GAAIA,KAAKE,KAAK6W,UAAW,CACvBtb,EAAS8c,YAAa,EAEtB,IAAIC,EAAmBle,EAAQia,KAAK9Y,GAEpCuE,KAAK6I,OAAOrN,SAASC,GAAUuc,KAAK,SAAC3K,GACnC,IAAIoL,EAAQvK,EAAK9C,aAAaE,YAAY4C,EAAKrF,OAAQwE,GAEvD,GAAIa,EAAKwK,aAAaD,GACpBvK,EAAKhO,KAAKuW,eAAehb,OACpB,CACL,IAAIkd,EAAmBre,EAAQia,KAAKkE,GAEpCvK,EAAKhO,KAAKyW,cAAc8B,GAKpBne,EAAQse,OAAOD,EAAkBF,IAGnCD,EAAiB/S,OAAOgT,GAI5BvK,EAAKE,YAAYsI,cAChBwB,MAAM,cAENW,QAAQ,WACTpd,EAAS8c,YAAa,MAKpBlD,EAAAnb,UAAA4e,YAAR,SAAoBpd,GAGlB,OAFsCsE,KAAK+Y,sBAAsBrd,GAEvCsd,WAAa,MAGjC3D,EAAAnb,UAAA+e,aAAR,SAAqBvd,EAAeiB,GAE9BqD,KAAK6I,OAAOyB,UAAoB,OAAR3N,IAC1BA,EAAMjB,EAAQsE,KAAKmL,cAIrBxO,EAAMqD,KAAKkL,mBAAmBK,iBAAiBvL,KAAK6I,OAAQlM,GAG5D,IAAIuc,EAAqBlZ,KAAK+Y,sBAAsBpc,EAAMqD,KAAK6I,OAAOhN,UAElEsd,EAAcD,EAAmBF,WAAaE,EAAmBE,YAIrE,OAFapZ,KAAKpD,QAAQyc,YAAcF,EAExB,MAGV9D,EAAAnb,UAAA6e,sBAAR,SAA8BpB,GAG5B,OAFAA,EAAM3X,KAAKsZ,uBAAuB3B,GAE3B3X,KAAKpD,QAAQ2c,cAAcjX,cAAc,SAASqV,EAAG,OAGtDtC,EAAAnb,UAAAwe,aAAR,SAAqBjd,GACnB,QAAIA,EAAS+d,gBAITxZ,KAAK6I,OAAOjN,sBAAwBH,EAASlC,QAAUyG,KAAK6I,OAAOtN,eAOlE8Z,EAAAnb,UAAAme,WAAP,SAAkBoB,GAChB,IAAIC,EAAUD,EAAQzZ,KAAKpD,QAAQyc,YACnC,OAAOM,KAAKC,MAAMF,EAAW1Z,KAAK6I,OAAoB,cAAI,IAAO7I,KAAK6I,OAAOhN,UAGvEwZ,EAAAnb,UAAAof,uBAAR,SAA+B/f,GAE7B,IAAIsgB,EAAY7Z,KAAK6I,OAAOkB,SAAW/J,KAAK6I,OAAOhN,SAEnD,OAAOmE,KAAKuV,0BAA0BsB,eAAetd,EAAO,EAAGsgB,IAGzDxE,EAAAnb,UAAAsd,oBAAR,SAA4Bje,GAC1B,OAAOyG,KAAKuV,0BAA0BsB,eAAetd,EAAO,EAAGyG,KAAK6I,OAAOkB,WAGrEsL,EAAAnb,UAAA6b,YAAR,WACE/V,KAAKE,KAAKsT,gBAAiB,EAC3BxT,KAAKE,KAAKuT,cAAe,EACzBzT,KAAKyX,eAAe,OA1VfpC,EAAA5M,MAAQ,0BACR4M,EAAAtG,cAAgB,kBAEhBsG,EAAAlM,QAAU,CACf,WACA,KACA,SACA,wCACA,sCACA,uCACA,gCACA,gCACA,8CAgVJkM,EA7VA,GAAajd,EAAAid,wBAgWb,IAAAD,EAAA,oBAAAA,IAGEpV,KAAA8Z,SAAW,CACTjR,OAAQ,IACRmN,aAAc,IACdE,YAAa,IACbhW,KAAM,WACNuX,eAAgB,KAGlBzX,KAAArF,WAAa0a,EAAsB5M,MACnCzI,KAAAgP,aAAeqG,EAAsBtG,cAErC/O,KAAA0O,QAAU,CACRN,YAAa,WAGfpO,KAAAkP,SAAWhX,EAAQ,IACrB,OAlBSkd,EAAA3M,MAAQ,gBAkBjB2M,EAnBA,GAAahd,EAAAgd,sCC7Wb/c,EAAAD,QAAA,i1ECAA,IAAAkC,EAAApC,EAAA,GACA6hB,EAAA7hB,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,6BAA8B,IACrCyV,UAAUiM,EAAAC,iBAAiBvR,MAAOsR,EAAAC,iBAAiBhM,WACnDnV,oFCDL,IAAAmhB,EAAA,WAGI,SAAAA,EACY/L,GADZ,IAAAC,EAAAlO,KACYA,KAAAiO,YAIZjO,KAAAiG,KAAO,SAACkI,EAAuBvR,EAAmCkI,EAA4BsJ,GAC1FA,EAAYE,YAAYJ,EAAKD,UAAUM,OAAS,SAACC,GAC7C,OAAON,EAAKD,UAAUQ,SAASD,EAAWnT,UAAWmT,EAAW3F,UAIxE7I,KAAA0O,QAAU,UAWd,OATWsL,EAAAhM,QAAP,WACI,IAAIF,EAAY,SAACG,GACb,OAAO,IAAI+L,EAAiB/L,IAKhC,OAFAH,EAAU3E,QAAU,CAAC,4CAEd2E,GAtBJkM,EAAAvR,MAAQ,YAwBnBuR,EAzBA,GAAa5hB,EAAA4hB,kGCLb,IAAA1f,EAAApC,EAAA,GACA+hB,EAAA/hB,EAAA,IACAgiB,EAAAhiB,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,6BAA8B,IACrCyV,UAAUmM,EAAAE,iBAAiB1R,MAAOwR,EAAAE,iBAAiBnM,WACnDzF,QAAQ2R,EAAAE,eAAe3R,MAAOyR,EAAAE,gBAC9BvhB,oFCHL,IAAAshB,EAAA,WAGI,SAAAA,EACYlM,GADZ,IAAAC,EAAAlO,KACYA,KAAAiO,YAIZjO,KAAAiG,KAAO,SAACkI,EAAuBvR,EAAmCkI,EAA4BsJ,GAC1FA,EAAYE,YAAYJ,EAAKD,UAAUM,OAAS,SAACC,GAC7C,OAAON,EAAKD,UAAUQ,SAASD,EAAWnT,UAAWmT,EAAW3F,UAIxE7I,KAAA0O,QAAU,UAWd,OATWyL,EAAAnM,QAAP,WACI,IAAIF,EAAY,SAACG,GACb,OAAO,IAAIkM,EAAiBlM,IAKhC,OAFAH,EAAU3E,QAAU,CAAC,4CAEd2E,GAtBJqM,EAAA1R,MAAQ,YAwBnB0R,EAzBA,GAAa/hB,EAAA+hB,kGCCb,IAAAC,EAAA,WAOI,SAAAA,EACYlP,GAAAlL,KAAAkL,qBAqChB,OAjCIkP,EAAAlgB,UAAAmgB,gBAAA,SAAgBxR,EAAqCyR,EAAqCC,GACtF,IAAIC,EAAeF,EAAQ5e,MACvB+e,EAAaza,KAAKkL,mBAAmBK,iBAAiB1C,EAAQyR,EAAQ3d,KAEtE+d,EAAaH,EAAM7e,MACnBif,EAAW3a,KAAKkL,mBAAmBK,iBAAiB1C,EAAQ0R,EAAM5d,KAEtE,OAAIge,GAAYF,GAAcC,GAAcF,EACxC,EAGAC,GAAcE,GAAYH,GAAgBE,EAC1C,EAGAC,EAAWH,GAAgBG,GAAYF,EACvC,EAGAC,GAAcF,GAAgBE,EAAaD,EAC3C,EAGAE,IAAaH,GAAgBG,GAAYF,EACzC,EAGAC,IAAeD,GAAcC,GAAcD,EAC3C,EAGJ,GA1CGL,EAAA3R,MAAQ,kCAER2R,EAAAjR,QAAU,CACb,uCAyCRiR,EA7CA,GAAahiB,EAAAgiB,gGCNb,IAAA9f,EAAApC,EAAA,GACA0iB,EAAA1iB,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,kCAAmC,IAC1CkQ,QAAQqS,EAAAC,oBAAoBpS,MAAOmS,EAAAC,qBACnChiB,oFCDL,IAAAgiB,EAAA,oBAAAA,KAeA,OAZIA,EAAA3gB,UAAA4gB,MAAA,SAAMzf,EAAwCwN,GAI1C,IAHA,IAGSvQ,EAHO+C,EAAUiG,OAAS,EAGXhJ,GAAK,EAAGA,IACxB+C,EAAU/C,GAAGiB,QAAUsP,EAAOtN,cAC9BF,EAAUsJ,OAAOrM,EAAG,GAI5B,OAAO+C,GAZJwf,EAAApS,MAAQ,uCAcnBoS,EAfA,GAAaziB,EAAAyiB,qGCLb,IAAAvgB,EAAApC,EAAA,GACA6iB,EAAA7iB,EAAA,IAGAE,EAAAsC,QAAeJ,EACVjC,OAAO,4BAA6B,IACpC2iB,SAASD,EAAAE,sBAAsBxS,MAAOsS,EAAAE,uBACtCpG,IAAI,CAACkG,EAAAE,sBAAsBxS,MAAO,SAACyS,GAAkC,OAAAA,EAAcpG,gBACnFjc,oFCFL,IAAAoiB,EAAA,WAGI,SAAAA,IAOQjb,KAAAmb,mBAA+B,GAE/Bnb,KAAAob,oBAA8B,EARlCpb,KAAKqb,KAAKlS,QAAU,CAChB,aACA,WAyCZ,OAjCW8R,EAAA/gB,UAAAohB,sBAAP,SAA6BC,GACzBvb,KAAKmb,mBAAqBI,GAGvBN,EAAA/gB,UAAAmhB,KAAP,SACIG,EACAC,GAFJ,IAAAvN,EAAAlO,KAII,MAAO,CACH8U,WAAY,WACJ5G,EAAKkN,qBAITK,EAAQC,iBAAiB,SAAU,WAE/BF,EAAW5K,OAAO,WACd4K,EAAWG,WAAU,iCAIzBzN,EAAKiN,oBACLjN,EAAKiN,mBAAmB7V,QAAQ,SAACiL,GAC7BiL,EAAW5F,IAAIrF,EAAO,WAClBiL,EAAWG,WAAU,iCAKjCzN,EAAKkN,oBAAqB,MA1CxBH,EAAAxS,MAAQ,mCA8C1BwS,EA/CA,GAAa7iB,EAAA6iB,uGCNb,IAAA3gB,EAAApC,EAAA,GACA0jB,EAAA1jB,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,6CAA8C,IACrDuW,UAAUgN,EAAAC,iCAAiCpT,MAAO,IAAImT,EAAAC,kCACtDlhB,WAAWihB,EAAAE,kCAAkCrT,MAAOmT,EAAAE,mCACpDjjB,oFCDL,IAAAijB,EAAA,WAUI,SAAAA,EACYC,GAAA/b,KAAA+b,UAHJ/b,KAAAgc,aAAsD,GAoClE,OA7BIF,EAAA5hB,UAAA+hB,QAAA,WACI,IAAIpT,EAAS7I,KAAKwR,cAAc3I,OAEhC,GAAIA,EAAO9M,YAAa,CACpB,IAAIA,EAAciE,KAAK+b,QAAQ,iCAAb/b,CAA+C6I,EAAO9M,aACxEiE,KAAKgc,aAAY,YAAgCnT,EAAOxM,wBAAwBN,YAAYA,GAmBhG,GAhBI8M,EAAOwB,eACPrK,KAAKgc,aAAY,aAAiCnT,EAAOxM,wBAAwBgO,cAGjFxB,EAAOqB,eACPlK,KAAKgc,aAAY,aAAiCnT,EAAOxM,wBAAwB6N,cAGjFrB,EAAOyB,WACPtK,KAAKgc,aAAY,QAA4BnT,EAAOxM,wBAAwBiO,UAG5EzB,EAAO8B,sBAAwB9B,EAAO8B,qBAAqBF,QAC3DzK,KAAKgc,aAAY,cAAkCnT,EAAOxM,wBAAwBkO,cAAc1B,EAAO8B,uBAGvG9B,EAAO7M,kBAAmB,CAC1B,IAAIA,EAAoBgE,KAAK+b,QAAQ,iCAAb/b,CAA+C6I,EAAO7M,mBAC9EgE,KAAKgc,aAAY,kBAAsCnT,EAAOxM,wBAAwBL,kBAAkBA,KAxCzG8f,EAAA/M,cAAgB,8BAChB+M,EAAArT,MAAQ,qDAERqT,EAAA3S,QAAU,CAAC,WAwCtB2S,EA5CA,GAAa1jB,EAAA0jB,oCA+Cb,IAAAD,EAAA,oBAAAA,IAGI7b,KAAArF,WAAamhB,EAAkCrT,MAC/CzI,KAAAgP,aAAe8M,EAAkC/M,cAEjD/O,KAAA0O,QAAU,CACN8C,cAAe,sBAGnBxR,KAAAkP,SAAW,2QAKf,OAdW2M,EAAApT,MAAQ,4BAcnBoT,EAfA,GAAazjB,EAAAyjB,kHCrDb,IAAAvhB,EAAApC,EAAA,GACAgkB,EAAAhkB,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,gCAAiC,IACxCyV,UAAUoO,EAAAC,oBAAoB1T,MAAOyT,EAAAC,oBAAoBnO,WACzDnV,oFCDL,IAAAsjB,EAAA,oBAAAA,IAGInc,KAAAiG,KAAO,SAACkI,EAAuBvR,EAAmCkI,EAA4BsJ,GAC1FD,EAAMiO,OAAOtX,EAAMuX,QAAS,WACxBjO,EAAYkO,cACb,IAGPtc,KAAA0O,QAAU,UASd,OAPWyN,EAAAnO,QAAP,WAKI,OAJgB,WACZ,OAAO,IAAImO,IAZZA,EAAA1T,MAAQ,eAiBnB0T,EAlBA,GAAa/jB,EAAA+jB,qGCLb,IAAA7hB,EAAApC,EAAA,GACAqkB,EAAArkB,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,2CAA4C,IACnDuW,UAAU2N,EAAAC,+BAA+B/T,MAAO,IAAI8T,EAAAC,gCACpD7hB,WAAW4hB,EAAAE,gCAAgChU,MAAO8T,EAAAE,iCAClD5jB,oFCFL,IAAA4jB,EAAA,WAUI,SAAAA,EACY9Q,EACA9Q,EACA6hB,EACAC,GAHA3c,KAAA2L,WACA3L,KAAAnF,SACAmF,KAAA0c,gBACA1c,KAAA2c,cAuBhB,OAnBIF,EAAAviB,UAAAsb,UAAA,eAAAtH,EAAAlO,KACQpD,EAAUoD,KAAK2L,SAAS,GAE5B3L,KAAK0c,cAAcE,aAAahgB,EAAS,IACzCoD,KAAK2c,YAAYE,UAAUjgB,GAG3BoD,KAAKnF,OAAO+a,IAAG,iCAAwC,SAAClT,EAAG9B,GACvDsN,EAAKyO,YAAYG,YAAYlgB,EAAS8F,EAAG9B,KAG7CZ,KAAKnF,OAAO+a,IAAG,8BAAmC,SAAClT,GAC/CwL,EAAKyO,YAAYE,UAAUjgB,KAG/BoD,KAAKnF,OAAO+a,IAAG,2BAAgC,SAAClT,GAC5CwL,EAAKyO,YAAYI,OAAOngB,MAjCzB6f,EAAAhU,MAAQ,mDAERgU,EAAAtT,QAAU,CACb,WACA,SACA,iCACA,gCA8BRsT,EArCA,GAAarkB,EAAAqkB,kCAwCb,IAAAD,EAAA,oBAAAA,IAGIxc,KAAArF,WAAa8hB,EAAgChU,MAC7CzI,KAAAmP,YAAa,EAEbnP,KAAAkP,SAAW,kCACf,OANWsN,EAAA/T,MAAQ,0BAMnB+T,EAPA,GAAapkB,EAAAokB,gHC7Cb,IAAAliB,EAAApC,EAAA,GACA8kB,EAAA9kB,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,mCAAoC,IAC3CyV,UAAUkP,EAAAC,uBAAuBxU,MAAOuU,EAAAC,uBAAuBjP,WAC/DnV,oFCDL,IAAAokB,EAAA,WAGI,SAAAA,EACYhP,GADZ,IAAAC,EAAAlO,KACYA,KAAAiO,YAIZjO,KAAAiG,KAAO,SAACkI,EAAuBvR,EAAmCkI,EAA4BsJ,GACtFtJ,EAAMoY,kBACN9O,EAAYE,YAAYJ,EAAKD,UAAUM,OAAS,SAACC,GAC7C,OAAON,EAAKD,UAAUQ,SAASD,EAAWnT,UAAWmT,EAAW3F,WAK5E7I,KAAA0O,QAAU,UAWd,OATWuO,EAAAjP,QAAP,WACI,IAAIF,EAAY,SAACG,GACb,OAAO,IAAIgP,EAAuBhP,IAKtC,OAFAH,EAAU3E,QAAU,CAAC,kDAEd2E,GAxBJmP,EAAAxU,MAAQ,kBA0BnBwU,EA3BA,GAAa7kB,EAAA6kB,wGCLb,IAAA3iB,EAAApC,EAAA,GACAilB,EAAAjlB,EAAA,IACAklB,EAAAllB,EAAA,IACAmlB,EAAAnlB,EAAA,IACAolB,EAAAplB,EAAA,IACAqlB,EAAArlB,EAAA,IACAslB,EAAAtlB,EAAA,IACAulB,EAAAvlB,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,wCAAyC,IAChDkQ,QAAQ4U,EAAAO,6BAA6BjV,MAAO0U,EAAAO,8BAC5CnV,QAAQ6U,EAAAO,4BAA4BlV,MAAO2U,EAAAO,6BAC3CpV,QAAQ8U,EAAAO,kCAAkCnV,MAAO4U,EAAAO,mCACjDrV,QAAQ+U,EAAAO,6BAA6BpV,MAAO6U,EAAAO,8BAC5CtV,QAAQgV,EAAAO,gCAAgCrV,MAAO8U,EAAAO,iCAC/CvV,QAAQiV,EAAAO,wBAAwBtV,MAAO+U,EAAAO,yBACvCxV,QAAQkV,EAAAO,8BAA8BvV,MAAOgV,EAAAO,+BAC7CnlB,oFCZL,IAAA6kB,EAAA,oBAAAA,KA6DA,OA1DI1kB,OAAAC,eAAIykB,EAAAxjB,UAAA,QAAK,KAAT,WACI,sDAGGwjB,EAAAxjB,UAAAuU,SAAP,SAAgBpT,EAAyCwN,GACrD,IAAKA,EAAOwB,aACR,OAAO,EAKX,IAAI2C,EAAM3R,EAAUiG,OAGpB,IAAK0L,EACD,OAAO,EAIX,GAAY,IAARA,EAAW,CACX,IAAIvR,EAAWJ,EAAU,GACzB,OAAO2E,KAAKie,wBAAwBxiB,EAASC,QAAUsE,KAAKke,sBAAsBziB,EAASkB,IAAKkM,GAUpG,IANA,IAAIsV,EAAUnR,EAAM,EAChBzQ,GAAS,EAKJjE,GAFa+C,EAAUmS,KAAK,SAACC,EAAGC,GAAM,OAAAD,EAAE/R,MAAQgS,EAAEhS,MAAQ,GAAK,IAE3D,GAAGpD,EAAI6lB,EAAS7lB,IAAK,CAC9B,IAAIgiB,EAAUjf,EAAU/C,GACpB8lB,EAAO/iB,EAAU/C,EAAI,GAGzB,GAAU,IAANA,IAAY0H,KAAKie,wBAAwB3D,EAAQ5e,OACjD,OAAO,EAIX,GAAIpD,IAAM6lB,EAAU,IAAMne,KAAKke,sBAAsBE,EAAKzhB,IAAKkM,GAC3D,OAAO,EAGXtM,EAASA,GAAU+d,EAAQ3d,MAAQyhB,EAAK1iB,MAG5C,OAAOa,GAGHmhB,EAAAxjB,UAAA+jB,wBAAR,SAAgCviB,GAC5B,OAAiB,IAAVA,GAGHgiB,EAAAxjB,UAAAgkB,sBAAR,SAA8BvhB,EAAakM,GACvC,OAAQlM,GAAOkM,EAAOkB,YAAclB,EAAOkB,UA1DxC2T,EAAAjV,MAAQ,gDA4DnBiV,EA7DA,GAAatlB,EAAAslB,8GCCb,IAAAC,EAAA,WAKI,SAAAA,EACYzS,GAAAlL,KAAAkL,qBAiBhB,OAbIlS,OAAAC,eAAI0kB,EAAAzjB,UAAA,QAAK,KAAT,WACI,qDAGGyjB,EAAAzjB,UAAAuU,SAAP,SAAgBpT,EAAyCwN,GAAzD,IAAAqF,EAAAlO,KACQjE,EAAc8M,EAAO9M,YAEzB,OAAKA,IAIGV,EAAUgjB,KAAK,SAAAhkB,GAAK,OAAAA,EAAEd,QAAUsP,EAAOtN,cAAgB2S,EAAKhD,mBAAmBK,iBAAiB1C,EAAQxO,EAAEsC,KAAOtC,EAAEqB,MAAQK,KApBhI4hB,EAAAlV,MAAQ,+CAERkV,EAAAxU,QAAU,CAAC,uCAoBtBwU,EAvBA,GAAavlB,EAAAulB,6GCDb,IAAAC,EAAA,oBAAAA,KAiCA,OA9BI5kB,OAAAC,eAAI2kB,EAAA1jB,UAAA,QAAK,KAAT,WACI,2DAGG0jB,EAAA1jB,UAAAuU,SAAP,SAAgBpT,EAAyCwN,GACrD,IAAKA,EAAO7M,kBACR,OAAO,EAGX,IAAMgR,EAAM3R,EAAUiG,OAEtB,GAAI0L,GAAO,EACP,OAAO,EAGX,IAAMmR,EAAUnR,EAAM,EAEtB3R,EAAUmS,KAAK,SAACC,EAAGC,GAAM,OAAAD,EAAE/R,MAAQgS,EAAEhS,QAErC,IAAK,IAAIpD,EAAI,EAAGA,EAAI6lB,EAAS7lB,IAAK,CAC9B,IAAI2U,EAAkB5R,EAAU/C,GAGhC,GAFmB+C,EAAU/C,EAAI,GAEhBoD,MAAQuR,EAAgBtQ,IAAMkM,EAAO7M,kBAClD,OAAO,EAIf,OAAO,GA9BJ4hB,EAAAnV,MAAQ,qDAgCnBmV,EAjCA,GAAaxlB,EAAAwlB,mHCNb,IAAAtjB,EAAApC,EAAA,GAOA2lB,EAAA,oBAAAA,KAyBA,OAtBI7kB,OAAAC,eAAI4kB,EAAA3jB,UAAA,QAAK,KAAT,WACI,sDAIG2jB,EAAA3jB,UAAAuU,SAAP,SAAgBpT,EAAyCwN,GACrD,OAAKA,EAAOqB,iBAQRoU,EADAhkB,EAAQyQ,UAAUlC,EAAOtN,cACHF,EAAU+L,OAAO,SAAA3L,GAAY,OAAAA,EAASlC,QAAUsP,EAAOtN,eAEvDF,GAIEiG,QAAyC,IAA/Bgd,EAAoBhd,QAT1D,IAAIgd,GAbDT,EAAApV,MAAQ,gDAwBnBoV,EAzBA,GAAazlB,EAAAylB,8GCAb,IAAAC,EAAA,oBAAAA,KAcA,OAXI9kB,OAAAC,eAAI6kB,EAAA5jB,UAAA,QAAK,KAAT,WACI,iDAGJ4jB,EAAA5jB,UAAAuU,SAAA,SAASpT,EAAyCwN,GAC9C,OAAIA,EAAOyB,SACAjP,EAAUiG,QAAU,GAAKjG,EAAUkY,MAAM,SAAA9X,GAAY,OAAiB,OAAjBA,EAASkB,MAE9DtB,EAAUkY,MAAM,SAAA9X,GAAY,OAAiB,OAAjBA,EAASkB,OAV7CmhB,EAAArV,MAAQ,2CAanBqV,EAdA,GAAa1lB,EAAA0lB,iHCEb,IAAAC,EAAA,WAOI,SAAAA,EACYQ,GAAAve,KAAAue,iBA2BhB,OAvBIvlB,OAAAC,eAAI8kB,EAAA7jB,UAAA,QAAK,KAAT,WACI,iDAGG6jB,EAAA7jB,UAAAuU,SAAP,SAAgBpT,EAAyCwN,GAKrD,IAHA,IAAImE,EAAM3R,EAAUiG,OAChB/E,GAAS,EAEJjE,EAAI,EAAGA,EAAI0U,EAAM,EAAG1U,IAAK,CAC9B,IAAIgiB,EAAUjf,EAAU/C,GACpB8lB,EAAO/iB,EAAU/C,EAAI,GAIzB,KAFkBgiB,EAAQ/gB,QAAU6kB,EAAK7kB,OAEvB,CACd,IAAIilB,EAAexe,KAAKue,eAAelE,gBAAgBxR,EAAQyR,EAAS8D,GACxE7hB,EAASA,GAAU,QAAmGmI,QAAQ8Z,IAAiB,GAIvJ,OAAOjiB,GAhCJwhB,EAAAtV,MAAQ,2CAERsV,EAAA5U,QAAU,CACb,mCA+BR4U,EAnCA,GAAa3lB,EAAA2lB,yGCHb,IAAAC,EAAA,oBAAAA,KA0BA,OAvBIhlB,OAAAC,eAAI+kB,EAAA9jB,UAAA,QAAK,KAAT,WACI,uDAGG8jB,EAAA9jB,UAAAuU,SAAP,SAAgBpT,EAAyCwN,GACrD,OAAKA,EAAO8B,qBAAqBF,QAI7B5B,EAAO8B,qBAAqBD,MACrB1K,KAAKye,mBAAmBpjB,EAAWwN,GAEnC7I,KAAK0e,iBAAiBrjB,EAAWwN,KAIxCmV,EAAA9jB,UAAAukB,mBAAR,SAA2BpjB,EAAyCwN,GAChE,OAAOxN,EAAUiG,SAAWuH,EAAO8B,qBAAqBF,OAGpDuT,EAAA9jB,UAAAwkB,iBAAR,SAAyBrjB,EAAyCwN,GAC9D,OAAOxN,EAAUiG,QAAUuH,EAAO8B,qBAAqBF,OAvBpDuT,EAAAvV,MAAQ,iDAyBnBuV,EA1BA,GAAa5lB,EAAA4lB,+GCNb,IAAA1jB,EAAApC,EAAA,GACAymB,EAAAzmB,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,4BAA6B,IACpCkQ,QAAQoW,EAAAC,cAAcnW,MAAOkW,EAAAC,eAC7B/lB,oFCHL,IAAA+lB,EAAA,WAOI,SAAAA,EACYjC,GAAA3c,KAAA2c,cAsBhB,OAlBWiC,EAAA1kB,UAAA0iB,aAAP,SAAoBhgB,EAAS8T,GAA7B,IAAAxC,EAAAlO,KACIpD,EAAQ8e,iBAAiB,aAAc,SAACnL,GAcpC,OAbAA,EAAMW,iBACNX,EAAMY,kBAEFZ,EAAMsO,QACN3Q,EAAKyO,YAAYmC,aAAaliB,EAAS2T,EAAOG,IAEzCH,EAAMwO,YAAcxO,EAAMyO,QAAU,EACrCpiB,EAAQqiB,YAAcvO,EAEtB9T,EAAQqiB,YAAcvO,GAIvB,KA1BRkO,EAAAnW,MAAQ,iCAERmW,EAAAzV,QAAU,CACb,gCA0BRyV,EA9BA,GAAaxmB,EAAAwmB,+FCHb,IAAAtkB,EAAApC,EAAA,GACAgnB,EAAAhnB,EAAA,IACAinB,EAAAjnB,EAAA,IACAknB,EAAAlnB,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,0BAA2B,IAClC+O,OAAO8X,EAAAG,oBAAoB5W,MAAOyW,EAAAG,oBAAoBrR,WACtD5G,OAAOgY,EAAAE,gBAAgB7W,MAAO2W,EAAAE,gBAAgBtR,WAC9CzF,QAAQ4W,EAAAI,qBAAqB9W,MAAO0W,EAAAI,sBACpC1mB,oFCPL,IAAAwmB,EAAA,oBAAAA,KAkEA,OA/DkBA,EAAArR,QAAd,WACI,IAAIwR,EAAkB,SAAClW,GACnB,OAAO,SAASmW,GACZ,IAAIljB,EAAS,GAETmjB,EAAQ/F,KAAKC,MAAM6F,EAAUnW,EAAcmJ,iBAE/ClW,EAAS8iB,EAAoBM,iBAAiBpjB,EAAQmjB,GAEtDD,GAAWC,EAAQpW,EAAcmJ,gBAEjC,IAAImN,EAAUjG,KAAKC,MAAM6F,EAAUnW,EAAcuW,mBAYjD,OAVAtjB,EAAS8iB,EAAoBS,mBAAmBvjB,EAAQqjB,GAExDH,GAAWG,EAAUtW,EAAcuW,mBAEnCtjB,EAAS8iB,EAAoBU,mBAAmBxjB,EAAQkjB,MAGpDljB,EAAS,QAGNA,IAMf,OAFAijB,EAAgBrW,QAAU,CAAC,yCAEpBqW,GAGIH,EAAAM,iBAAf,SAAgCpjB,EAAgBmjB,GAK5C,OAJIA,IACAnjB,GAAamjB,EAAK,UAGfnjB,GAGI8iB,EAAAS,mBAAf,SAAkCvjB,EAAgBqjB,GAS9C,OARIA,IACIrjB,IACAA,GAAU,KAGdA,GAAaqjB,EAAO,WAAUA,EAAU,EAAI,IAAM,KAG/CrjB,GAGI8iB,EAAAU,mBAAf,SAAkCxjB,EAAgBkjB,GAS9C,OARIA,IACIljB,IACAA,GAAU,KAGdA,GAAakjB,EAAO,WAAUA,EAAU,EAAI,IAAM,KAG/CljB,GA/DJ8iB,EAAA5W,MAAQ,iCAiEnB4W,EAlEA,GAAajnB,EAAAinB,qGCFb,IAAAE,EAAA,oBAAAA,KA0BA,OAvBIvmB,OAAAC,eAAWsmB,EAAArlB,UAAA,iBAAc,KAAzB,WACI,OAAO8F,KAAKggB,eAAiBhgB,KAAK6f,mDAGtC7mB,OAAAC,eAAWsmB,EAAArlB,UAAA,kBAAe,KAA1B,WACI,OAAO8F,KAAK6f,kBAAoB7f,KAAKigB,iDAGzCjnB,OAAAC,eAAWsmB,EAAArlB,UAAA,oBAAiB,KAA5B,WACI,OAAO,oCAGXlB,OAAAC,eAAWsmB,EAAArlB,UAAA,eAAY,KAAvB,WACI,OAAO,oCAGXlB,OAAAC,eAAWsmB,EAAArlB,UAAA,iBAAc,KAAzB,WACI,OAAO8F,KAAKigB,gBAAkBjgB,KAAKiK,8CAGvCjR,OAAAC,eAAWsmB,EAAArlB,UAAA,kBAAe,KAA1B,WACI,OAAO,oCAvBJqlB,EAAA9W,MAAQ,wCAyBnB8W,EA1BA,GAAannB,EAAAmnB,sGCEb,IAAAD,EAAA,oBAAAA,KAkCA,OA/BkBA,EAAAtR,QAAd,WACI,IAAIwR,EAAkB,SAAClW,GACnB,OAAO,SAASmW,GACZ,IAAIC,EAAQ/F,KAAKC,MAAM6F,EAAUnW,EAAcmJ,iBAC3CH,EAAWoN,EAAQ,IAAMA,EAAQ,GAAK,IAAM,IAEhDD,GAAWC,EAAQpW,EAAcmJ,gBAEjC,IAAImN,EAAUjG,KAAKC,MAAM6F,EAAUnW,EAAcuW,mBACjDJ,GAAWG,EAAUtW,EAAcuW,kBAEnC,IAAIK,EAAmBN,EAAQ7f,WAEA,GAA3BmgB,EAAiB5e,SACjB4e,EAAmB,IAAMA,GAG7B,IAAIC,EAAeT,EAAQ,IAAM,GAEjC,OAAKD,EAGSU,EAAY,IAAID,EAAgB,IAAIT,EAAUnN,EAF9C6N,EAAY,IAAID,EAAmB5N,IASzD,OAFAkN,EAAgBrW,QAAU,CAAC,yCAEpBqW,GA/BJF,EAAA7W,MAAQ,6BAiCnB6W,EAlCA,GAAalnB,EAAAknB,iGCHb,IAAAhlB,EAAApC,EAAA,GACAkoB,EAAAloB,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,+BAAgC,IACvCuW,UAAUwR,EAAAC,mBAAmB5X,MAAO,IAAI2X,EAAAC,oBACxC1lB,WAAWylB,EAAAE,oBAAoB7X,MAAO2X,EAAAE,qBACtCznB,oFCPL,IAAAyB,EAAApC,EAAA,GAIAmoB,EAAA,oBAAAA,IAGIrgB,KAAA8Z,SAAW,CACPre,SAAU,KAGduE,KAAArF,WAAa2lB,EAAoB7X,MACjCzI,KAAAgP,aAAesR,EAAoBvR,cAEnC/O,KAAAkP,SAAW,wWAIf,OAbWmR,EAAA5X,MAAQ,cAanB4X,EAdA,GAAajoB,EAAAioB,qBAiBb,IAAAC,EAAA,oBAAAA,KAaA,OAJIA,EAAApmB,UAAA+hB,QAAA,WACIjc,KAAKugB,SAAWjmB,EAAQyQ,UAAU/K,KAAKvE,SAASC,OAChDsE,KAAKwgB,OAASlmB,EAAQyQ,UAAU/K,KAAKvE,SAASkB,MAA8B,OAAtBqD,KAAKvE,SAASkB,KAVjE2jB,EAAAvR,cAAgB,gBAChBuR,EAAA7X,MAAQ,wBAWnB6X,EAbA,GAAaloB,EAAAkoB,qGCrBb,IAAAhmB,EAAApC,EAAA,GACAuoB,EAAAvoB,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,2BAA4B,IACnCkQ,QAAQkY,EAAAC,aAAajY,MAAOgY,EAAAC,cAC5B7nB,oFCLL,IAAA6nB,EAAA,oBAAAA,KA4BA,OAzBWA,EAAAxmB,UAAAymB,WAAP,SAAkBpQ,GACd,GAAIA,EAAMqQ,cAAe,CACrB,GAAIrQ,EAAMqQ,cAAcC,SAAWtQ,EAAMqQ,cAAcC,QAAQvf,OAC3D,OAAOiP,EAAMqQ,cAAcC,QACxB,GAAItQ,EAAMqQ,cAAcE,gBAAkBvQ,EAAMqQ,cAAcE,eAAexf,OAChF,OAAOiP,EAAMqQ,cAAcE,eAQnC,OAJKvQ,EAAMsQ,UACPtQ,EAAMsQ,QAAU,CAACtQ,EAAMqQ,gBAGpBrQ,EAAMsQ,SAGVH,EAAAxmB,UAAAoW,SAAP,SAAgBC,GACZ,IAAIsQ,EAAU7gB,KAAK2gB,WAAWpQ,GAE9B,OAAIsQ,GAAWA,EAAQvf,QAAUuf,EAAQ,GAC9BA,EAAQ,GAAGrQ,MAGf,MAzBJkQ,EAAAjY,MAAQ,gCA2BnBiY,EA5BA,GAAatoB,EAAAsoB,8FCDb,IAAApmB,EAAApC,EAAA,GACA6oB,EAAA7oB,EAAA,IACA8oB,EAAA9oB,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,2CAA4C,IACnD4oB,SAASF,EAAAG,OAAOzY,MAAOsY,EAAAG,OAAO3nB,OAC9B0nB,SAASD,EAAAG,aAAa1Y,MAAOuY,EAAAG,aAAa5nB,OAC1CV,oFCJL,MAAAqoB,EAAA,oBAAAA,KAYA,OAXWA,EAAAzY,MAAQ,0BAERyY,EAAA3nB,QAAK6nB,EAAA,IACR,GAAe,MACfA,EAAA,GAAgB,MAChBA,EAAA,GAAkB,MAClBA,EAAA,GAAiB,OACjBA,EAAA,GAAe,MACfA,EAAA,GAAiB,MACjBA,EAAA,GAAe,SAEvBF,EAZA,GAAa9oB,EAAA8oB,wFCHb,IAAAC,EAAA,oBAAAA,KAIA,OAHWA,EAAA1Y,MAAQ,gCAER0Y,EAAA5nB,MAAQ,KACnB4nB,EAJA,GAAa/oB,EAAA+oB,8FCDb,IAAA7mB,EAAApC,EAAA,GACAmpB,EAAAnpB,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,qCAAsC,IAC7CuW,UAAUyS,EAAAC,yBAAyB7Y,MAAO,IAAI4Y,EAAAC,0BAC9C3mB,WAAW0mB,EAAAE,0BAA0B9Y,MAAO4Y,EAAAE,2BAC5C1oB,oFCPL,IAAAyB,EAAApC,EAAA,GAcAqpB,EAAA,WAeE,SAAAA,EACU5V,EACA9Q,EACAC,EACA0mB,EACAC,EACAC,EACAC,EACAC,GAPA5hB,KAAA2L,WACA3L,KAAAnF,SACAmF,KAAAlF,WACAkF,KAAAwhB,iBACAxhB,KAAAyhB,uBACAzhB,KAAA0hB,4BACA1hB,KAAA2hB,sBACA3hB,KAAA4hB,qBAQH5hB,KAAA6hB,eAAyB,GA4JlC,OA7IEN,EAAArnB,UAAA+hB,QAAA,WACEjc,KAAK6I,OAAS7I,KAAKyhB,qBAAqBlY,iBAAiBvJ,KAAK/E,SAC9D+E,KAAK8hB,wBACL9hB,KAAK+hB,eACL/hB,KAAKgiB,mBAGPT,EAAArnB,UAAAsb,UAAA,eAAAtH,EAAAlO,KACEA,KAAKnF,OAAO+a,IAAG,gCAAqC,SAACrF,EAA8B9U,GACjFyS,EAAK8H,aAAeva,IAGtBuE,KAAKnF,OAAO+a,IAAG,8BAAmC,WAChD1H,EAAK8H,aAAe,OAGtBhW,KAAKnF,OAAO+a,IAAG,mCAAyC,SAACrF,EAA8BsF,GACrF3H,EAAKrT,OAAO8gB,WAAU,gCAAqC9F,KAG7D7V,KAAKnF,OAAO+a,IAAG,oCAA0C,WACvD,IAAIqM,EAAe/T,EAAKyT,oBAAoB3O,gBAAgB9E,EAAK+E,OAEjE/E,EAAKrT,OAAO8gB,WAAU,gCAAqCsG,KAG7DjiB,KAAKnF,OAAO+a,IAAG,gCAAqC,WAClD1H,EAAKrT,OAAO8gB,WAAU,uCAGxB3b,KAAKlF,SAAS,WACZoT,EAAK2T,eAAiB3T,EAAKgU,uBAIxBX,EAAArnB,UAAAgoB,kBAAP,WACE,IAAIC,EAAqBniB,KAAK0hB,0BAA0B5W,sBAAsB9K,KAAK/E,SAEnF,OAAIknB,IAIAniB,KAAKoiB,qBACA,wEADT,IAKKb,EAAArnB,UAAAkoB,mBAAP,WACE,OAAOpiB,KAAKqiB,eAAeC,UAGrBf,EAAArnB,UAAAqoB,WAAR,SAAmBtP,GACjBjT,KAAKiT,MAAQjT,KAAK4hB,mBAAmBzN,UAAUnU,KAAK6I,OAAQoK,GAE5DjT,KAAKiT,MAAQjT,KAAKwiB,WAAWxiB,KAAKiT,OAElCjT,KAAKiT,MAAM3N,QAAQ,SAAApF,GAAQ,OAAAA,EAAKuiB,kBAGhCziB,KAAKxD,QAAQyW,MAAQjT,KAAKiT,MAG1BjT,KAAK0iB,eAAiBpoB,EAAQia,KAAKvU,KAAKiT,QAGlCsO,EAAArnB,UAAA4nB,sBAAR,WACE,IAAI7O,EAAQjT,KAAKwhB,eAAe5Y,oBAAoB5I,KAAK6I,OAAQ7I,KAAKxD,SAEtE,OAAOwD,KAAKuiB,WAAWtP,IAGjBsO,EAAArnB,UAAAsoB,WAAR,SAAmBvP,GACjB,GAAIjT,KAAK6I,OAAOjN,qBACd,IAAiB,IAAA4F,EAAA,EAAAmhB,EAAA1P,EAAAzR,EAAAmhB,EAAArhB,OAAAE,IAAK,CAAjB,IAAItB,EAAIyiB,EAAAnhB,GACXtB,EAAK0iB,wBAEF5iB,KAAK6I,OAAOyB,UACbpK,EAAK2iB,gBAKX,OAAO5P,GAGDsO,EAAArnB,UAAA4oB,aAAR,SAAqB7P,GACnB,GAAIjT,KAAK6I,OAAOjN,qBACd,IAAiB,IAAA4F,EAAA,EAAAuhB,EAAA9P,EAAAzR,EAAAuhB,EAAAzhB,OAAAE,IAAK,CAATuhB,EAAAvhB,GACNwhB,qCAIT,OAAO/P,GAGDsO,EAAArnB,UAAAud,eAAR,SAAuBvB,GACrBlW,KAAKkW,YAAcA,GAGbqL,EAAArnB,UAAA2iB,UAAR,WACE7c,KAAKnF,OAAO8gB,WAAU,gCAGhB4F,EAAArnB,UAAA6iB,OAAR,WACE/c,KAAKnF,OAAO8gB,WAAU,6BAGhB4F,EAAArnB,UAAA+oB,SAAR,WACEjjB,KAAKuiB,WAAWviB,KAAK0iB,gBACrB1iB,KAAKqiB,eAAea,gBAGd3B,EAAArnB,UAAAipB,KAAR,eAAAjV,EAAAlO,KAGE,OAFAA,KAAKiT,MAAQjT,KAAK8iB,aAAa9iB,KAAKiT,OAE7BjT,KAAK6I,OAAOvM,gBAAgB0b,KAAK,WACtC9J,EAAK+E,MAAQ/E,EAAKsU,WAAWtU,EAAK+E,OAClC/E,EAAKmU,eAAea,kBAIhB3B,EAAArnB,UAAA6nB,aAAR,eAAA7T,EAAAlO,KACEA,KAAKnF,OAAOuhB,OAAO,WACjB,OAAOlO,EAAK1R,SACX,WACD0R,EAAK4T,2BAIDP,EAAArnB,UAAA8nB,gBAAR,eAAA9T,EAAAlO,KAIEA,KAAKnF,OAAOuhB,OAAO,WAAM,OAAAlO,EAAKkV,YAAY,WACxClV,EAAKvC,SAAS0X,KAHM,UAGcC,YAJjB,SAMbpV,EAAKkV,YACPlV,EAAKvC,SAAS0X,KAAK,IAAInV,EAAKkV,YAAclR,SAP3B,YA/KdqP,EAAAxS,cAAgB,gBAChBwS,EAAA9Y,MAAQ,8BAER8Y,EAAApY,QAAU,CACf,WACA,SACA,WACA,kCACA,wCACA,6CACA,uCACA,uCA+KJoY,EA3LA,GAAanpB,EAAAmpB,4BA8Lb,IAAAD,EAAA,oBAAAA,IAGEthB,KAAA8Z,SAAW,CACTtd,QAAS,IACT4mB,WAAY,IACZnoB,QAAS,KAGX+E,KAAArF,WAAa4mB,EAA0B9Y,MACvCzI,KAAAgP,aAAeuS,EAA0BxS,cAEzC/O,KAAA0O,QAAU,CACR2T,eAAgB,QAGlBriB,KAAAkP,SAAWhX,EAAQ,IACrB,OAhBSopB,EAAA7Y,MAAQ,oBAgBjB6Y,EAjBA,GAAalpB,EAAAkpB,0CC5MbjpB,EAAAD,QAAA,ysFCAA,IAAAkC,EAAApC,EAAA,GACAqrB,EAAArrB,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,yCAA0C,IACjDkQ,QAAQgb,EAAAC,2BAA2B/a,MAAO8a,EAAAC,4BAC1C3qB,oFCNL,IAAAyB,EAAApC,EAAA,GASAurB,EAAAvrB,EAAA,IAIAsrB,EAAA,WAWI,SAAAA,EACYtP,EACAwP,EACAnF,EACAoF,EACAvY,GAJApL,KAAAkU,SACAlU,KAAA0jB,8BACA1jB,KAAAue,iBACAve,KAAA2jB,sBACA3jB,KAAAoL,eAahB,OATWoY,EAAAtpB,UAAAiB,WAAP,SAAkB0N,EAAqCzN,EAAaC,GAChE,IAAIkB,EAEAqnB,EAAqC/a,EAAO1N,WAAWC,EAAKC,GAIhE,OAFAkB,EAASjC,EAAQwP,OAAO8Z,EAAS,CAAEtP,MAAOtU,KAAKkU,OAAO9Y,KAE/C,IAAIqoB,EAAAI,oBAAoBhb,EAAQtM,EAAQyD,KAAK0jB,4BAA6B1jB,KAAKue,eAAgBve,KAAK2jB,oBAAqB3jB,KAAKoL,eA1BlIoY,EAAA/a,MAAQ,+BAER+a,EAAAra,QAAU,CACb,0BACA,+CACA,kCACA,uCACA,iCAqBRqa,EA7BA,GAAaprB,EAAAorB,4GCbb,IAAAlpB,EAAApC,EAAA,GAcA2rB,EAAA,WAQI,SAAAA,EACWhb,EACP3I,EACQwjB,EACAnF,EACAoF,EACAvY,GALDpL,KAAA6I,SAEC7I,KAAA0jB,8BACA1jB,KAAAue,iBACAve,KAAA2jB,sBACA3jB,KAAAoL,eAERpL,KAAK5E,IAAM8E,EAAK9E,IAChB4E,KAAK6X,UAAWvd,EAAQyQ,UAAU7K,EAAK2X,WAAY3X,EAAK2X,SACxD7X,KAAKsU,MAAQpU,EAAKoU,MAClBtU,KAAK3E,UAAY6E,EAAK7E,UAAU4E,IAAI,SAAAxE,GAAY,OAAA2P,EAAaE,YAAYzC,EAAQpN,KAsOzF,OAnOWooB,EAAA3pB,UAAAqc,YAAP,SAAmB9a,GACfA,EAASL,IAAM4E,KAAK5E,IACpB,IAAMqd,EAAQzY,KAAKoL,aAAaE,YAAYtL,KAAK6I,OAAQpN,GAGzD,OAFAuE,KAAK3E,UAAUuE,KAAK6Y,GAEbA,GAGJoL,EAAA3pB,UAAAke,oBAAP,SAA2B3c,GACvB,IAAIgd,EAAQzY,KAAKuW,YAAY9a,GAG7B,OAFAuE,KAAK2W,cAAc8B,GAEZA,GAGJoL,EAAA3pB,UAAAie,eAAP,WACI,OAAInY,KAAK6I,OAAOyB,UACLtK,KAAK8jB,kBAObD,EAAA3pB,UAAA6c,QAAP,WACI,IAAIgN,EAAkBzpB,EAAQqW,WAAW3Q,KAAK6I,OAAOrN,UAErD,OAAOwE,KAAK6X,UAAYkM,GAIrBF,EAAA3pB,UAAA8pB,gBAAP,SAAuBvoB,GACnB,IAAIwoB,EAAiBjkB,KAAK6X,SACtBqM,EAAqBzoB,EAASoc,SAElC,OAAOoM,GAAkBC,GAOtBL,EAAA3pB,UAAAiqB,eAAP,WAEI,OAAInkB,KAAK6I,OAAOyB,SACLtK,KAAKyT,cAAgBzT,KAAK8jB,iBAG9B9jB,KAAKyT,cAGToQ,EAAA3pB,UAAAkqB,YAAP,SAAmB3oB,GACf,OAAOuE,KAAK3E,UAAUqJ,QAAQjJ,IAAa,GAGxCooB,EAAA3pB,UAAA4pB,eAAP,WACI,OAAiC,IAA1B9jB,KAAK3E,UAAUiG,QAGnBuiB,EAAA3pB,UAAA8oB,mCAAP,WACIhjB,KAAK3E,UAAY2E,KAAK0jB,4BAA4BvX,KAAKnM,KAAMA,KAAK6I,SAG/Dgb,EAAA3pB,UAAA2oB,cAAP,WACI7iB,KAAK3E,UAAUiK,QAAQ,SAAAjL,GAAK,OAAAA,EAAEsC,IAAM,QAGjCknB,EAAA3pB,UAAAuoB,cAAP,eAAAvU,EAAAlO,KACI,GACIA,KAAK3E,UAAUiK,QAAQ,SAAA7J,GAAY,OAAAyS,EAAKmW,yBAAyB5oB,WAC5DuE,KAAKskB,wBAGXT,EAAA3pB,UAAAyc,cAAP,SAAqBlb,GAEjBuE,KAAKqkB,yBAAyB5oB,GAC9BuE,KAAKyiB,iBAGFoB,EAAA3pB,UAAA0oB,sBAAP,WACI5iB,KAAK3E,UAAY2E,KAAK2jB,oBAAoB7I,MAAM9a,KAAK3E,UAAW2E,KAAK6I,SAGlEgb,EAAA3pB,UAAAuc,eAAP,SAAsBhb,GAClB,IAAIJ,EAAY2E,KAAK3E,UAErBA,EAAUsJ,OAAOtJ,EAAUqJ,QAAQjJ,GAAW,GAE9CuE,KAAK6I,OAAOuB,YAKRyZ,EAAA3pB,UAAAqqB,kBAAR,SAA0B/F,GAA1B,MAAAtQ,EAAAlO,KAWI,QAVqBohB,EAAA,IACjB,GAA0B,SAAC9G,EAASC,GAAU,OAAArM,EAAKsW,gBAAgBlK,EAASC,IAC5E6G,EAAA,GAAqC,SAAC9G,EAASC,GAAU,OAAArM,EAAKuW,2BAA2BnK,EAASC,IAClG6G,EAAA,GAAmC,SAAC9G,EAASC,GAAU,OAAArM,EAAKwW,yBAAyBpK,EAASC,IAC9F6G,EAAA,GAAwC,SAAC9G,EAASC,GAAU,OAAArM,EAAKyW,8BAA8BrK,EAASC,IACxG6G,EAAA,GAA0C,SAAC9G,EAASC,GAAU,OAAArM,EAAK0W,gCAAgCtK,EAASC,IAC5G6G,EAAA,GAAuC,SAAC9G,EAASC,GAAU,OAAArM,EAAK2W,6BAA6BvK,EAASC,IACtG6G,EAAA,GAAuC,SAAC9G,EAASC,GAAU,OAAArM,EAAK4W,6BAA6BxK,EAASC,OAGnFiE,IAGnBqF,EAAA3pB,UAAAwqB,yBAAR,SAAiCpK,EAAoCC,GACjEva,KAAKyW,eAAe8D,IAGhBsJ,EAAA3pB,UAAAuqB,2BAAR,SAAmCnK,EAAoCC,GAC/DD,EAAQyK,eAAexK,IAEvBva,KAAKyW,eAAe8D,GAEpBD,EAAQ7U,OAAO,CACXrK,IAAKmf,EAAMnf,IACXM,MAAO6e,EAAM7e,MACbiB,IAAK4d,EAAM5d,IACXpD,MAAOghB,EAAMhhB,SAIjByG,KAAKyW,eAAe6D,IAIpBuJ,EAAA3pB,UAAAsqB,gBAAR,SAAwBlK,EAAqCC,KAIrDsJ,EAAA3pB,UAAAyqB,8BAAR,SAAsCrK,EAAoCC,GAClED,EAAQyK,eAAexK,IACvBva,KAAKyW,eAAe8D,GAEpBD,EAAQ7U,OAAO,CACXrK,IAAKkf,EAAQlf,IACbM,MAAO6e,EAAM7e,MACbiB,IAAK2d,EAAQ3d,IACbpD,MAAOghB,EAAMhhB,SAGjBghB,EAAM9U,OAAO,CACTrK,IAAKmf,EAAMnf,IACXM,MAAO6e,EAAM7e,MACbiB,IAAK2d,EAAQ5e,MACbnC,MAAO+gB,EAAQ/gB,SAKnBsqB,EAAA3pB,UAAA0qB,gCAAR,SAAwCtK,EAAoCC,GACpED,EAAQyK,eAAexK,IACvBva,KAAKyW,eAAe8D,GAEpBD,EAAQ7U,OAAO,CACXrK,IAAKkf,EAAQlf,IACbM,MAAO4e,EAAQ5e,MACfiB,IAAK4d,EAAM5d,IACXpD,MAAOghB,EAAMhhB,SAGjBghB,EAAM9U,OAAO,CACTrK,IAAKmf,EAAMnf,IACXM,MAAO4e,EAAQ3d,IACfA,IAAK4d,EAAM5d,IACXpD,MAAOghB,EAAMhhB,SAKjBsqB,EAAA3pB,UAAA2qB,6BAAR,SAAqCvK,EAAoCC,GACjED,EAAQyK,eAAexK,IACvBva,KAAK2kB,8BAA8BrK,EAASC,IAM5CsJ,EAAA3pB,UAAA4qB,6BAAR,SAAqCxK,EAAoCC,GACjED,EAAQyK,eAAexK,IACvBva,KAAK4kB,gCAAgCtK,EAASC,IAO9CsJ,EAAA3pB,UAAAmqB,yBAAR,SAAiC5oB,GAAjC,IAAAyS,EAAAlO,KACoBA,KAAK3E,UAEXiK,QAAQ,SAAAF,GACd,IAAKA,EAAGwT,OAAOnd,KACiB2J,EAAGyS,UAAYpc,EAASoc,UAEzB,CACvB,IAAI2G,EAAetQ,EAAKqQ,eAAelE,gBAAgBnM,EAAKrF,OAAQpN,EAAU2J,GACzD8I,EAAKqW,kBAAkB/F,EAE5CwG,CAAevpB,EAAU2J,OAMjCye,EAAA3pB,UAAAoqB,oBAAR,WAII,IAHA,IAAItX,EAAMhN,KAAK3E,UAAUiG,OAGhBhJ,EAAI,EAAGA,EAAI0U,EAAM,EAAG1U,GAAK,EAAG,CACjC,IAAIgiB,EAAUta,KAAK3E,UAAU/C,GACzB8lB,EAAOpe,KAAK3E,UAAU/C,EAAI,GAI9B,KAF4BgiB,EAAQzC,UAAYuG,EAAKvG,UAGjD,OAAO,EAGX,GAAIyC,EAAQyK,eAAe3G,GAAO,CAC9B,IAAII,EAAexe,KAAKue,eAAelE,gBAAgBra,KAAK6I,OAAQyR,EAAS8D,GAE7E,MAAO,MAA2E1Z,QAAQ8Z,IAAiB,KAI3HqF,EAzPA,GAAazrB,EAAAyrB,qGCdb,IAAAvpB,EAAApC,EAAA,GACA+sB,EAAA/sB,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,0CAA2C,IAClDkQ,QAAQ0c,EAAAC,4BAA4Bzc,MAAOwc,EAAAC,6BAC3CrsB,oFCHL,IAAAssB,EAAAjtB,EAAA,IAGAgtB,EAAA,WAOI,SAAAA,EACYha,GAAAlL,KAAAkL,qBAOhB,OAHWga,EAAAhrB,UAAAoR,YAAP,SAAmBzC,EAAqCpN,GACpD,OAAO,IAAI0pB,EAAAC,qBAAqBvc,EAAQpN,EAAUuE,KAAKkL,qBAZpDga,EAAAzc,MAAQ,gCAERyc,EAAA/b,QAAU,CACb,uCAWR+b,EAfA,GAAa9sB,EAAA8sB,6GCNb,IAAA5qB,EAAApC,EAAA,GASAktB,EAAA,WAaI,SAAAA,EACYvc,EACRpN,EACQyP,GAFAlL,KAAA6I,SAEA7I,KAAAkL,qBAERlL,KAAKqlB,OAAS5pB,EAAS4pB,OACvBrlB,KAAKwW,UAAY/a,EAAS+a,UAC1BxW,KAAKwZ,YAAc/d,EAAS+d,YAC5BxZ,KAAKuY,WAAa9c,EAAS8c,WAC3BvY,KAAK5E,IAAMK,EAASL,IACpB4E,KAAKtE,MAAQD,EAASC,MACtBsE,KAAKrD,IAAMlB,EAASkB,IACpBqD,KAAKzG,MAAQkC,EAASlC,MACtByG,KAAK6X,UAAWvd,EAAQyQ,UAAUtP,EAASoc,WAAYpc,EAASoc,SAyDxE,OAtDI7e,OAAAC,eAAImsB,EAAAlrB,UAAA,WAAQ,KAAZ,WACI,OAAO8F,KAAKrD,IAAMqD,KAAKtE,uCAGpB0pB,EAAAlrB,UAAA0e,OAAP,SAAc2B,GACV,OAAOjgB,EAAQse,OAAO5Y,KAAMua,IAGzB6K,EAAAlrB,UAAA6qB,eAAP,SAAsBxK,GAClB,OAAOva,KAAKzG,QAAUghB,EAAMhhB,OAGzB6rB,EAAAlrB,UAAAuL,OAAP,SAAc6f,GACV,IAAIC,EAAevlB,KAAKwlB,YAAYF,EAAgB5pB,OAChD+pB,EAAazlB,KAAK0lB,UAAUJ,EAAgB3oB,MAE5C4oB,GAAgBE,IAChBzlB,KAAK6I,OAAO5M,YAIbmpB,EAAAlrB,UAAAwrB,UAAP,SAAiBD,GACb,QAAIzlB,KAAK2lB,aAAaF,KAClBzlB,KAAKrD,IAAMqD,KAAKkL,mBAAmBc,kBAAkBhM,KAAK6I,OAAQ4c,IAC3D,IAMRL,EAAAlrB,UAAAsrB,YAAP,SAAmBD,GACf,QAAIvlB,KAAK4lB,eAAeL,KACpBvlB,KAAKtE,MAAQ6pB,GACN,IAMPH,EAAAlrB,UAAAyrB,aAAR,SAAqBF,GACjB,IAAII,EAAU7lB,KAAKrD,MAAQ8oB,EACvBK,EAAsBL,GAAczlB,KAAK6I,OAAOkB,SAChDgc,EAA+B/lB,KAAKkL,mBAAmBK,iBAAiBvL,KAAK6I,OAAQ4c,IAAezlB,KAAKtE,MAAQ,EAErH,OAAOmqB,GAAWC,GAAuBC,GAGrCX,EAAAlrB,UAAA0rB,eAAR,SAAuBL,GACnB,IAAIM,EAAU7lB,KAAKtE,QAAU6pB,EACzBS,EAAgCT,GAAgBvlB,KAAKkL,mBAAmBK,iBAAiBvL,KAAK6I,OAAQ7I,KAAKrD,KAAO,EAClHspB,EAAuBV,GAAgB,EAE3C,OAAOM,IAAY7lB,KAAK6I,OAAOyB,UAAY0b,IAAkCC,GAErFb,EAnFA,GAAahtB,EAAAgtB,sGCTb,IAAA9qB,EAAApC,EAAA,GACAguB,EAAAhuB,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,gCAAiC,IACxCuW,UAAUsX,EAAAC,oBAAoB1d,MAAO,IAAIyd,EAAAC,qBACzCxrB,WAAWurB,EAAAE,qBAAqB3d,MAAOyd,EAAAE,sBACvCvtB,oFCPL,IAAAyB,EAAApC,EAAA,GASAkuB,EAAA,WAuBE,SAAAA,EACUza,EACA6P,EACA3gB,EACAwrB,GAHArmB,KAAA2L,WACA3L,KAAAwb,aACAxb,KAAAnF,SACAmF,KAAAqmB,cAuGZ,OAnGErtB,OAAAC,eAAImtB,EAAAlsB,UAAA,kBAAe,KAAnB,WACE,OAAOI,EAAQyQ,UAAU/K,KAAKgW,eAAsC,MAArBhW,KAAKgW,8CAG9CoQ,EAAAlsB,UAAAosB,mBAAR,WACE,OAAOtmB,KAAKqmB,YAAYhb,yBAAyBrL,KAAK6I,OAAQ7I,KAAKvE,WAG9D2qB,EAAAlsB,UAAAqsB,SAAP,WACEvmB,KAAKsY,aAAa,CAAE7c,SAAUuE,KAAKvE,YAG9B2qB,EAAAlsB,UAAAssB,KAAP,SAAY/M,GACV,IAAIgN,EAAKzmB,KAAKvE,SACViV,EAAQ1Q,KAAK0mB,SAAS,CAAEjN,MAAOA,IAE/BkN,EAAWhN,KAAKiN,MAAM5mB,KAAK6mB,kBAAkBnrB,MAAQgV,GACrDoW,EAAS9mB,KAAK6I,OAAOyB,SAAW,KAAOqP,KAAKiN,MAAMD,EAAW3mB,KAAK6mB,kBAAkBE,UAExF/mB,KAAKvE,SAASgK,OAAO,CACnBrK,IAAKqrB,EAAGrrB,IACRM,MAAOirB,EACPhqB,IAAKmqB,EACLvtB,MAAOktB,EAAGltB,SAIP6sB,EAAAlsB,UAAA8sB,QAAP,WAKE,GAHAhnB,KAAKwb,WAAWG,WAAU,+BAGrB3b,KAAKE,KAAKkkB,YAAYpkB,KAAKvE,UAAhC,CAKA,IAAIoqB,GAAoB7lB,KAAK6mB,kBAAkBjO,OAAO5Y,KAAKsmB,sBAE3DtmB,KAAKvE,SAAS+a,WAAY,EAEtBqP,GACF7lB,KAAKoO,YAAYsI,YACjB1W,KAAKE,KAAKyW,cAAc3W,KAAKvE,WAE7BuE,KAAKumB,aAIFH,EAAAlsB,UAAA+sB,UAAP,WAEE,IAAIpB,GAAoB7lB,KAAK6mB,kBAAkBjO,OAAO5Y,KAAKsmB,sBAE3DtmB,KAAKvE,SAAS+a,WAAY,EAEtBqP,GACF7lB,KAAKoO,YAAYsI,YACjB1W,KAAKE,KAAKyW,cAAc3W,KAAKvE,WAE7BuE,KAAKumB,YAIFH,EAAAlsB,UAAAgtB,YAAP,SAAmBzN,GACjB,IAAI/I,EAAQ1Q,KAAK0mB,SAAS,CAAEjN,MAAOA,IAC/BkN,EAAWhN,KAAKiN,MAAM5mB,KAAK6mB,kBAAkBnrB,MAAQgV,GAErD1Q,KAAKvE,SAAS+pB,YAAYmB,IAC5B3mB,KAAK6I,OAAO5M,YAITmqB,EAAAlsB,UAAAitB,UAAP,SAAiB1N,GACf,IAAI/I,EAAQ1Q,KAAK0mB,SAAS,CAAEjN,MAAOA,IAC/BqN,EAASnN,KAAKiN,MAAM5mB,KAAK6mB,kBAAkBlqB,IAAM+T,GAEjD1Q,KAAKvE,SAASiqB,UAAUoB,IAC1B9mB,KAAK6I,OAAO5M,YAITmqB,EAAAlsB,UAAA6W,UAAP,WACO/Q,KAAKE,KAAK8jB,gBAAgBhkB,KAAKvE,YAIpCuE,KAAKnF,OAAO+W,MAAK,gCAAqC5R,KAAKvE,UAC3DuE,KAAKvE,SAAS+a,WAAY,EAC1BxW,KAAK6mB,kBAAoB7mB,KAAKsmB,uBAGzBF,EAAAlsB,UAAAktB,YAAP,WACOpnB,KAAKE,KAAK8jB,gBAAgBhkB,KAAKvE,YAIpCuE,KAAKvE,SAAS+a,WAAY,EAC1BxW,KAAK6mB,kBAAoB7mB,KAAKsmB,uBA/HzBF,EAAA3d,MAAQ,uBACR2d,EAAArX,cAAgB,iBAEhBqX,EAAAjd,QAAU,CACf,WACA,aACA,SACA,gCA0HJid,EAlIA,GAAahuB,EAAAguB,uBAqIb,IAAAD,EAAA,oBAAAA,IAGEnmB,KAAA8Z,SAAW,CACTjR,OAAQ,IACRmN,aAAc,IACd9V,KAAM,IACNzE,SAAU,WACV6c,aAAc,IACdoO,SAAU,KAGZ1mB,KAAArF,WAAayrB,EAAqB3d,MAClCzI,KAAAgP,aAAeoX,EAAqBrX,cAEpC/O,KAAA0O,QAAU,CACRN,YAAa,WAGfpO,KAAAkP,SAAWhX,EAAQ,IACrB,OAnBSiuB,EAAA1d,MAAQ,eAmBjB0d,EApBA,GAAa/tB,EAAA+tB,qCC9Ib9tB,EAAAD,QAAA,47BCAA,IAAAkC,EAAApC,EAAA,GACAmvB,EAAAnvB,EAAA,IAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,wCAAyC,IAChDkQ,QAAQ8e,EAAAC,0BAA0B7e,MAAO4e,EAAAC,2BACzCzuB,oFCLL,IAAAyuB,EAAA,oBAAAA,KAcA,OAXWA,EAAAptB,UAAA2c,eAAP,SAAsBtd,EAAeguB,EAAaC,GAC9C,OAAIjuB,EAAQguB,EACDA,EAGPhuB,EAAQiuB,EACDA,EAGJjuB,GAXJ+tB,EAAA7e,MAAQ,6CAanB6e,EAdA,GAAalvB,EAAAkvB,2GCDb,IAAAhtB,EAAApC,EAAA,GACAuvB,EAAAvvB,EAAA,KAEAE,EAAAsC,QAAeJ,EACVjC,OAAO,0BAA2B,IAClCkQ,QAAQkf,EAAAC,YAAYjf,MAAOgf,EAAAC,aAC3B7uB,oFCHL,IAAA6uB,EAAA,WAKI,SAAAA,EACYlM,GAAAxb,KAAAwb,aAIJxb,KAAA2nB,SAAmB,iBA2E/B,OAzEYD,EAAAxtB,UAAA0tB,uBAAR,WACI5nB,KAAKwb,WAAWG,WAAU,+BAGtB+L,EAAAxtB,UAAA2tB,wBAAR,WACI7nB,KAAKwb,WAAWG,WAAU,gCAGtB+L,EAAAxtB,UAAA4tB,oBAAR,SAA4BlrB,GACxB,OAAOsM,SAAStM,EAAQ0F,cAActC,KAAK2nB,UAAU9jB,MAAMkkB,MAAO,KAG9DL,EAAAxtB,UAAA8tB,eAAR,SAAuBC,GACnB,OAAOA,EAAU3lB,cAActC,KAAK2nB,WAGhCD,EAAAxtB,UAAAguB,aAAR,SAAqBtrB,EAAcmrB,GAChC/nB,KAAKgoB,eAAeprB,GAASiH,MAAMkkB,MAAQA,GAGvCL,EAAAxtB,UAAA2iB,UAAP,SAAiBjgB,GACboD,KAAKkoB,aAAatrB,EAAS,QAC3BoD,KAAK6nB,2BAGFH,EAAAxtB,UAAA6iB,OAAP,SAAcngB,GAEV,IAAIurB,EAAOnoB,KAAKgoB,eAAeprB,GAASiH,MAAMkkB,MAG1CK,EAA6B,EAArBlf,SAASif,EAAM,IAG3BnoB,KAAKkoB,aAAatrB,EAASwrB,EAAQ,KAEnCpoB,KAAK4nB,0BAGFF,EAAAxtB,UAAA4iB,YAAP,SAAmBlgB,EAAc2T,EAA8B3P,GAC3D,IAAIynB,EAAeznB,EAAKiR,WACpBvZ,EAAIsI,EAAK6D,IAET6jB,EAAiB1rB,EAAQwc,YAGzBmP,EAAWD,EADM,EAIjBE,EADc,EACDD,EAGbE,EADsBJ,EAAeE,EACaD,EAAkB,IAExEtoB,KAAKkoB,aAAatrB,EAAS6rB,EAA2B,KAGtD7rB,EAAQqiB,WAAa3mB,EAAIiwB,EAAWC,EAEpCxoB,KAAK4nB,0BAGFF,EAAAxtB,UAAA4kB,aAAP,SAAoBliB,EAAc2T,EAAmBG,GACjD,IAAIgY,EAAe1oB,KAAK8nB,oBAAoBlrB,GAE5C,IAAK2T,EAAMwO,YAAcxO,EAAMyO,QAAU,EACrChf,KAAKkoB,aAAatrB,EAAU8rB,EAAe,EAAIhY,EAAS,KACxD1Q,KAAK4nB,6BACF,CACH,IAAIG,EAAQW,EAAe,EAAIhY,EAC/B1Q,KAAKkoB,aAAatrB,GAAUmrB,EAAQ,IAAMA,EAAQ,KAAO,KACzD/nB,KAAK6nB,4BAjFNH,EAAAjf,MAAQ,+BAERif,EAAAve,QAAU,CAAC,cAkFtBue,EArFA,GAAatvB,EAAAsvB,6FCEb,IAAApsB,EAAA,WACE,SAAAA,EACSF,EACAC,GADA2E,KAAA5E,MACA4E,KAAA3E,YAOX,OAHErC,OAAAC,eAAIqC,EAAApB,UAAA,WAAQ,KAAZ,WACE,OAAO,mCAEXoB,EAVA,GAAalD,EAAAkD,0FCEX,IAAAoB,EAAA,WAGE,SAAAA,EACSoM,GAAA9I,KAAA8I,cAHF9I,KAAAiT,MAAoB,GAyB7B,OAlBSvW,EAAAxC,UAAAuC,YAAP,WACE,OAAOksB,MAAMzuB,UAAU2G,OAAOmB,MAAM,GAAIhC,KAAKiT,MAAMhT,IAAI,SAAAC,GACrD,OAAOA,EAAK7E,UAAU4E,IAAI,SAAAxE,GACxB,MAAO,CACLL,IAAKK,EAASL,IACdM,MAAOD,EAASC,MAChBiB,IAAKlB,EAASkB,IACdpD,MAAOkC,EAASlC,aAMjBmD,EAAAxC,UAAA6O,kCAAP,SAAyC0P,GAGvC,OAFAA,EAAM4M,OAAS,OAER5M,GAEX/b,EA1BA,GAAatE,EAAAsE","file":"angular-weekly-scheduler.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","module.exports = angular;","import * as angular from 'angular'\r\nimport { Days } from './ng-weekly-scheduler/weekly-scheduler-config/Days';\r\nimport { IWeeklySchedulerOptions } from './ng-weekly-scheduler/weekly-scheduler-config/IWeeklySchedulerOptions';\r\nimport AppModule from './ng-weekly-scheduler/app/module';\r\nimport { DemoItem } from './ng-weekly-scheduler/demo/DemoItem';\r\nimport { DemoAdapter } from './ng-weekly-scheduler/demo/DemoAdapter';\r\n\r\nfunction application() {\r\n  angular.module('demoApp', [AppModule])\r\n    .controller('DemoController', ['$q', '$scope', '$timeout', '$log',\r\n      function ($q: angular.IQService, $scope, $timeout, $log) {\r\n\r\n        $scope.model = {\r\n          options: {\r\n            buttonClasses: ['wow!'],\r\n            createItem: (day, schedules) => {\r\n              return new DemoItem(day, schedules);\r\n            },\r\n            defaultValue: false,\r\n            editSlot: function (schedule) {\r\n              schedule.start += 60;\r\n              schedule.value = true;\r\n              return $q.when(schedule);\r\n            },\r\n            fillEmptyWithDefault: true,\r\n            interval: 60,\r\n            fillNullEnds: 1800,\r\n            maxTimeSlot: 7200,\r\n            minimumSeparation: 300,\r\n            onChange: (isValid) => {\r\n              console.log(\"changed!\");\r\n            },\r\n            restrictionExplanations: {\r\n              maxTimeSlot: (value) => `Slots cannot be longer than ${value}!`\r\n            },\r\n            saveScheduler: () => {\r\n              $scope.result = $scope.adapter.getSnapshot();\r\n\r\n              return $q.when(true);\r\n            }\r\n          } as IWeeklySchedulerOptions<any>\r\n        }\r\n\r\n        $scope.adapter = new DemoAdapter([\r\n          {\r\n            day: Days.Saturday,\r\n            start: 3600,\r\n            end: 7200,\r\n            value: true\r\n          }\r\n        ]);\r\n      }]);\r\n\r\n      angular.element(document).ready(() => {\r\n        angular.bootstrap(document, ['demoApp']);\r\n      });\r\n}\r\n\r\napplication();\r\n","import * as angular from 'angular';\r\nimport '../../ng-weekly-scheduler.less';\r\n\r\nimport AdapterModule from '../adapter/module';\r\nimport ConfigurationModule from '../configuration/module';\r\nimport ConflictingOptionsModule from '../conflicting-options/module';\r\nimport DragModule from '../drag/module';\r\nimport ElementOffsetModule from '../element-offset/module';\r\nimport EndAdjusterModule from '../end-adjuster/module';\r\nimport FillEmptyWithDefaultModule from '../fill-empty-with-default/module';\r\nimport FullCalendarModule from '../full-calendar/module';\r\nimport GhostSlotModule from '../ghost-slot/module';\r\nimport GroupByModule from '../group-by/module';\r\nimport HandleModule from '../handle/module';\r\nimport HourlyGridModule from '../hourly-grid/module';\r\nimport LastGhostDayModule from '../last-ghost-day/module';\r\nimport MaxTimeSlotModule from '../max-time-slot/module';\r\nimport MinimumSeparationModule from '../minimum-separation/module';\r\nimport MissingDaysModule from '../missing-days/module';\r\nimport MonoScheduleModule from '../mono-schedule/module';\r\nimport MouseTrackerModule from '../mouse-tracker/module';\r\nimport MultiSliderModule from '../multislider/module';\r\nimport NullEndModule from '../null-end/module';\r\nimport OverlapModule from '../overlap/module';\r\nimport PurgeDefaultModule from '../purge-default/module';\r\nimport ResizeModule from '../resize/module';\r\nimport RestrictionExplanationsModule from '../restriction-explanations/module';\r\nimport RevalidateModule from '../revalidate/module';\r\nimport ScheduleAreaContainerModule from '../schedule-area-container/module';\r\nimport ScheduleCountModule from '../schedule-count/module';\r\nimport ScheduleValidationModule from '../schedule-validator/module';\r\nimport ScrollModule from '../scroll/module';\r\nimport TimeModule from '../time/module';\r\nimport TimeRangeModule from '../time-range/module';\r\nimport TouchModule from '../touch/module';\r\nimport WeeklySchedulerConfigModule from '../weekly-scheduler-config/module';\r\nimport WeeklySchedulerModule from '../weekly-scheduler/module';\r\nimport WeeklySchedulerItemModule from '../weekly-scheduler-item/module';\r\nimport WeeklySchedulerRangeModule from '../weekly-scheduler-range/module';\r\nimport WeeklySlotModule from '../weekly-slot/module';\r\nimport ValueNormalizationModule from '../value-normalization/module';\r\nimport ZoomModule from '../zoom/module';\r\n\r\n// import { IWeeklySchedulerAdapter as WeeklySchedulerAdapter } from '../adapter/IWeeklySchedulerAdapter';\r\n// import { IWeeklySchedulerOptions as WeeklySchedulerOptions } from '../weekly-scheduler-config/IWeeklySchedulerOptions';\r\n\r\n// export namespace weeklyScheduler {\r\n//     export type IWeeklySchedulerAdapter<TCustom, TValue> = WeeklySchedulerAdapter<TCustom, TValue>;\r\n//     export type IWeeklySchedulerOptions<T> = WeeklySchedulerOptions<T>;\r\n// }\r\n\r\nexport default angular.module('br.weeklyScheduler', [\r\n    AdapterModule,\r\n    ConfigurationModule,\r\n    ConflictingOptionsModule,\r\n    DragModule,\r\n    ElementOffsetModule,\r\n    EndAdjusterModule,\r\n    FillEmptyWithDefaultModule,\r\n    FullCalendarModule,\r\n    GroupByModule,\r\n    GhostSlotModule,\r\n    HandleModule,\r\n    HourlyGridModule,\r\n    LastGhostDayModule,\r\n    MaxTimeSlotModule,\r\n    MinimumSeparationModule,\r\n    MonoScheduleModule,\r\n    MouseTrackerModule,\r\n    MissingDaysModule,\r\n    MultiSliderModule,\r\n    NullEndModule,\r\n    OverlapModule,\r\n    PurgeDefaultModule,\r\n    ResizeModule,\r\n    RestrictionExplanationsModule,\r\n    RevalidateModule,\r\n    ScheduleAreaContainerModule,\r\n    ScheduleCountModule,\r\n    ScheduleValidationModule,\r\n    ScrollModule,\r\n    TimeModule,\r\n    TimeRangeModule,\r\n    TouchModule,\r\n    WeeklySchedulerConfigModule,\r\n    WeeklySchedulerModule,\r\n    WeeklySchedulerItemModule,\r\n    WeeklySchedulerRangeModule,\r\n    WeeklySlotModule,\r\n    ValueNormalizationModule,\r\n    ZoomModule\r\n])\r\n.name;\r\n","\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/less-loader/dist/cjs.js!./ng-weekly-scheduler.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/less-loader/dist/cjs.js!./ng-weekly-scheduler.less\", function() {\n\t\tvar newContent = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/less-loader/dist/cjs.js!./ng-weekly-scheduler.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"br-weekly-scheduler {\\n  background: #fff;\\n  border-left: 1px solid #ddd;\\n  border-right: 1px solid #ddd;\\n  border-top: 1px solid #ddd;\\n  color: #1c1c1c;\\n  display: block;\\n  margin-bottom: 10px;\\n  /* The dark class will be applied by a client on the outside of this component */\\n}\\nbr-weekly-scheduler br-multi-slider .slot.active {\\n  box-shadow: 0px 0px 2px 2px #1c1c1c;\\n}\\nbr-weekly-scheduler br-multi-slider .slot.nullEnd {\\n  background: linear-gradient(to right, currentColor, rgba(255, 255, 255, 0.5));\\n}\\nbr-weekly-scheduler br-multi-slider .slot span {\\n  color: #fff;\\n  display: block;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n}\\nbr-weekly-scheduler .labels {\\n  border-right: 1px solid #ddd;\\n}\\nbr-weekly-scheduler .striped > div:nth-child(even) {\\n  background-color: #f6f6f6;\\n}\\nbr-weekly-scheduler .srow {\\n  border-bottom: 1px solid #ddd;\\n}\\nbr-weekly-scheduler .timestamps div {\\n  border-width: 2px;\\n}\\nbr-weekly-scheduler .timestamps div:hover {\\n  background-color: #f6f6f6;\\n}\\nbr-weekly-scheduler .buttons div {\\n  display: inline-block;\\n}\\n.dark br-weekly-scheduler {\\n  background: #1c1c1c;\\n  border-left: 1px solid #777;\\n  border-right: 1px solid #777;\\n  border-top: 1px solid #777;\\n  color: #fff;\\n}\\n.dark br-weekly-scheduler br-multi-slider .slot.active {\\n  box-shadow: 0px 0px 2px 2px #fff;\\n}\\n.dark br-weekly-scheduler br-multi-slider .slot.nullEnd {\\n  background: linear-gradient(to right, currentColor, rgba(28, 28, 28, 0.5));\\n}\\n.dark br-weekly-scheduler br-multi-slider .slot span {\\n  color: #fff;\\n  display: block;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n}\\n.dark br-weekly-scheduler .labels {\\n  border-right: 1px solid #777;\\n}\\n.dark br-weekly-scheduler .striped > div:nth-child(even) {\\n  background-color: #333;\\n}\\n.dark br-weekly-scheduler .srow {\\n  border-bottom: 1px solid #777;\\n}\\n.dark br-weekly-scheduler .timestamps div {\\n  border-width: 2px;\\n}\\n.dark br-weekly-scheduler .timestamps div:hover {\\n  background-color: #333;\\n}\\nbr-weekly-scheduler .fullWidth {\\n  width: 100%;\\n}\\nbr-weekly-scheduler .labels {\\n  display: block;\\n  float: left;\\n  text-align: center;\\n}\\nbr-weekly-scheduler .labels .dummy {\\n  height: 15px;\\n}\\nbr-weekly-scheduler .labels .srow {\\n  padding: 0 5px;\\n}\\nbr-weekly-scheduler br-schedule-area-container {\\n  display: block;\\n  overflow-x: auto;\\n  /** Practical effect of \\\"start zoomed if the screen is below this width\\\" */\\n}\\nbr-weekly-scheduler br-schedule-area-container .schedule-area {\\n  min-width: 600px;\\n}\\nbr-weekly-scheduler .srow {\\n  position: relative;\\n  height: 28px;\\n  line-height: 28px;\\n}\\nbr-weekly-scheduler .srow.buttons {\\n  height: auto;\\n}\\nbr-weekly-scheduler .srow.explanations {\\n  padding-left: 5px;\\n}\\nbr-weekly-scheduler .srow.explanations.violation {\\n  color: red;\\n}\\nbr-weekly-scheduler .calendar {\\n  display: table;\\n  table-layout: fixed;\\n  position: relative;\\n  width: 100%;\\n}\\nbr-weekly-scheduler .timestamps {\\n  display: table;\\n  font-size: 0.6em;\\n  font-weight: bold;\\n  line-height: 15px;\\n  height: 15px;\\n  table-layout: fixed;\\n  text-transform: uppercase;\\n  width: 100%;\\n}\\nbr-weekly-scheduler .timestamps div {\\n  overflow: hidden;\\n  padding-left: 2px;\\n  text-overflow: clip;\\n}\\nbr-weekly-scheduler .timestamps div:hover {\\n  cursor: pointer;\\n}\\nbr-hourly-grid {\\n  display: table-row;\\n}\\nbr-hourly-grid div {\\n  box-sizing: border-box;\\n  display: table-cell;\\n  height: 100%;\\n}\\nbr-hourly-grid .interval {\\n  display: block;\\n  float: left;\\n}\\nbr-multi-slider {\\n  cursor: crosshair;\\n  height: 100%;\\n  top: 0;\\n  position: absolute;\\n  width: 100%;\\n}\\nbr-multi-slider .ghost-wrapper {\\n  width: 100%;\\n  height: 100%;\\n}\\nbr-multi-slider .slot {\\n  font-family: monospace;\\n  font-size: x-small;\\n  position: absolute;\\n  top: 5px;\\n  bottom: 5px;\\n  border-radius: 3px;\\n  text-align: center;\\n  white-space: nowrap;\\n  line-height: 18px;\\n}\\nbr-multi-slider .slot.nullEnd {\\n  text-align: left;\\n}\\nbr-multi-slider .slot .slotWrapper {\\n  display: flex;\\n  height: 100%;\\n}\\nbr-multi-slider .slot .slotWrapper .middle {\\n  cursor: all-scroll;\\n  display: inline-block;\\n  overflow: hidden;\\n  padding: 0 4px;\\n}\\nbr-multi-slider br-ghost-slot {\\n  background: #5ab56a;\\n  color: #5ab56a;\\n  opacity: 0.6;\\n  cursor: pointer;\\n  user-select: none;\\n}\\nbr-multi-slider br-ghost-slot span {\\n  color: #fff;\\n}\\nbr-multi-slider br-time-range {\\n  display: block;\\n  width: 100%;\\n}\\nbr-multi-slider br-weekly-slot {\\n  /**\\n     * We want to set the COLOR on any item we want to have a custom background color for.\\n     * This is because the gradient backgrounds for allowNulls rely on currentColor.\\n     * The text color within is set using a more specific selector\\n     */\\n  background: #2e81e1;\\n  color: #2e81e1;\\n  user-select: none;\\n}\\nbr-multi-slider br-weekly-slot.disable {\\n  cursor: not-allowed;\\n  color: #666;\\n  background: #c0c0c0;\\n}\\nbr-multi-slider br-weekly-slot.pending {\\n  background-color: #c81919;\\n}\\nbr-multi-slider br-weekly-slot .handle {\\n  display: inline-block;\\n  flex-grow: 1;\\n}\\nbr-multi-slider br-weekly-slot .handle.left,\\nbr-multi-slider br-weekly-slot .handle.right {\\n  cursor: e-resize;\\n  min-width: 4px;\\n  height: 100%;\\n}\\nbr-multi-slider br-weekly-slot.disable .handle {\\n  cursor: not-allowed;\\n}\\nbr-multi-slider br-weekly-slot .handle.left:hover,\\nbr-multi-slider br-weekly-slot .handle.right:hover {\\n  background-color: #000;\\n  opacity: 0.3;\\n}\\nbr-multi-slider br-weekly-slot .handle.left {\\n  float: left;\\n}\\nbr-multi-slider br-weekly-slot .handle.right {\\n  float: right;\\n}\\nbr-multi-slider br-weekly-slot.active {\\n  font-weight: bolder;\\n  z-index: 10;\\n}\\n\", \"\"]);\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \"{\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      // eslint-disable-next-line prefer-destructuring\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = modules[_i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = \"(\".concat(item[2], \") and (\").concat(mediaQuery, \")\");\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot).concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","import * as angular from 'angular';\r\nimport { AdapterService } from './AdapterService';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.adapter', [])\r\n    .service(AdapterService.$name, AdapterService)\r\n    .name;\r\n","import { GroupService } from '../group-by/GroupService';\r\nimport { IWeeklySchedulerAdapter } from '../adapter/IWeeklySchedulerAdapter';\r\nimport { IWeeklySchedulerConfig } from '../weekly-scheduler-config/IWeeklySchedulerConfig';\r\nimport { WeeklySchedulerItemFactory } from '../weekly-scheduler-item/WeeklySchedulerItemFactory';\r\n\r\n/** @internal */\r\nexport class AdapterService {\r\n    static $name = 'brWeeklySchedulerAdapterService';\r\n\r\n    static $inject = [\r\n        'brWeeklySchedulerGroupService',\r\n        'brWeeklySchedulerItemFactory'\r\n    ];\r\n\r\n    private constructor(\r\n        private groupService: GroupService,\r\n        private itemFactory: WeeklySchedulerItemFactory\r\n    ) {\r\n    }\r\n\r\n    getItemsFromAdapter(config: IWeeklySchedulerConfig<any>, adapter: IWeeklySchedulerAdapter<any, any>) {\r\n        let result = [];\r\n\r\n        if (adapter) {\r\n          let schedules = adapter.initialData.map(data => adapter.customModelToWeeklySchedulerRange(data));\r\n          let groupedSchedules = this.groupService.groupSchedules(schedules);\r\n    \r\n          for (let key in groupedSchedules) {\r\n            let item = this.itemFactory.createItem(config, parseInt(key, 10), groupedSchedules[key]);\r\n    \r\n            result.push(item);\r\n          }\r\n        }\r\n    \r\n        return result;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { ConfigurationService } from './ConfigurationService';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.configuration', [])\r\n    .service(ConfigurationService.$name, ConfigurationService)\r\n    .name;\r\n","import * as angular from 'angular';\r\nimport { IWeeklySchedulerOptions } from '../weekly-scheduler-config/IWeeklySchedulerOptions';\r\nimport { TimeConstantsService } from '../time/TimeConstantsService';\r\n\r\n/** @internal */\r\nexport class ConfigurationService {\r\n    static $name = 'brWeeklySchedulerConfigurationService';\r\n\r\n    static $inject = [\r\n        'brWeeklySchedulerTimeConstantsService'\r\n    ];\r\n\r\n    private constructor(\r\n        private timeConstants: TimeConstantsService\r\n    ) {\r\n    }\r\n\r\n    public getConfiguration(options: IWeeklySchedulerOptions<any>) {\r\n        var interval = options.interval || 900; // seconds\r\n        var intervalCount = this.timeConstants.SECONDS_IN_DAY / interval;\r\n\r\n        const defaultOptions = this.getDefaultOptions();\r\n\r\n        var userOptions = angular.merge(defaultOptions, options);\r\n\r\n        var result = angular.extend(userOptions, {\r\n            interval: interval,\r\n            maxValue: this.timeConstants.SECONDS_IN_DAY,\r\n            hourCount: this.timeConstants.HOURS_IN_DAY,\r\n            intervalCount: intervalCount,\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    private getDefaultOptions(): IWeeklySchedulerOptions<any> {\r\n        return {\r\n            createItem: (day, schedules) => { return { day: day, schedules: schedules } },\r\n            monoSchedule: false,\r\n            onChange: () => angular.noop(),\r\n            onRemove: () => angular.noop(),\r\n            restrictionExplanations: {\r\n                maxTimeSlot: (value) => `Max time slot length: ${value}`,\r\n                minimumSeparation: (value) => `Slots must be at least ${value} apart!`,\r\n                fullCalendar: 'For this calendar, every day must be completely full of schedules.',\r\n                monoSchedule: 'This calendar may only have one time slot per day',\r\n                nullEnds: 'Items in this calendar do not have end times. Scheduled events begin at the start time and end when they are finished.',\r\n                scheduleCount: (options) => {\r\n                    let pluralizedSlot = 'slot' + (options.count === 1 ? '' : 's');\r\n\r\n                    if (options.exact) {\r\n                        return `This calendar must have exactly ${options.count} ${pluralizedSlot} per day`;\r\n                    } else {\r\n                        return `This calendar may only have a maximum of ${options.count} ${pluralizedSlot} per day`;\r\n                    }\r\n                }\r\n            },\r\n            scheduleCountOptions: {\r\n                count: null,\r\n                exact: false\r\n            }\r\n        };\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { ConflictingOptionsService } from './ConflictingOptionsService';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.conflictingOptions', [])\r\n    .service(ConflictingOptionsService.$name, ConflictingOptionsService)\r\n    .name;\r\n","import * as angular from 'angular';\r\nimport { IWeeklySchedulerOptions } from '../weekly-scheduler-config/IWeeklySchedulerOptions';\r\n\r\n/** @internal */\r\nexport class ConflictingOptionsService {\r\n    static $name = 'brWeeklySchedulerConflictingOptionsService';\r\n\r\n    public getConflictingOptions(options: IWeeklySchedulerOptions<any>) {\r\n        if (options.nullEnds && options.scheduleCountOptions && options.scheduleCountOptions.count > 1) {\r\n            return `A nullEnds calendar has a maximum scheduleCount of 1`;\r\n        }\r\n\r\n        if (options.fullCalendar && options.fillEmptyWithDefault) {\r\n            return `Options 'fullCalendar' & 'fillEmptyWithDefault' are mutually exclusive.`;\r\n        }\r\n\r\n        if (options.fillEmptyWithDefault && !angular.isDefined(options.defaultValue)) {\r\n            return `If using option 'fillEmptyWithDefault', you must also provide 'defaultValue.'`;\r\n        }\r\n\r\n        return '';\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { DragService } from './DragService';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.drag', [])\r\n    .service(DragService.$name, DragService)\r\n    .name;\r\n","import { EndAdjusterService } from '../end-adjuster/EndAdjusterService';\r\nimport { IWeeklySchedulerConfig } from '../weekly-scheduler-config/IWeeklySchedulerConfig';\r\nimport { WeeklySchedulerRange } from '../weekly-scheduler-range/WeeklySchedulerRange';\r\nimport { WeeklySchedulerRangeFactory } from '../weekly-scheduler-range/WeeklySchedulerRangeFactory';\r\n\r\n/** @internal */\r\nexport class DragService {\r\n    static $name = 'brWeeklySchedulerDragService';\r\n\r\n    static $inject = [\r\n        'brWeeklySchedulerEndAdjusterService',\r\n        'brWeeklySchedulerNullEndWidth',\r\n        'brWeeklySchedulerRangeFactory'\r\n    ];\r\n\r\n    private constructor(\r\n        private endAdjusterService: EndAdjusterService,\r\n        private nullEndWidth: number,\r\n        private rangeFactory: WeeklySchedulerRangeFactory\r\n    ) {\r\n    }\r\n\r\n    public getDragRangeFromSchedule(config: IWeeklySchedulerConfig<any>, schedule: WeeklySchedulerRange<any>) {\r\n        return this.rangeFactory.createRange(config, {\r\n            day: schedule.day,\r\n            start: schedule.start,\r\n            end: config.nullEnds ?\r\n                this.endAdjusterService.adjustEndForView(config, schedule.start + this.nullEndWidth) :\r\n                this.endAdjusterService.adjustEndForView(config, schedule.end),\r\n            value: schedule.value\r\n        });\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { ElementOffsetService } from './ElementOffsetService';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.elementOffset', [])\r\n    .service(ElementOffsetService.$name, ElementOffsetService)\r\n    .name;\r\n","/**\r\n * This helps reduce code duplication\r\n * This is used as a substitute for jQuery to keep dependencies minimal\r\n */\r\n\r\n/** @internal */\r\nexport class ElementOffsetService {\r\n    static $name = 'brWeeklySchedulerElementOffsetService';\r\n\r\n    public left($element: angular.IAugmentedJQuery) {\r\n        return $element[0].getBoundingClientRect().left;\r\n    }\r\n\r\n    public right($element: angular.IAugmentedJQuery) {\r\n        return $element[0].getBoundingClientRect().right;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { EndAdjusterService } from './EndAdjusterService';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.endAdjuster', [])\r\n    .service(EndAdjusterService.$name, EndAdjusterService)\r\n    .name;\r\n","import { IWeeklySchedulerConfig } from '../weekly-scheduler-config/IWeeklySchedulerConfig';\r\n\r\n/** @internal */\r\nexport class EndAdjusterService {\r\n    static $name = 'brWeeklySchedulerEndAdjusterService';\r\n\r\n    public adjustEndForModel(config: IWeeklySchedulerConfig<any>, end: number) {\r\n        if (end === config.maxValue) {\r\n            return 0;\r\n        }\r\n\r\n        return end;\r\n    }\r\n\r\n    public adjustEndForView(config: IWeeklySchedulerConfig<any>, end: number) {\r\n        if (end === 0) {\r\n            return config.maxValue;\r\n        }\r\n\r\n        return end;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { FillEmptyWithDefaultService } from './FillEmptyWithDefaultService';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.fillEmptyWithDefault', [])\r\n    .service(FillEmptyWithDefaultService.$name, FillEmptyWithDefaultService)\r\n    .name;\r\n","import { EndAdjusterService } from '../end-adjuster/EndAdjusterService';\r\nimport { IWeeklySchedulerConfig } from '../weekly-scheduler-config/IWeeklySchedulerConfig';\r\nimport { WeeklySchedulerItem } from '../weekly-scheduler-item/WeeklySchedulerItem';\r\nimport { WeeklySchedulerRange } from '../weekly-scheduler-range/WeeklySchedulerRange';\r\nimport { WeeklySchedulerRangeFactory } from '../weekly-scheduler-range/WeeklySchedulerRangeFactory';\r\n\r\n/** When using the 'fillEmptyWithDefault' option, this service will be used to construct the correct calendar for server submission */\r\n/** @internal */\r\nexport class FillEmptyWithDefaultService {\r\n    static $name = 'brWeeklySchedulerFillEmptyWithDefaultService';\r\n\r\n    static $inject = [\r\n        'brWeeklySchedulerEndAdjusterService',\r\n        'brWeeklySchedulerRangeFactory'\r\n    ];\r\n\r\n    private constructor(\r\n        private endAdjusterService: EndAdjusterService,\r\n        private rangeFactory: WeeklySchedulerRangeFactory\r\n    ) {\r\n    }\r\n\r\n    fill(item: WeeklySchedulerItem<any>, config: IWeeklySchedulerConfig<any>): WeeklySchedulerRange<any>[] {\r\n        let schedules = item.schedules;\r\n\r\n        if (!schedules.length) {\r\n            return [this.getEmptySchedule(item, config)];\r\n        }\r\n\r\n        return this.getFilledSchedules(schedules, config);\r\n    }\r\n\r\n    private getEmptySchedule(item: WeeklySchedulerItem<any>, config: IWeeklySchedulerConfig<any>) {\r\n        return this.rangeFactory.createRange(config, {\r\n            day: item.day,\r\n            start: 0,\r\n            end: this.endAdjusterService.adjustEndForModel(config, config.maxValue),\r\n            value: config.defaultValue\r\n        });\r\n    }\r\n\r\n    private getEndSchedule(lastSchedule: WeeklySchedulerRange<any>, config: IWeeklySchedulerConfig<any>) {\r\n        return this.rangeFactory.createRange(config, {\r\n            day: lastSchedule.day,\r\n            start: lastSchedule.end,\r\n            end: this.endAdjusterService.adjustEndForModel(config, config.maxValue),\r\n            value: config.defaultValue\r\n        })\r\n    }\r\n\r\n    private getStartSchedule(firstSchedule: WeeklySchedulerRange<any>, config: IWeeklySchedulerConfig<any>) {\r\n        return this.rangeFactory.createRange(config, {\r\n            day: firstSchedule.day,\r\n            start: 0,\r\n            end: firstSchedule.start,\r\n            value: config.defaultValue\r\n        });\r\n    }\r\n\r\n    private getFilledSchedulesForSingleSchedule(schedule: WeeklySchedulerRange<any>, config: IWeeklySchedulerConfig<any>) {\r\n        if (this.shouldFillNullEnd(schedule, config)) {\r\n            schedule.end = this.getNullEndValue(schedule, config);\r\n        }\r\n\r\n        let schedules = [schedule];\r\n\r\n        if (!this.scheduleTouchesStart(schedule, config)) {\r\n            schedules.push(this.getStartSchedule(schedule, config));\r\n        }\r\n\r\n        if (!this.scheduleTouchesEnd(schedule, config)) {\r\n            schedules.push(this.getEndSchedule(schedule, config));\r\n        }\r\n\r\n        return this.getSortedSchedules(schedules);\r\n    }\r\n\r\n    private getFilledSchedules(schedules: WeeklySchedulerRange<any>[], config: IWeeklySchedulerConfig<any>) {\r\n        schedules = this.getSortedSchedules(schedules);\r\n\r\n        if (schedules.length === 1) {\r\n            return this.getFilledSchedulesForSingleSchedule(schedules[0], config);\r\n        }\r\n\r\n        let len = schedules.length - 1;\r\n        \r\n        // 2 at a time\r\n        for (let i = 0; i < len; i++) {\r\n            let currentSchedule = schedules[i];\r\n            let nextSchedule = schedules[i + 1];\r\n\r\n            let isFirstLoop = i == 0;\r\n\r\n            if (isFirstLoop && !this.scheduleTouchesStart(currentSchedule, config)) {\r\n                let startSchedule = this.getStartSchedule(currentSchedule, config);\r\n\r\n                schedules.push(startSchedule);\r\n            }\r\n\r\n            if (!this.schedulesTouch(currentSchedule, nextSchedule)) {\r\n                let newSchedule = this.getNewSchedule(currentSchedule, nextSchedule, config);\r\n\r\n                schedules.push(newSchedule);\r\n            }\r\n\r\n            let isLastLoop = i == len - 1;\r\n\r\n            if (isLastLoop && !this.scheduleTouchesEnd(nextSchedule, config)) {\r\n                let endSchedule = this.getEndSchedule(nextSchedule, config);\r\n\r\n                schedules.push(endSchedule);\r\n                break;\r\n            }\r\n        }\r\n\r\n        return this.getSortedSchedules(schedules);\r\n    }\r\n\r\n    private getNewSchedule(currentSchedule: WeeklySchedulerRange<any>, nextSchedule: WeeklySchedulerRange<any>, config: IWeeklySchedulerConfig<any>) {\r\n        return this.rangeFactory.createRange(config, {\r\n            day: currentSchedule.day,\r\n            start: currentSchedule.end,\r\n            end: nextSchedule.start,\r\n            value: config.defaultValue\r\n        });\r\n    }\r\n\r\n    private getNullEndValue(schedule: WeeklySchedulerRange<any>, config: IWeeklySchedulerConfig<any>) {\r\n        return schedule.start + config.fillNullEnds;\r\n    }\r\n\r\n    private getSortedSchedules(schedules: WeeklySchedulerRange<any>[]) {\r\n        return schedules.sort((a, b) => a.start - b.start);\r\n    }\r\n\r\n    private schedulesTouch(earlierSchedule: WeeklySchedulerRange<any>, laterSchedule: WeeklySchedulerRange<any>) {\r\n        return earlierSchedule.end === laterSchedule.start;\r\n    }\r\n\r\n    private scheduleTouchesStart(schedule: WeeklySchedulerRange<any>, config: IWeeklySchedulerConfig<any>) {\r\n        return schedule.start === 0;\r\n    }\r\n    \r\n    private scheduleTouchesEnd(schedule: WeeklySchedulerRange<any>, config: IWeeklySchedulerConfig<any>) {\r\n        return schedule.end === this.endAdjusterService.adjustEndForModel(config, config.maxValue);\r\n    }\r\n\r\n    private shouldFillNullEnd(schedule: WeeklySchedulerRange<any>, config: IWeeklySchedulerConfig<any>) {\r\n        return schedule.end === null && config.nullEnds && config.fillNullEnds;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { FullCalendarDirective } from './FullCalendarDirective';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.fullCalendar', [])\r\n    .directive(FullCalendarDirective.$name, FullCalendarDirective.Factory())\r\n    .name;\r\n","import * as angular from 'angular';\r\nimport { FullCalendarValidatorService } from '../schedule-validator/FullCalendarValidatorService';\r\nimport { WeeklySchedulerItem } from '../weekly-scheduler-item/WeeklySchedulerItem';\r\n\r\n/** @internal */\r\nexport class FullCalendarDirective implements angular.IDirective {\r\n    static $name = 'brFullCalendar';\r\n\r\n    constructor(\r\n        private validator: FullCalendarValidatorService\r\n    ) {\r\n    }\r\n\r\n    link = (scope: angular.IScope, element: angular.IAugmentedJQuery, attrs: angular.IAttributes, ngModelCtrl: angular.INgModelController) => {\r\n        if (attrs.brFullCalendar) {\r\n            ngModelCtrl.$validators[this.validator.error] = (modelValue: WeeklySchedulerItem<any>) => {\r\n                return this.validator.validate(modelValue.schedules, modelValue.config);\r\n            };\r\n        }\r\n    }\r\n\r\n    require = 'ngModel';\r\n\r\n    static Factory() {\r\n        let directive = (validator) => {\r\n            return new FullCalendarDirective(validator);\r\n        };\r\n\r\n        directive.$inject = ['brWeeklySchedulerFullCalendarValidatorService'];\r\n\r\n        return directive;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { GhostSlotComponent, GhostSlotController } from './ghost-slot';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.ghostSlot', [])\r\n    .component(GhostSlotComponent.$name, new GhostSlotComponent())\r\n    .controller(GhostSlotController.$name, GhostSlotController)\r\n    .name;\r\n","import { MultiSliderController } from '../multislider/multislider';\r\n\r\n/** @internal */\r\nexport class GhostSlotController implements angular.IComponentController {\r\n    static $name = 'brGhostSlotController';\r\n    static $controllerAs = 'ghostSlotCtrl';\r\n\r\n    static $inject = [\r\n        '$element'\r\n    ];\r\n\r\n    constructor(\r\n        private $element: angular.IAugmentedJQuery\r\n    ) {\r\n    }\r\n\r\n    private multiSliderCtrl: MultiSliderController;\r\n}\r\n\r\n/** @internal */\r\nexport class GhostSlotComponent implements angular.IComponentOptions {\r\n    static $name = 'brGhostSlot';\r\n\r\n    controller = GhostSlotController.$name;\r\n    controllerAs = GhostSlotController.$controllerAs;\r\n\r\n    require = {\r\n        multiSliderCtrl: '^brMultiSlider'\r\n    };\r\n\r\n    template = `\r\n        <ng-transclude class=\"fullWidth\"></ng-transclude>\r\n    `;\r\n\r\n    transclude = true;\r\n}\r\n","import * as angular from 'angular';\r\nimport { GroupService } from './GroupService';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.groupBy', [])\r\n    .service(GroupService.$name, GroupService)\r\n    .name;\r\n","import { IWeeklySchedulerRange } from '../weekly-scheduler-range/IWeeklySchedulerRange';\r\n\r\n/**\r\n * We should be able to convert the schedules beforehand, pass just the schedules in and have this package build the items\r\n * This helps reduce code duplication in clients.\r\n * This is used as a substitute for lodash.groupBy to keep the footprint small \r\n */\r\n\r\n/** @internal */\r\nexport class GroupService {\r\n    static $name = 'brWeeklySchedulerGroupService';\r\n\r\n    groupSchedules(schedules: IWeeklySchedulerRange<any>[]): { [key: number]: IWeeklySchedulerRange<any>[] } {\r\n        let seed: { [key: number]: IWeeklySchedulerRange<any>[] } = {};\r\n\r\n        let result = schedules.reduce((reducer, currentSchedule, index, array) => {\r\n            let key = currentSchedule.day;\r\n\r\n            if (!reducer[key]) {\r\n                reducer[key] = [];\r\n            }\r\n\r\n            reducer[key].push(currentSchedule);\r\n\r\n            return reducer;\r\n        }, seed);\r\n\r\n        return result;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { HandleDirective } from './HandleDirective';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.handle', [])\r\n    .directive(HandleDirective.$name, HandleDirective.Factory())\r\n    .name;\r\n","import * as angular from 'angular';\r\nimport { MouseTrackerService } from '../mouse-tracker/MouseTrackerService';\r\nimport { TouchService } from '../touch/TouchService';\r\n\r\n/** @internal */\r\nexport class HandleDirective implements angular.IDirective {\r\n  static $name = 'brHandle';\r\n  restrict = 'A';\r\n\r\n  scope = {\r\n    ondrag: '&',\r\n    ondragstop: '&',\r\n    ondragstart: '&',\r\n    immediate: '<'\r\n  };\r\n\r\n  link = (scope, element: angular.IAugmentedJQuery) => {\r\n    var $document = this.$document;\r\n    var mouseTrackerService = this.mouseTrackerService;\r\n    var touchService = this.touchService;\r\n    var x = 0;\r\n\r\n    let mousedownEvent: string = 'mousedown touchstart';\r\n    let mousemoveEvent: string = 'mousemove touchmove';\r\n    let mouseupEvent: string = 'mouseup touchend';\r\n\r\n    element.on(mousedownEvent, mousedown);\r\n\r\n    function mousedown(event) {\r\n      x = getPageX(event);\r\n\r\n      // Prevent default dragging of selected content\r\n      event.preventDefault();\r\n\r\n      // Prevent multiple handlers from being fired if they are nested (only the one you directly interacted with should fire)\r\n      event.stopPropagation();\r\n\r\n      startDrag();\r\n    }\r\n\r\n    function fakeMousedown() {\r\n      x = mouseTrackerService.getMousePosition().x;\r\n\r\n      startDrag();\r\n    }\r\n\r\n    function getPageX(event) {\r\n      return event.pageX || touchService.getPageX(event);\r\n    }\r\n\r\n    function mousemove(event) {\r\n      let pageX = getPageX(event);\r\n      var delta = pageX - x;\r\n\r\n      if (angular.isFunction(scope.ondrag)) {\r\n        scope.$apply(scope.ondrag({ delta: delta }));\r\n      }\r\n    }\r\n\r\n    function mouseup() {\r\n      $document.unbind(mousemoveEvent, mousemove);\r\n      $document.unbind(mouseupEvent, mouseup);\r\n\r\n      if (angular.isFunction(scope.ondragstop)) {\r\n        scope.$apply(scope.ondragstop());\r\n      }\r\n    }\r\n\r\n    function startDrag() {\r\n      $document.on(mousemoveEvent, mousemove);\r\n      $document.on(mouseupEvent, mouseup);\r\n\r\n      if (angular.isFunction(scope.ondragstart)) {\r\n        scope.$applyAsync(scope.ondragstart());\r\n      }\r\n    }\r\n\r\n    if (scope.immediate) {\r\n      fakeMousedown();\r\n    }\r\n  }\r\n\r\n  constructor(\r\n    private $document: angular.IDocumentService,\r\n    private mouseTrackerService: MouseTrackerService,\r\n    private touchService: TouchService\r\n  ) {\r\n  }\r\n\r\n  static Factory() {\r\n    let directive = ($document, mouseTrackerService, touchService) => new HandleDirective($document, mouseTrackerService, touchService);\r\n\r\n    directive.$inject = ['$document', 'brWeeklySchedulerMouseTrackerService', 'brWeeklySchedulerTouchService'];\r\n\r\n    return directive;\r\n  }\r\n}\r\n","import * as angular from 'angular';\r\nimport { HourlyGridDirective } from './HourlyGridDirective';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.hourlyGrid', [])\r\n    .directive(HourlyGridDirective.$name, HourlyGridDirective.Factory())\r\n    .name;\r\n","import * as angular from 'angular';\r\nimport { WeeklySchedulerController } from '../weekly-scheduler/weekly-scheduler';\r\nimport { IWeeklySchedulerConfig } from '../weekly-scheduler-config/IWeeklySchedulerConfig';\r\nimport { TimeConstantsService } from '../time/TimeConstantsService';\r\nimport { WeeklySchedulerEvents } from '../weekly-scheduler-config/WeeklySchedulerEvents';\r\n\r\n/** @internal */\r\nexport class HourlyGridDirective implements angular.IDirective {\r\n    static $name = 'brHourlyGrid';\r\n\r\n    restrict = 'E';\r\n    require = '^brWeeklyScheduler';\r\n\r\n    private GRID_TEMPLATE = angular.element('<div class=\"grid-item\"></div>');\r\n\r\n    private handleClickEvent(child, hourCount, idx, scope) {\r\n        child.bind('click', function () {\r\n            scope.$apply(() => {\r\n                scope.$emit(WeeklySchedulerEvents.CLICK_ON_A_CELL, {\r\n                    nbElements: hourCount,\r\n                    idx: idx\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    private doGrid(scope, element, attrs, config: IWeeklySchedulerConfig<any>) {\r\n        // Calculate hour width distribution\r\n        var tickcount = config.hourCount;\r\n        var gridItemEl = this.GRID_TEMPLATE.clone();\r\n  \r\n        // Clean element\r\n        element.empty();\r\n\r\n        // Stripe it by hour\r\n        element.addClass('striped');\r\n\r\n        for (let i = 0; i < tickcount; i++) {\r\n          var child = gridItemEl.clone();\r\n\r\n          if (angular.isUndefined(attrs.noText)) {\r\n            this.handleClickEvent(child, tickcount, i, scope);\r\n\r\n            let currentHour = i % 12;\r\n            let meridiem = i >= 12 ? 'p' : 'a';\r\n\r\n            child.text(`${currentHour || '12'}${meridiem}`);\r\n          } else {\r\n            let numIntervalsInTick = this.timeConstants.SECONDS_IN_HOUR / config.interval;\r\n            let intervalPercentage = 100 / numIntervalsInTick;\r\n\r\n            for (let j = 0; j < numIntervalsInTick; j++) {\r\n                let grandChild = this.GRID_TEMPLATE.clone();\r\n                grandChild.attr('rel', ((i * numIntervalsInTick) + j) * config.interval);\r\n                grandChild.addClass('interval');\r\n                grandChild.css('width', intervalPercentage + '%');\r\n                child.append(grandChild);\r\n            }\r\n          }\r\n\r\n          element.append(child);\r\n        }\r\n    }\r\n\r\n    link = (scope, element, attrs, schedulerCtrl: WeeklySchedulerController) => {\r\n        if (schedulerCtrl.config) {\r\n            this.doGrid(scope, element, attrs, schedulerCtrl.config);\r\n        }\r\n    }\r\n\r\n    constructor(\r\n        private timeConstants: TimeConstantsService\r\n    ) {\r\n    }\r\n\r\n    static Factory() {\r\n        let directive = (timeConstants) => new HourlyGridDirective(timeConstants);\r\n\r\n        directive.$inject = ['brWeeklySchedulerTimeConstantsService'];\r\n\r\n        return directive;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { LastGhostDayService } from './LastGhostDayService';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.lastGhostDay', [])\r\n    .service(LastGhostDayService.$name, LastGhostDayService)\r\n    .name;\r\n","import { WeeklySchedulerItem } from '../weekly-scheduler-item/WeeklySchedulerItem';\r\n\r\n/** @internal */\r\nexport class LastGhostDayService {\r\n    static $name = 'brWeeklySchedulerLastGhostDayService';\r\n\r\n    /**\r\n     * When dragging ghosts across multiple days, if the user moves the mouse pointer out of one extreme and back into the last slot that rendered a ghost,\r\n     * We should remove the ghost from that extreme. This will help grab the correct day\r\n     */\r\n    public getLastGhostDay(items: WeeklySchedulerItem<any>[]) {\r\n        let originIndex = this.getOriginIndex(items);\r\n        let renderedGhostIndices = this.getRenderedGhostIndices(items);\r\n\r\n        // determine if the other $renderGhost items are above or below the $isGhostOrigin item\r\n        let above = renderedGhostIndices.every(i => i <= originIndex);\r\n\r\n        // take first item for above or last item for below\r\n        let lastGhostDayIndex = above ? 0 : renderedGhostIndices.length - 1;\r\n\r\n        return renderedGhostIndices[lastGhostDayIndex];\r\n    }\r\n\r\n    /** Get the index of the $isGhostOrigin item */\r\n    private getOriginIndex(items: WeeklySchedulerItem<any>[]) {\r\n        let originIndex;\r\n        let len = items.length;\r\n\r\n        for (let i = 0; i < len; i++) {\r\n            let currentItem = items[i];\r\n\r\n            if (currentItem.$isGhostOrigin) {\r\n                originIndex = i;\r\n                break;\r\n            }\r\n        }\r\n\r\n        return originIndex;\r\n    }\r\n\r\n    /** Get all of the item indices that currently have ghosts rendered */\r\n    private getRenderedGhostIndices(items: WeeklySchedulerItem<any>[]) {\r\n        let renderedGhostIndices = [];\r\n        let len = items.length;\r\n\r\n        for (let i = 0; i < len; i++) {\r\n            let currentItem = items[i];\r\n\r\n            if (currentItem.$renderGhost) {\r\n                renderedGhostIndices.push(i);\r\n            }\r\n        }\r\n\r\n        return renderedGhostIndices;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { MaxTimeSlotDirective } from './MaxTimeSlotDirective';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.maxTimeSlot', [])\r\n    .directive(MaxTimeSlotDirective.$name, MaxTimeSlotDirective.Factory())\r\n    .name;\r\n","import * as angular from 'angular';\r\nimport { MaxTimeSlotValidatorService } from '../schedule-validator/MaxTimeSlotValidatorService';\r\nimport { WeeklySchedulerItem } from '../weekly-scheduler-item/WeeklySchedulerItem';\r\n\r\n/** @internal */\r\nexport class MaxTimeSlotDirective implements angular.IDirective {\r\n    static $name = 'brMaxTimeSlot';\r\n\r\n    constructor(\r\n        private validator: MaxTimeSlotValidatorService\r\n    ) {\r\n    }\r\n\r\n    link = (scope: angular.IScope, element: angular.IAugmentedJQuery, attrs: angular.IAttributes, ngModelCtrl: angular.INgModelController) => {\r\n        if (attrs.brMaxTimeSlot) {\r\n            ngModelCtrl.$validators[this.validator.error] = (modelValue: WeeklySchedulerItem<any>) => {\r\n                return this.validator.validate(modelValue.schedules, modelValue.config);\r\n            };\r\n        }\r\n    }\r\n\r\n    require = 'ngModel';\r\n\r\n    static Factory() {\r\n        let directive = (validator) => {\r\n            return new MaxTimeSlotDirective(validator);\r\n        };\r\n\r\n        directive.$inject = ['brWeeklySchedulerMaxTimeSlotValidatorService'];\r\n\r\n        return directive;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { MinimumSeparationDirective } from './MinimumSeparationDirective';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.minimumSeparation', [])\r\n    .directive(MinimumSeparationDirective.$name, MinimumSeparationDirective.Factory())\r\n    .name;\r\n","import * as angular from 'angular';\r\nimport { MinimumSeparationValidatorService } from '../schedule-validator/MinimumSeparationValidatorService';\r\nimport { WeeklySchedulerItem } from '../weekly-scheduler-item/WeeklySchedulerItem';\r\n\r\n/** @internal */\r\nexport class MinimumSeparationDirective implements angular.IDirective {\r\n    static $name = 'brMinimumSeparation';\r\n\r\n    constructor(\r\n        private validator: MinimumSeparationValidatorService\r\n    ) {\r\n    }\r\n\r\n    link = (scope: angular.IScope, element: angular.IAugmentedJQuery, attrs: angular.IAttributes, ngModelCtrl: angular.INgModelController) => {\r\n        if (attrs.brMinimumSeparation) {\r\n            ngModelCtrl.$validators[this.validator.error] = (modelValue: WeeklySchedulerItem<any>) => {\r\n                return this.validator.validate(modelValue.schedules, modelValue.config);\r\n            };\r\n        }\r\n    }\r\n\r\n    require = 'ngModel';\r\n\r\n    static Factory() {\r\n        let directive = (validator) => {\r\n            return new MinimumSeparationDirective(validator);\r\n        };\r\n\r\n        directive.$inject = ['brWeeklySchedulerMinimumSeparationValidatorService'];\r\n\r\n        return directive;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { MissingDaysService } from './MissingDaysService';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.missingDays', [])\r\n    .service(MissingDaysService.$name, MissingDaysService)\r\n    .name;\r\n","import * as angular from 'angular';\r\nimport { DayMap } from '../weekly-scheduler-config/DayMap';\r\nimport { IWeeklySchedulerConfig } from '../weekly-scheduler-config/IWeeklySchedulerConfig';\r\nimport { WeeklySchedulerItem } from '../weekly-scheduler-item/WeeklySchedulerItem';\r\nimport { WeeklySchedulerItemFactory } from '../weekly-scheduler-item/WeeklySchedulerItemFactory';\r\n\r\n/** @internal */\r\nexport class MissingDaysService {\r\n    static $name = 'brWeeklySchedulerMissingDaysService';\r\n\r\n    static $inject = [\r\n        'brWeeklySchedulerDayMap',\r\n        'brWeeklySchedulerItemFactory'\r\n    ];\r\n\r\n    private constructor(\r\n        private dayMap: DayMap,\r\n        private itemFactory: WeeklySchedulerItemFactory\r\n    ) {\r\n    }\r\n\r\n    /**\r\n     * The scheduler should always show all days, even if it was not passed any schedules for that day\r\n     */\r\n    public fillItems(config: IWeeklySchedulerConfig<any>, items: WeeklySchedulerItem<any>[]) {\r\n        let result: WeeklySchedulerItem<any>[] = [];\r\n\r\n        angular.forEach(this.dayMap, (day: string, stringKey: string) => {\r\n          let key = parseInt(stringKey, 10);\r\n          let filteredItems = items.filter(item => item.day === key);\r\n          let item: WeeklySchedulerItem<any> = filteredItems.length ? filteredItems[0] : null;\r\n    \r\n          if (!item) {\r\n            result.push(this.itemFactory.createItem(config, key, []));\r\n          } else {\r\n            // If the item DID exist just set the label\r\n            item.label = day;\r\n    \r\n            result.push(item);\r\n          }\r\n        });\r\n    \r\n        return angular.copy(result).sort((a, b) => a.day - b.day);\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { MonoScheduleDirective } from './MonoScheduleDirective';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.monoSchedule', [])\r\n    .directive(MonoScheduleDirective.$name, MonoScheduleDirective.Factory())\r\n    .name;\r\n","import * as angular from 'angular';\r\nimport { MonoScheduleValidatorService } from '../schedule-validator/MonoScheduleValidatorService';\r\nimport { WeeklySchedulerItem } from '../weekly-scheduler-item/WeeklySchedulerItem';\r\n\r\n/** @internal */\r\nexport class MonoScheduleDirective implements angular.IDirective {\r\n    static $name = 'brMonoSchedule';\r\n\r\n    constructor(\r\n        private validator: MonoScheduleValidatorService\r\n    ) {\r\n    }\r\n\r\n    link = (scope: angular.IScope, element: angular.IAugmentedJQuery, attrs: angular.IAttributes, ngModelCtrl: angular.INgModelController) => {\r\n        if (attrs.brMonoSchedule) {\r\n            ngModelCtrl.$validators[this.validator.error] = (modelValue: WeeklySchedulerItem<any>) => {\r\n                return this.validator.validate(modelValue.schedules, modelValue.config);\r\n            };\r\n        }\r\n    }\r\n\r\n    require = 'ngModel';\r\n\r\n    static Factory() {\r\n        let directive = (validator) => {\r\n            return new MonoScheduleDirective(validator);\r\n        };\r\n\r\n        directive.$inject = ['brWeeklySchedulerMonoScheduleValidatorService'];\r\n\r\n        return directive;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { MouseTrackerService } from './MouseTrackerService';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.mouseTracker', [])\r\n    .service(MouseTrackerService.$name, MouseTrackerService)\r\n    .run([MouseTrackerService.$name, (mouseTrackerService: MouseTrackerService) => {\r\n        mouseTrackerService.initialize();\r\n    }])\r\n    .name;\r\n","import { IPoint } from '../point/IPoint';\r\n\r\n/** @internal */\r\nexport class MouseTrackerService {\r\n    static $name = 'brWeeklySchedulerMouseTrackerService';\r\n\r\n    static $inject = ['$document'];\r\n\r\n    private constructor(\r\n        private $document: angular.IDocumentService\r\n    ) {\r\n    }\r\n\r\n    private mousePosition: IPoint;\r\n\r\n    public initialize() {\r\n        const eventName = 'mousemove touchmove';\r\n\r\n        let event = this.setMousePosition.bind(this);\r\n\r\n        this.$document.unbind(eventName, event);\r\n        this.$document.on(eventName, event);\r\n    }\r\n\r\n    public getMousePosition() {\r\n        return this.mousePosition;\r\n    }\r\n\r\n    private setMousePosition(event) {\r\n        this.mousePosition = { x: event.pageX, y: event.pageY };\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { MultiSliderComponent, MultiSliderController } from './multislider';\r\n\r\nexport default\r\n    angular.module('rr.weeklyScheduler.multiSlider', [])\r\n    .component(MultiSliderComponent.$name, new MultiSliderComponent())\r\n    .controller(MultiSliderController.$name, MultiSliderController)\r\n    .name;\r\n","import * as angular from 'angular';\r\nimport { EndAdjusterService } from '../end-adjuster/EndAdjusterService';\r\nimport { IWeeklySchedulerConfig } from '../weekly-scheduler-config/IWeeklySchedulerConfig';\r\nimport { IWeeklySchedulerRange } from '../weekly-scheduler-range/IWeeklySchedulerRange';\r\nimport { WeeklySchedulerItem } from '../weekly-scheduler-item/WeeklySchedulerItem';\r\nimport { WeeklySchedulerRange } from '../weekly-scheduler-range/WeeklySchedulerRange';\r\nimport { WeeklySchedulerRangeFactory } from '../weekly-scheduler-range/WeeklySchedulerRangeFactory';\r\nimport { ElementOffsetService } from '../element-offset/ElementOffsetService';\r\nimport { MouseTrackerService } from '../mouse-tracker/MouseTrackerService';\r\nimport { ValueNormalizationService } from '../value-normalization/ValueNormalizationService';\r\nimport { WeeklySchedulerEvents } from '../weekly-scheduler-config/WeeklySchedulerEvents';\r\n\r\n/** @internal */\r\nexport class MultiSliderController implements angular.IComponentController {\r\n  static $name = 'brMultiSliderController';\r\n  static $controllerAs = 'multiSliderCtrl';\r\n\r\n  static $inject = [\r\n    '$element',\r\n    '$q',\r\n    '$scope',\r\n    'brWeeklySchedulerElementOffsetService',\r\n    'brWeeklySchedulerEndAdjusterService',\r\n    'brWeeklySchedulerMouseTrackerService',\r\n    'brWeeklySchedulerNullEndWidth',\r\n    'brWeeklySchedulerRangeFactory',\r\n    'brWeeklySchedulerValueNormalizationService'\r\n  ];\r\n\r\n  constructor(\r\n    private $element: angular.IAugmentedJQuery,\r\n    private $q: angular.IQService,\r\n    private $scope: angular.IScope,\r\n    private elementOffsetService: ElementOffsetService,\r\n    private endAdjusterService: EndAdjusterService,\r\n    private mouseTrackerService: MouseTrackerService,\r\n    private nullEndWidth: number,\r\n    private rangeFactory: WeeklySchedulerRangeFactory,\r\n    private valueNormalizationService: ValueNormalizationService\r\n  ) {\r\n    this.element = this.$element[0];\r\n  }\r\n\r\n  private dragSchedule: WeeklySchedulerRange<any>;\r\n  private pendingSchedule: WeeklySchedulerRange<any>;\r\n\r\n  private startingGhostValues: { left: number, right: number };\r\n  private readonly ghostValues: { left: number, right: number };\r\n  private setGhostValues: (options: { ghostValues: { left: number, right: number } }) => void;\r\n\r\n  private ngModelCtrl: angular.INgModelController;\r\n  \r\n  public element: Element;\r\n  public config: IWeeklySchedulerConfig<any>;\r\n\r\n  private item: WeeklySchedulerItem<any>;\r\n\r\n  public $postLink() {\r\n    this.$element.on('mouseenter', () => {\r\n      this.onMouseEnter();\r\n    });\r\n\r\n    this.$element.on('mouseleave', () => {\r\n      this.onMouseLeave();\r\n    });\r\n\r\n    this.$element.on('mouseup', () => {\r\n       this.onMouseUp();\r\n    });\r\n\r\n    this.$scope.$on(WeeklySchedulerEvents.COMMIT_GHOST, (event: angular.IAngularEvent, ghostSchedule: WeeklySchedulerRange<any>) => {\r\n      if (this.item.$renderGhost) {\r\n        this.commitGhost(ghostSchedule);\r\n      }\r\n    });\r\n\r\n    this.$scope.$on(WeeklySchedulerEvents.REMOVE_GHOST, (event: angular.IAngularEvent, day: number) => {\r\n      if (!this.item.$isGhostOrigin && this.item.day === day) {\r\n        this.removeGhost();\r\n      }\r\n    });\r\n\r\n    this.$scope.$on(WeeklySchedulerEvents.REMOVE_ALL_GHOSTS, () => {\r\n      this.removeGhost();\r\n    });\r\n  }\r\n\r\n  private onMouseEnter() {\r\n    // If the cursor is moving BACK into an item that ALREADY has a ghost rendered, we'll want to remove the ghost from the item that was left\r\n    if (this.item.$renderGhost) {\r\n      this.$scope.$emit(WeeklySchedulerEvents.REMOVE_LAST_GHOST);\r\n    }\r\n\r\n    if (this.dragSchedule) {\r\n      this.addDragSchedule();\r\n    }\r\n\r\n    if (this.ghostValues && !this.item.$renderGhost) {\r\n      this.createGhost();\r\n    }\r\n  }\r\n\r\n  private onMouseLeave() {\r\n    if (this.dragSchedule) {\r\n      this.removeDragSchedule();\r\n    }\r\n  }\r\n\r\n  private onMouseUp() {\r\n    if (this.pendingSchedule) {\r\n      this.commitDragSchedule();\r\n    }\r\n  }\r\n\r\n  private addDragSchedule() {\r\n    this.dragSchedule.day = this.item.day;\r\n    this.pendingSchedule = this.item.addSchedule(this.dragSchedule);\r\n    this.pendingSchedule.$isActive = true;\r\n  }\r\n\r\n  private removeDragSchedule() {\r\n    this.item.removeSchedule(this.dragSchedule);\r\n    this.ngModelCtrl.$setDirty();\r\n    this.pendingSchedule = null;\r\n  }\r\n\r\n  private commitDragSchedule() {\r\n    this.pendingSchedule.$isActive = false;\r\n\r\n    this.ngModelCtrl.$setDirty();\r\n    this.item.mergeSchedule(this.pendingSchedule);\r\n    this.pendingSchedule = null;\r\n  }\r\n\r\n  private getScheduleForAdd(start: number, end: number) {\r\n    start = this.valueNormalizationService.normalizeValue(start, 0, end);\r\n    end = this.valueNormalizationService.normalizeValue(end, start, this.config.maxValue);\r\n\r\n    if (this.config.nullEnds) {\r\n      end = null;\r\n    }\r\n\r\n    let schedule = {\r\n      day: this.item.day,\r\n      start: start,\r\n      end: end,\r\n      value: this.config.defaultValue\r\n    };\r\n\r\n    return schedule;\r\n  }\r\n\r\n  private openEditorForAdd(schedule: IWeeklySchedulerRange<any>): angular.IPromise<IWeeklySchedulerRange<any>> {\r\n    if (this.item.canEdit()) {\r\n      return this.config.editSlot(schedule);\r\n    } else {\r\n      return this.$q.when(schedule);\r\n    }\r\n  }\r\n\r\n  /** Expand ghost while dragging in it */\r\n  public adjustGhost() {\r\n    let point = this.mouseTrackerService.getMousePosition();\r\n    let mouseValue: number = this.getValAtMousePosition(point.x);\r\n\r\n    let existingLeftValue: number = this.startingGhostValues.left;\r\n\r\n    let updatedLeftValue: number;\r\n    let updatedRightValue: number;\r\n    \r\n    if (mouseValue < existingLeftValue) { // user is dragging left\r\n      updatedLeftValue = mouseValue;\r\n      updatedRightValue = existingLeftValue;\r\n    } else { // user is dragging right\r\n      updatedLeftValue = existingLeftValue;\r\n      updatedRightValue = mouseValue;\r\n    }\r\n\r\n    let ghostValues = {\r\n      left: this.normalizeGhostValue(updatedLeftValue),\r\n      right: this.normalizeGhostValue(updatedRightValue)\r\n    };\r\n\r\n    this.setGhostValues({ \r\n      ghostValues: ghostValues\r\n    });\r\n  }\r\n  \r\n  /** Move ghost around while not dragging */\r\n  public positionGhost() {\r\n    let point = this.mouseTrackerService.getMousePosition();\r\n    let val = this.getValAtMousePosition(point.x);\r\n\r\n    this.startingGhostValues = {\r\n      left: val,\r\n      right: this.config.nullEnds ? val + this.nullEndWidth : val + this.config.interval\r\n    };\r\n\r\n    this.setGhostValues({\r\n      ghostValues: angular.copy(this.startingGhostValues)\r\n    });\r\n  }\r\n\r\n  public onGhostWrapperMouseDown() {\r\n    if (!this.item.editable) {\r\n      return;\r\n    }\r\n\r\n    this.item.$isGhostOrigin = true;\r\n    this.createGhost();\r\n  }\r\n\r\n  public onGhostWrapperMouseMove() {\r\n    // nullEnds calendars don't need to do anything because the size of the slot doesn't really matter\r\n    if (this.config.nullEnds) {\r\n      this.positionGhost();\r\n      return;\r\n    }\r\n\r\n    if (this.item.$renderGhost) {\r\n      this.adjustGhost();\r\n    }\r\n  }\r\n\r\n  public onGhostWrapperMouseUp() {\r\n    let ghostSchedule = this.getScheduleForAdd(this.ghostValues.left, this.ghostValues.right);\r\n\r\n    this.openEditorForAdd(ghostSchedule).then(editedGhostSchedule => {\r\n      this.$scope.$emit(WeeklySchedulerEvents.GHOST_DRAG_ENDED, editedGhostSchedule);\r\n    }).catch(() => {\r\n      this.$scope.$emit(WeeklySchedulerEvents.CANCEL_GHOST);\r\n    });\r\n  }\r\n\r\n  private createGhost() {\r\n    this.item.$renderGhost = true;\r\n    this.positionGhost();\r\n  }\r\n\r\n  private commitGhost(ghostSchedule: WeeklySchedulerRange<any>) {\r\n    if (this.item.canAddSchedule()) {\r\n      this.item.addScheduleAndMerge(ghostSchedule);\r\n      this.ngModelCtrl.$setDirty();\r\n      this.config.onChange();\r\n    }\r\n\r\n    this.removeGhost();\r\n  }\r\n\r\n  private getMousePosition(pageX: number) {\r\n    let elementOffsetX = this.elementOffsetService.left(this.$element);\r\n    let left = pageX - elementOffsetX;\r\n\r\n    return left;\r\n  }\r\n\r\n  private getValAtMousePosition(pageX: number) {\r\n    return this.pixelToVal(this.getMousePosition(pageX));\r\n  }\r\n\r\n  /**\r\n   * Perform an external action to bring up an editor for a schedule\r\n   */\r\n  private editSchedule(schedule: WeeklySchedulerRange<any>) {\r\n    if (this.item.canEdit()) {\r\n      schedule.$isEditing = true;\r\n\r\n      let originalSchedule = angular.copy(schedule);\r\n\r\n      this.config.editSlot(schedule).then((newSchedule) => {\r\n        let range = this.rangeFactory.createRange(this.config, newSchedule);\r\n\r\n        if (this.shouldDelete(range)) {\r\n          this.item.removeSchedule(schedule);\r\n        } else {\r\n          let premergeSchedule = angular.copy(range);\r\n\r\n          this.item.mergeSchedule(range);\r\n\r\n          // If merging mutated the schedule further, then updateSchedule would have already been called\r\n          // This is so that edits that don't trigger merges still trigger onChange,\r\n          // but edits that do trigger merges don't trigger it twice\r\n          if (angular.equals(premergeSchedule, range)) {\r\n            // The 'schedule' variable has already been updated with the correct values.\r\n            // The range should be applied as an update to the originalSchedule so that onChange is triggered if necessary\r\n            originalSchedule.update(range);\r\n          }\r\n        }\r\n\r\n        this.ngModelCtrl.$setDirty();\r\n      }).catch(() => {\r\n        // do nothing except eat the unhandled rejection error\r\n      }).finally(() => {\r\n        schedule.$isEditing = false;\r\n      });\r\n    }\r\n  }\r\n\r\n  private getSlotLeft(start: number) {\r\n    let underlyingInterval: HTMLElement = this.getUnderlyingInterval(start);\r\n\r\n    return underlyingInterval.offsetLeft + 'px';\r\n  }\r\n\r\n  private getSlotRight(start: number, end: number) {\r\n    // If there is a null end, place the end of the slot two hours away from the beginning.\r\n    if (this.config.nullEnds && end === null) {\r\n      end = start + this.nullEndWidth;\r\n    }\r\n\r\n    // An end of 0 should display allll the way to the right, up to the edge\r\n    end = this.endAdjusterService.adjustEndForView(this.config, end);\r\n\r\n    // We want the right side to go /up to/ the interval it represents, not cover it, so we must substract 1 interval\r\n    let underlyingInterval = this.getUnderlyingInterval(end - this.config.interval);\r\n\r\n    let offsetRight = underlyingInterval.offsetLeft + underlyingInterval.offsetWidth;\r\n\r\n    let result = this.element.clientWidth - offsetRight;\r\n\r\n    return result + 'px';\r\n  }\r\n\r\n  private getUnderlyingInterval(val: number): HTMLElement {\r\n    val = this.normalizeIntervalValue(val);\r\n\r\n    return this.element.parentElement.querySelector(`[rel='${val}']`);\r\n  }\r\n\r\n  private shouldDelete(schedule: IWeeklySchedulerRange<any>) {\r\n    if (schedule.$isDeleting) {\r\n      return true;\r\n    }\r\n\r\n    if (this.config.fillEmptyWithDefault && schedule.value === this.config.defaultValue) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  public pixelToVal(pixel: number) {\r\n    var percent = pixel / this.element.clientWidth;\r\n    return Math.floor(percent * (this.config.intervalCount) + 0.5) * this.config.interval;\r\n  }\r\n\r\n  private normalizeIntervalValue(value: number) {\r\n    // There is no interval to the right of the rightmost interval -- the last interval will not actually render with a \"rel\" value\r\n    let rightmost = this.config.maxValue - this.config.interval;\r\n\r\n    return this.valueNormalizationService.normalizeValue(value, 0, rightmost);\r\n  }\r\n\r\n  private normalizeGhostValue(value: number) {\r\n    return this.valueNormalizationService.normalizeValue(value, 0, this.config.maxValue);\r\n  }\r\n\r\n  private removeGhost() {\r\n    this.item.$isGhostOrigin = false;\r\n    this.item.$renderGhost = false;\r\n    this.setGhostValues(null);\r\n  }\r\n}\r\n\r\n/** @internal */\r\nexport class MultiSliderComponent implements angular.IComponentOptions {\r\n  static $name = 'brMultiSlider';\r\n\r\n  bindings = {\r\n    config: '<',\r\n    dragSchedule: '<',\r\n    ghostValues: '<',\r\n    item: '=ngModel',\r\n    setGhostValues: '&'\r\n  };\r\n\r\n  controller = MultiSliderController.$name;\r\n  controllerAs = MultiSliderController.$controllerAs;\r\n\r\n  require = {\r\n    ngModelCtrl: 'ngModel'\r\n  };\r\n\r\n  template = require('./multislider.html');\r\n}\r\n","module.exports = \"<div class=\\\"ghost-wrapper\\\" br-handle ondragstart=\\\"multiSliderCtrl.onGhostWrapperMouseDown()\\\" ondragstop=\\\"multiSliderCtrl.onGhostWrapperMouseUp()\\\" ondrag=\\\"multiSliderCtrl.onGhostWrapperMouseMove()\\\">\\r\\n    <br-ghost-slot class=\\\"slot\\\"\\r\\n                   ng-if=\\\"multiSliderCtrl.item.canRenderGhost()\\\"\\r\\n                   ng-class=\\\"{\\r\\n                      active: multiSliderCtrl.item.$renderGhost,\\r\\n                      nullEnd: multiSliderCtrl.config.nullEnds\\r\\n                   }\\\"\\r\\n                   ng-style=\\\"{\\r\\n                      left: multiSliderCtrl.getSlotLeft(multiSliderCtrl.ghostValues.left),\\r\\n                      right: multiSliderCtrl.getSlotRight(multiSliderCtrl.ghostValues.left, multiSliderCtrl.ghostValues.right)\\r\\n                   }\\\">\\r\\n        <div class=\\\"slotWrapper\\\">\\r\\n            <div class=\\\"middle fullWidth\\\">\\r\\n                <span ng-if=\\\"!multiSliderCtrl.config.nullEnds\\\">{{ multiSliderCtrl.ghostValues.left | brWeeklySchedulerTimeOfDay }} - {{ multiSliderCtrl.ghostValues.right | brWeeklySchedulerTimeOfDay }}</span>\\r\\n                <span ng-if=\\\"multiSliderCtrl.config.nullEnds\\\">{{ multiSliderCtrl.ghostValues.left | brWeeklySchedulerTimeOfDay }} until</span>\\r\\n            </div>\\r\\n        </div>\\r\\n    </br-ghost-slot>\\r\\n\\r\\n    <br-weekly-slot class=\\\"slot {{ schedule.$class }}\\\"\\r\\n                config=\\\"multiSliderCtrl.config\\\"\\r\\n                get-delta=\\\"multiSliderCtrl.pixelToVal(pixel)\\\"\\r\\n                drag-schedule=\\\"multiSliderCtrl.dragSchedule\\\" \\r\\n                item=\\\"multiSliderCtrl.item\\\"\\r\\n                ng-class=\\\"{\\r\\n                    active: schedule.$isActive,\\r\\n                    disable: !multiSliderCtrl.item.canEditSchedule(schedule),\\r\\n                    nullEnd: schedule.end === null,\\r\\n                    pending: schedule.$isEditing\\r\\n                }\\\"\\r\\n                ng-repeat=\\\"schedule in multiSliderCtrl.item.schedules\\\"\\r\\n                ng-model=\\\"schedule\\\"\\r\\n                ng-style=\\\"{\\r\\n                    left: multiSliderCtrl.getSlotLeft(schedule.start),\\r\\n                    right: multiSliderCtrl.getSlotRight(schedule.start, schedule.end)\\r\\n                }\\\"\\r\\n                edit-schedule=\\\"multiSliderCtrl.editSchedule(schedule)\\\"\\r\\n    ></br-weekly-slot>\\r\\n</div>\";","import * as angular from 'angular';\r\nimport { NullEndDirective } from './NullEndDirective';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.nullEnd', [])\r\n    .directive(NullEndDirective.$name, NullEndDirective.Factory())\r\n    .name;\r\n","import * as angular from 'angular';\r\nimport { NullEndScheduleValidatorService } from '../schedule-validator/NullEndValidatorService';\r\nimport { WeeklySchedulerItem } from '../weekly-scheduler-item/WeeklySchedulerItem';\r\n\r\n/** @internal */\r\nexport class NullEndDirective implements angular.IDirective {\r\n    static $name = 'brNullEnd';\r\n\r\n    constructor(\r\n        private validator: NullEndScheduleValidatorService\r\n    ) {\r\n    }\r\n\r\n    link = (scope: angular.IScope, element: angular.IAugmentedJQuery, attrs: angular.IAttributes, ngModelCtrl: angular.INgModelController) => {\r\n        ngModelCtrl.$validators[this.validator.error] = (modelValue: WeeklySchedulerItem<any>) => {\r\n            return this.validator.validate(modelValue.schedules, modelValue.config);\r\n        };\r\n    }\r\n\r\n    require = 'ngModel';\r\n\r\n    static Factory() {\r\n        let directive = (validator) => {\r\n            return new NullEndDirective(validator);\r\n        };\r\n\r\n        directive.$inject = ['brWeeklySchedulerNullEndValidatorService'];\r\n\r\n        return directive;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { OverlapDirective } from './OverlapDirective';\r\nimport { OverlapService } from './OverlapService';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.overlap', [])\r\n    .directive(OverlapDirective.$name, OverlapDirective.Factory())\r\n    .service(OverlapService.$name, OverlapService)\r\n    .name;\r\n","import * as angular from 'angular';\r\nimport { OverlapValidatorService } from '../schedule-validator/OverlapValidatorService';\r\nimport { WeeklySchedulerItem } from '../weekly-scheduler-item/WeeklySchedulerItem';\r\n\r\n/** @internal */\r\nexport class OverlapDirective implements angular.IDirective {\r\n    static $name = 'brOverlap';\r\n\r\n    constructor(\r\n        private validator: OverlapValidatorService\r\n    ) {\r\n    }\r\n\r\n    link = (scope: angular.IScope, element: angular.IAugmentedJQuery, attrs: angular.IAttributes, ngModelCtrl: angular.INgModelController) => {\r\n        ngModelCtrl.$validators[this.validator.error] = (modelValue: WeeklySchedulerItem<any>) => {\r\n            return this.validator.validate(modelValue.schedules, modelValue.config);\r\n        };\r\n    }\r\n\r\n    require = 'ngModel';\r\n\r\n    static Factory() {\r\n        let directive = (validator) => {\r\n            return new OverlapDirective(validator);\r\n        };\r\n\r\n        directive.$inject = ['brWeeklySchedulerOverlapValidatorService'];\r\n\r\n        return directive;\r\n    }\r\n}\r\n","import { EndAdjusterService } from '../end-adjuster/EndAdjusterService';\r\nimport { IWeeklySchedulerConfig } from '../weekly-scheduler-config/IWeeklySchedulerConfig';\r\nimport { IWeeklySchedulerRange } from '../weekly-scheduler-range/IWeeklySchedulerRange';\r\nimport { OverlapState } from '../weekly-scheduler-config/OverlapStates';\r\n\r\n/** @internal */\r\nexport class OverlapService {\r\n    static $name = 'brWeeklySchedulerOverlapService';\r\n\r\n    static $inject = [\r\n        'brWeeklySchedulerEndAdjusterService'\r\n    ];\r\n\r\n    private constructor(\r\n        private endAdjusterService: EndAdjusterService\r\n    ) {\r\n    }\r\n\r\n    getOverlapState(config: IWeeklySchedulerConfig<any>, current: IWeeklySchedulerRange<any>, other: IWeeklySchedulerRange<any>): OverlapState {\r\n        let currentStart = current.start;\r\n        let currentEnd = this.endAdjusterService.adjustEndForView(config, current.end);\r\n\r\n        let otherStart = other.start;\r\n        let otherEnd = this.endAdjusterService.adjustEndForView(config, other.end);\r\n\r\n        if (otherEnd >= currentEnd && otherStart <= currentStart) {\r\n            return OverlapState.CurrentIsInsideOther;\r\n        }\r\n\r\n        if (currentEnd >= otherEnd && currentStart <= otherStart) {\r\n            return OverlapState.CurrentCoversOther;\r\n        }\r\n\r\n        if (otherEnd > currentStart && otherEnd <= currentEnd) {\r\n            return OverlapState.OtherEndIsInsideCurrent;\r\n        }\r\n\r\n        if (otherStart >= currentStart && otherStart < currentEnd) {\r\n            return OverlapState.OtherStartIsInsideCurrent;\r\n        }\r\n\r\n        if (otherEnd === currentStart && otherEnd <= currentEnd) {\r\n            return OverlapState.OtherEndIsCurrentStart;\r\n        }\r\n\r\n        if (otherStart === currentEnd && otherStart <= currentEnd) {\r\n            return OverlapState.OtherStartIsCurrentEnd;\r\n        }\r\n\r\n        return OverlapState.NoOverlap;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { PurgeDefaultService } from './PurgeDefaultService';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.purgeDefault', [])\r\n    .service(PurgeDefaultService.$name, PurgeDefaultService)\r\n    .name;\r\n","import { IWeeklySchedulerConfig } from '../weekly-scheduler-config/IWeeklySchedulerConfig';\r\nimport { WeeklySchedulerRange } from '../weekly-scheduler-range/WeeklySchedulerRange';\r\n\r\n/** When using the 'fillEmptyWithDefault' option, this service will be used to delete the default schedules for correct display on the calendar */\r\n/** @internal */\r\nexport class PurgeDefaultService {\r\n    static $name = 'brWeeklySchedulerPurgeDefaultService';\r\n\r\n    purge(schedules: WeeklySchedulerRange<any>[], config: IWeeklySchedulerConfig<any>): WeeklySchedulerRange<any>[] {\r\n        let lastIndex = schedules.length - 1;\r\n\r\n        // loop in reverse to avoid messing up indices as we go\r\n        for (let i = lastIndex; i >= 0; i--) {\r\n            if (schedules[i].value === config.defaultValue) {\r\n                schedules.splice(i, 1);\r\n            }\r\n        }\r\n\r\n        return schedules;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { ResizeServiceProvider } from './ResizeService';\r\nimport { IResizeService } from './IResizeService';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.resize', [])\r\n    .provider(ResizeServiceProvider.$name, ResizeServiceProvider)\r\n    .run([ResizeServiceProvider.$name, (resizeService: IResizeService) => resizeService.initialize()])\r\n    .name;\r\n","import * as angular from 'angular';\r\nimport { IResizeServiceProvider } from './IResizeServiceProvider';\r\nimport { WeeklySchedulerEvents } from '../weekly-scheduler-config/WeeklySchedulerEvents';\r\nimport { IResizeService } from './IResizeService';\r\n\r\n/** @internal */\r\nexport class ResizeServiceProvider implements IResizeServiceProvider {\r\n    public static $name = 'br.weeklyScheduler.resizeService';\r\n\r\n    constructor() {\r\n        this.$get.$inject = [\r\n            '$rootScope',\r\n            '$window'\r\n        ]\r\n    }\r\n\r\n    private customResizeEvents: string[] = [];\r\n\r\n    private serviceInitialized: boolean = false;\r\n\r\n    public setCustomResizeEvents(events: string[]) {\r\n        this.customResizeEvents = events;\r\n    }\r\n\r\n    public $get(\r\n        $rootScope: angular.IRootScopeService,\r\n        $window: angular.IWindowService\r\n    ): IResizeService {\r\n        return {\r\n            initialize: () => {\r\n                if (this.serviceInitialized) {\r\n                    return;\r\n                }\r\n        \r\n                $window.addEventListener('resize', () => {\r\n                    // addEventListener exists outside of angular so we have to $apply the change\r\n                    $rootScope.$apply(() => {\r\n                        $rootScope.$broadcast(WeeklySchedulerEvents.RESIZED);\r\n                    });\r\n                });\r\n        \r\n                if (this.customResizeEvents) {\r\n                    this.customResizeEvents.forEach((event) => {\r\n                        $rootScope.$on(event, () => {\r\n                            $rootScope.$broadcast(WeeklySchedulerEvents.RESIZED);\r\n                        })\r\n                    })\r\n                }\r\n        \r\n                this.serviceInitialized = true; \r\n            }\r\n        };\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { RestrictionExplanationsComponent, RestrictionExplanationsController } from './RestrictionExplanationsComponent';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.restrictionExplanations', [])\r\n    .component(RestrictionExplanationsComponent.$name, new RestrictionExplanationsComponent())\r\n    .controller(RestrictionExplanationsController.$name, RestrictionExplanationsController)\r\n    .name;\r\n","import * as angular from 'angular';\r\nimport { WeeklySchedulerController } from '../weekly-scheduler/weekly-scheduler';\r\nimport { ValidationError } from '../weekly-scheduler-config/ValidationErrors';\r\nimport { IWeeklySchedulerFilterService } from '../weekly-scheduler-config/IWeeklySchedulerFilterService';\r\n\r\n/** @internal */\r\nexport class RestrictionExplanationsController implements angular.IComponentController {\r\n    static $controllerAs = 'restrictionExplanationsCtrl';\r\n    static $name = 'brWeeklySchedulerRestrictionExplanationsController';\r\n\r\n    static $inject = ['$filter'];\r\n\r\n    private schedulerCtrl: WeeklySchedulerController;\r\n\r\n    private explanations: { [key in ValidationError]?: string } = {};\r\n\r\n    constructor(\r\n        private $filter: IWeeklySchedulerFilterService\r\n    ) {\r\n    }\r\n\r\n    $onInit() {\r\n        let config = this.schedulerCtrl.config;\r\n\r\n        if (config.maxTimeSlot) {\r\n            let maxTimeSlot = this.$filter('brWeeklySchedulerSecondsAsText')(config.maxTimeSlot);\r\n            this.explanations[ValidationError.MaxTimeSlot] = config.restrictionExplanations.maxTimeSlot(maxTimeSlot);\r\n        }\r\n\r\n        if (config.fullCalendar) {\r\n            this.explanations[ValidationError.FullCalendar] = config.restrictionExplanations.fullCalendar;\r\n        }\r\n\r\n        if (config.monoSchedule) {\r\n            this.explanations[ValidationError.MonoSchedule] = config.restrictionExplanations.monoSchedule;\r\n        }\r\n\r\n        if (config.nullEnds) {\r\n            this.explanations[ValidationError.NullEnd] = config.restrictionExplanations.nullEnds;\r\n        }\r\n\r\n        if (config.scheduleCountOptions && config.scheduleCountOptions.count) {\r\n            this.explanations[ValidationError.ScheduleCount] = config.restrictionExplanations.scheduleCount(config.scheduleCountOptions);\r\n        }\r\n\r\n        if (config.minimumSeparation) {\r\n            let minimumSeparation = this.$filter('brWeeklySchedulerSecondsAsText')(config.minimumSeparation);\r\n            this.explanations[ValidationError.MinimumSeparation] = config.restrictionExplanations.minimumSeparation(minimumSeparation);\r\n        }\r\n    }\r\n}\r\n\r\n/** @internal */\r\nexport class RestrictionExplanationsComponent implements angular.IComponentOptions {\r\n    static $name = 'brRestrictionExplanations';\r\n\r\n    controller = RestrictionExplanationsController.$name;\r\n    controllerAs = RestrictionExplanationsController.$controllerAs;\r\n\r\n    require = {\r\n        schedulerCtrl: '^brWeeklyScheduler'\r\n    };\r\n\r\n    template = `\r\n        <div class=\"srow explanations\" ng-class=\"{ violation: restrictionExplanationsCtrl.schedulerCtrl.formController.$error[key] }\" ng-repeat=\"(key, explanation) in restrictionExplanationsCtrl.explanations\">\r\n            {{ explanation }}\r\n        </div>\r\n    `;\r\n}\r\n","import * as angular from 'angular';\r\nimport { RevalidateDirective } from './RevalidateDirective';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.revalidate', [])\r\n    .directive(RevalidateDirective.$name, RevalidateDirective.Factory())\r\n    .name;\r\n","/**\r\n * Runs custom validators whenever the model changes\r\n */\r\n\r\n/** @internal */\r\nexport class RevalidateDirective implements angular.IDirective {\r\n    static $name = 'brRevalidate';\r\n\r\n    link = (scope: angular.IScope, element: angular.IAugmentedJQuery, attrs: angular.IAttributes, ngModelCtrl: angular.INgModelController) => {\r\n        scope.$watch(attrs.ngModel, () => {\r\n            ngModelCtrl.$validate();\r\n        }, true);\r\n    }\r\n\r\n    require = 'ngModel';\r\n\r\n    static Factory() {\r\n        let directive = () => {\r\n            return new RevalidateDirective();\r\n        };\r\n\r\n        return directive;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { ScheduleAreaContainerComponent, ScheduleAreaContainerController } from './schedule-area-container';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.scheduleAreaContainer', [])\r\n    .component(ScheduleAreaContainerComponent.$name, new ScheduleAreaContainerComponent())\r\n    .controller(ScheduleAreaContainerController.$name, ScheduleAreaContainerController)\r\n    .name;\r\n","import { ScrollService } from '../scroll/ScrollService';\r\nimport { ZoomService } from '../zoom/ZoomService';\r\nimport { WeeklySchedulerEvents } from '../weekly-scheduler-config/WeeklySchedulerEvents';\r\n\r\n/** @internal */\r\nexport class ScheduleAreaContainerController implements angular.IComponentController {\r\n    static $name = 'brWeeklySchedulerScheduleAreaContainerController';\r\n\r\n    static $inject = [\r\n        '$element',\r\n        '$scope',\r\n        'brWeeklySchedulerScrollService',\r\n        'brWeeklySchedulerZoomService'\r\n    ];\r\n\r\n    constructor(\r\n        private $element: angular.IAugmentedJQuery,\r\n        private $scope: angular.IScope,\r\n        private scrollService: ScrollService,\r\n        private zoomService: ZoomService\r\n    ) {\r\n    }\r\n\r\n    $postLink() {\r\n        let element = this.$element[0]; // grab plain js, not jqlite\r\n\r\n        this.scrollService.hijackScroll(element, 20);\r\n        this.zoomService.resetZoom(element);\r\n\r\n\r\n        this.$scope.$on(WeeklySchedulerEvents.CLICK_ON_A_CELL, (e, data) => {\r\n            this.zoomService.zoomInACell(element, e, data);\r\n        });\r\n\r\n        this.$scope.$on(WeeklySchedulerEvents.RESET_ZOOM, (e) => {\r\n            this.zoomService.resetZoom(element);\r\n        });\r\n\r\n        this.$scope.$on(WeeklySchedulerEvents.ZOOM_IN, (e) => {\r\n            this.zoomService.zoomIn(element);\r\n        });\r\n    }\r\n}\r\n\r\n/** @internal */\r\nexport class ScheduleAreaContainerComponent implements angular.IComponentOptions {\r\n    static $name = 'brScheduleAreaContainer';\r\n\r\n    controller = ScheduleAreaContainerController.$name;\r\n    transclude = true;\r\n\r\n    template = `<ng-transclude></ng-transclude>`;\r\n}\r\n","import * as angular from 'angular';\r\nimport { ScheduleCountDirective } from './ScheduleCountDirective';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.scheduleCount', [])\r\n    .directive(ScheduleCountDirective.$name, ScheduleCountDirective.Factory())\r\n    .name;\r\n","import * as angular from 'angular';\r\nimport { ScheduleCountValidatorService } from '../schedule-validator/ScheduleCountValidatorService';\r\nimport { WeeklySchedulerItem } from '../weekly-scheduler-item/WeeklySchedulerItem';\r\n\r\n/** @internal */\r\nexport class ScheduleCountDirective implements angular.IDirective {\r\n    static $name = 'brScheduleCount';\r\n\r\n    constructor(\r\n        private validator: ScheduleCountValidatorService\r\n    ) {\r\n    }\r\n\r\n    link = (scope: angular.IScope, element: angular.IAugmentedJQuery, attrs: angular.IAttributes, ngModelCtrl: angular.INgModelController) => {\r\n        if (attrs.brScheduleCount) {\r\n            ngModelCtrl.$validators[this.validator.error] = (modelValue: WeeklySchedulerItem<any>) => {\r\n                return this.validator.validate(modelValue.schedules, modelValue.config);\r\n            };\r\n        }\r\n    }\r\n\r\n    require = 'ngModel';\r\n\r\n    static Factory() {\r\n        let directive = (validator) => {\r\n            return new ScheduleCountDirective(validator);\r\n        };\r\n\r\n        directive.$inject = ['brWeeklySchedulerScheduleCountValidatorService'];\r\n\r\n        return directive;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { FullCalendarValidatorService } from './FullCalendarValidatorService';\r\nimport { MaxTimeSlotValidatorService } from './MaxTimeSlotValidatorService';\r\nimport { MinimumSeparationValidatorService } from './MinimumSeparationValidatorService';\r\nimport { MonoScheduleValidatorService } from './MonoScheduleValidatorService';\r\nimport { NullEndScheduleValidatorService } from './NullEndValidatorService';\r\nimport { OverlapValidatorService } from './OverlapValidatorService';\r\nimport { ScheduleCountValidatorService } from './ScheduleCountValidatorService';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.scheduleValidation', [])\r\n    .service(FullCalendarValidatorService.$name, FullCalendarValidatorService)\r\n    .service(MaxTimeSlotValidatorService.$name, MaxTimeSlotValidatorService)\r\n    .service(MinimumSeparationValidatorService.$name, MinimumSeparationValidatorService)\r\n    .service(MonoScheduleValidatorService.$name, MonoScheduleValidatorService)\r\n    .service(NullEndScheduleValidatorService.$name, NullEndScheduleValidatorService)\r\n    .service(OverlapValidatorService.$name, OverlapValidatorService)\r\n    .service(ScheduleCountValidatorService.$name, ScheduleCountValidatorService)\r\n    .name;\r\n","import { IWeeklySchedulerConfig } from '../weekly-scheduler-config/IWeeklySchedulerConfig';\r\nimport { IWeeklySchedulerRange } from '../weekly-scheduler-range/IWeeklySchedulerRange';\r\nimport { ValidatorService } from '../schedule-validator/ValidatorService';\r\nimport { ValidationError } from '../weekly-scheduler-config/ValidationErrors';\r\n\r\n/** @internal */\r\nexport class FullCalendarValidatorService implements ValidatorService {\r\n    static $name = 'brWeeklySchedulerFullCalendarValidatorService';\r\n\r\n    get error() {\r\n        return ValidationError.FullCalendar;\r\n    }\r\n\r\n    public validate(schedules: IWeeklySchedulerRange<any>[], config: IWeeklySchedulerConfig<any>): boolean {\r\n        if (!config.fullCalendar) {\r\n            return true;\r\n        }\r\n\r\n        \r\n        // When this option is true we should enforce that there are no gaps in the schedules\r\n        let len = schedules.length;\r\n\r\n        // If there are no schedules, it automatically fails.\r\n        if (!len) {\r\n            return false;\r\n        }\r\n        \r\n        // If there was only one item we should check that it spans the whole range\r\n        if (len === 1) {\r\n            let schedule = schedules[0];\r\n            return this.validateStartAtMinValue(schedule.start) && this.validateEndAtMaxValue(schedule.end, config);\r\n        }\r\n\r\n        // If more, compare two at a time until the end\r\n        let loopLen = len - 1;\r\n        let result = true;\r\n\r\n        // Sort by start time first\r\n        let sortedSchedules = schedules.sort((a, b) => a.start > b.start ? 1 : -1);\r\n\r\n        for (let i = 0; i < loopLen; i++) {\r\n            let current = schedules[i];\r\n            let next = schedules[i + 1];\r\n            \r\n            // Validate that the first item lands at 0\r\n            if (i === 0 && !this.validateStartAtMinValue(current.start)) {\r\n                return false;\r\n            }\r\n\r\n            // Validate that the last item lands at maxValue\r\n            if (i === loopLen - 1 && !this.validateEndAtMaxValue(next.end, config)) {\r\n                return false;\r\n            }\r\n\r\n            result = result && current.end === next.start;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    private validateStartAtMinValue(start: number) {\r\n        return start === 0;\r\n    }\r\n\r\n    private validateEndAtMaxValue(end: number, config: IWeeklySchedulerConfig<any>) {\r\n        return (end || config.maxValue) === config.maxValue;\r\n    }\r\n}\r\n","import { EndAdjusterService } from '../end-adjuster/EndAdjusterService';\r\nimport { IWeeklySchedulerConfig } from '../weekly-scheduler-config/IWeeklySchedulerConfig';\r\nimport { IWeeklySchedulerRange } from '../weekly-scheduler-range/IWeeklySchedulerRange';\r\nimport { ValidatorService } from '../schedule-validator/ValidatorService';\r\nimport { ValidationError } from '../weekly-scheduler-config/ValidationErrors';\r\n\r\n/** @internal */\r\nexport class MaxTimeSlotValidatorService implements ValidatorService {\r\n    static $name = 'brWeeklySchedulerMaxTimeSlotValidatorService';\r\n\r\n    static $inject = ['brWeeklySchedulerEndAdjusterService'];\r\n\r\n    private constructor(\r\n        private endAdjusterService: EndAdjusterService\r\n    ) {\r\n    }\r\n\r\n    get error() {\r\n        return ValidationError.MaxTimeSlot;\r\n    }\r\n\r\n    public validate(schedules: IWeeklySchedulerRange<any>[], config: IWeeklySchedulerConfig<any>): boolean {\r\n        let maxTimeSlot = config.maxTimeSlot;\r\n\r\n        if (!maxTimeSlot) {\r\n            return true;\r\n        }\r\n\r\n        return !schedules.some(s => s.value !== config.defaultValue && this.endAdjusterService.adjustEndForView(config, s.end) - s.start > maxTimeSlot);\r\n    }\r\n}\r\n","import { IWeeklySchedulerConfig } from '../weekly-scheduler-config/IWeeklySchedulerConfig';\r\nimport { IWeeklySchedulerRange } from '../weekly-scheduler-range/IWeeklySchedulerRange';\r\nimport { ValidatorService } from '../schedule-validator/ValidatorService'\r\nimport { ValidationError } from '../weekly-scheduler-config/ValidationErrors';\r\n\r\n/** @internal */\r\nexport class MinimumSeparationValidatorService implements ValidatorService {\r\n    static $name = 'brWeeklySchedulerMinimumSeparationValidatorService';\r\n\r\n    get error() {\r\n        return ValidationError.MinimumSeparation;\r\n    }\r\n\r\n    public validate(schedules: IWeeklySchedulerRange<any>[], config: IWeeklySchedulerConfig<any>): boolean {\r\n        if (!config.minimumSeparation) {\r\n            return true;\r\n        }\r\n\r\n        const len = schedules.length;\r\n\r\n        if (len <= 1) {\r\n            return true;\r\n        }\r\n\r\n        const loopLen = len - 1;\r\n\r\n        schedules.sort((a, b) => a.start - b.start);\r\n\r\n        for (let i = 0; i < loopLen; i++) {\r\n            let currentSchedule = schedules[i];\r\n            let nextSchedule = schedules[i + 1];\r\n\r\n            if (nextSchedule.start - currentSchedule.end < config.minimumSeparation) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { IWeeklySchedulerConfig } from '../weekly-scheduler-config/IWeeklySchedulerConfig';\r\nimport { IWeeklySchedulerRange } from '../weekly-scheduler-range/IWeeklySchedulerRange';\r\nimport { ValidatorService } from '../schedule-validator/ValidatorService'\r\nimport { ValidationError } from '../weekly-scheduler-config/ValidationErrors';\r\n\r\n/** @internal */\r\nexport class MonoScheduleValidatorService implements ValidatorService {\r\n    static $name = 'brWeeklySchedulerMonoScheduleValidatorService';\r\n\r\n    get error() {\r\n        return ValidationError.MonoSchedule;\r\n    }\r\n\r\n    /** Important note -- this does not validate that only one schedule exists per item, but rather that only one NON-DEFAULT schedule exists per item. */\r\n    public validate(schedules: IWeeklySchedulerRange<any>[], config: IWeeklySchedulerConfig<any>): boolean {\r\n        if (!config.monoSchedule) {\r\n            return true;\r\n        }\r\n\r\n        // If a default value is defined, schedules with default values don't count -- one non-default schedule per item.\r\n        let schedulesToValidate;\r\n\r\n        if (angular.isDefined(config.defaultValue)) {\r\n            schedulesToValidate = schedules.filter(schedule => schedule.value !== config.defaultValue);\r\n        } else {\r\n            schedulesToValidate = schedules;\r\n        }\r\n\r\n        // only allowed empty or 1 schedule per item\r\n        return !schedulesToValidate.length || schedulesToValidate.length === 1;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { IWeeklySchedulerConfig } from '../weekly-scheduler-config/IWeeklySchedulerConfig';\r\nimport { IWeeklySchedulerRange } from '../weekly-scheduler-range/IWeeklySchedulerRange';\r\nimport { ValidatorService } from '../schedule-validator/ValidatorService'\r\nimport { ValidationError } from '../weekly-scheduler-config/ValidationErrors';\r\n\r\n/** @internal */\r\nexport class NullEndScheduleValidatorService implements ValidatorService {\r\n    static $name = 'brWeeklySchedulerNullEndValidatorService';\r\n\r\n    get error() {\r\n        return ValidationError.NullEnd;\r\n    }\r\n\r\n    validate(schedules: IWeeklySchedulerRange<any>[], config: IWeeklySchedulerConfig<any>): boolean {\r\n        if (config.nullEnds) {\r\n            return schedules.length <= 1 && schedules.every(schedule => schedule.end === null);\r\n        } else {\r\n            return schedules.every(schedule => schedule.end !== null);\r\n        }\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { IWeeklySchedulerConfig } from '../weekly-scheduler-config/IWeeklySchedulerConfig';\r\nimport { IWeeklySchedulerRange } from '../weekly-scheduler-range/IWeeklySchedulerRange';\r\nimport { OverlapService } from '../overlap/OverlapService';\r\nimport { ValidatorService } from '../schedule-validator/ValidatorService'\r\nimport { OverlapState } from '../weekly-scheduler-config/OverlapStates';\r\nimport { ValidationError } from '../weekly-scheduler-config/ValidationErrors';\r\n\r\n/** @internal */\r\nexport class OverlapValidatorService implements ValidatorService {\r\n    static $name = 'brWeeklySchedulerOverlapValidatorService';\r\n\r\n    static $inject = [\r\n        'brWeeklySchedulerOverlapService'\r\n    ];\r\n    \r\n    private constructor(\r\n        private overlapService: OverlapService\r\n    ) {\r\n    }\r\n\r\n    get error() {\r\n        return ValidationError.Overlap;\r\n    }\r\n\r\n    public validate(schedules: IWeeklySchedulerRange<any>[], config: IWeeklySchedulerConfig<any>): boolean {\r\n        // Compare two at a time until the end\r\n        let len = schedules.length;\r\n        let result = true;\r\n\r\n        for (let i = 0; i < len - 1; i++) {\r\n            let current = schedules[i];\r\n            let next = schedules[i + 1];\r\n\r\n            let valuesMatch = current.value === next.value;\r\n\r\n            if (!valuesMatch) {\r\n                let overlapState = this.overlapService.getOverlapState(config, current, next);\r\n                result = result && [OverlapState.NoOverlap, OverlapState.OtherStartIsCurrentEnd, OverlapState.OtherEndIsCurrentStart].indexOf(overlapState) > -1;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n}\r\n","import { IWeeklySchedulerConfig } from '../weekly-scheduler-config/IWeeklySchedulerConfig';\r\nimport { IWeeklySchedulerRange } from '../weekly-scheduler-range/IWeeklySchedulerRange';\r\nimport { ValidatorService } from '../schedule-validator/ValidatorService'\r\nimport { ValidationError } from '../weekly-scheduler-config/ValidationErrors';\r\n\r\n/** @internal */\r\nexport class ScheduleCountValidatorService implements ValidatorService {\r\n    static $name = 'brWeeklySchedulerScheduleCountValidatorService';\r\n\r\n    get error() {\r\n        return ValidationError.ScheduleCount;\r\n    }\r\n\r\n    public validate(schedules: IWeeklySchedulerRange<any>[], config: IWeeklySchedulerConfig<any>): boolean {\r\n        if (!config.scheduleCountOptions.count) {\r\n            return true;    \r\n        }\r\n\r\n        if (config.scheduleCountOptions.exact) {\r\n            return this.validateExactCount(schedules, config);\r\n        } else {\r\n            return this.validateMaxCount(schedules, config);\r\n        }\r\n    }\r\n\r\n    private validateExactCount(schedules: IWeeklySchedulerRange<any>[], config: IWeeklySchedulerConfig<any>): boolean {\r\n        return schedules.length === config.scheduleCountOptions.count;\r\n    }\r\n\r\n    private validateMaxCount(schedules: IWeeklySchedulerRange<any>[], config: IWeeklySchedulerConfig<any>): boolean {\r\n        return schedules.length <= config.scheduleCountOptions.count;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { ScrollService } from './ScrollService';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.scroll', [])\r\n    .service(ScrollService.$name, ScrollService)\r\n    .name;\r\n","import { ZoomService } from '../zoom/ZoomService';\r\n\r\n/** @internal */\r\nexport class ScrollService {\r\n    static $name = 'brWeeklySchedulerScrollService';\r\n\r\n    static $inject = [\r\n        'brWeeklySchedulerZoomService'\r\n    ];\r\n\r\n    private constructor(\r\n        private zoomService: ZoomService\r\n    ) {\r\n    }\r\n\r\n    public hijackScroll(element, delta) {\r\n        element.addEventListener('mousewheel', (event: WheelEvent) => {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n\r\n            if (event.ctrlKey) {\r\n                this.zoomService.zoomByScroll(element, event, delta);\r\n            } else {\r\n                if ((event.wheelDelta || event.detail) > 0) {\r\n                    element.scrollLeft -= delta;\r\n                } else {\r\n                    element.scrollLeft += delta;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        });\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { SecondsAsTextFilter } from './SecondsAsTextFilter';\r\nimport { TimeConstantsService } from './TimeConstantsService';\r\nimport { TimeOfDayFilter } from './TimeOfDayFilter';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.time', [])\r\n    .filter(SecondsAsTextFilter.$name, SecondsAsTextFilter.Factory()) \r\n    .filter(TimeOfDayFilter.$name, TimeOfDayFilter.Factory())\r\n    .service(TimeConstantsService.$name, TimeConstantsService)\r\n    .name;\r\n","import { TimeConstantsService } from './TimeConstantsService';\r\n\r\n/** @internal */\r\nexport class SecondsAsTextFilter {\r\n    static $name = 'brWeeklySchedulerSecondsAsText';\r\n\r\n    public static Factory() {\r\n        let factoryFunction = (timeConstants: TimeConstantsService) => {\r\n            return function(seconds: number): string {\r\n                let result = ``;\r\n\r\n                let hours = Math.floor(seconds / timeConstants.SECONDS_IN_HOUR);\r\n\r\n                result = SecondsAsTextFilter.addHoursToResult(result, hours);\r\n\r\n                seconds -= hours * timeConstants.SECONDS_IN_HOUR;\r\n\r\n                let minutes = Math.floor(seconds / timeConstants.SECONDS_IN_MINUTE);\r\n\r\n                result = SecondsAsTextFilter.addMinutesToResult(result, minutes);\r\n\r\n                seconds -= minutes * timeConstants.SECONDS_IN_MINUTE;\r\n\r\n                result = SecondsAsTextFilter.addSecondsToResult(result, seconds);\r\n\r\n                if (!result) {\r\n                    result = 'none';\r\n                }\r\n\r\n                return result;\r\n            }\r\n        };\r\n\r\n        factoryFunction.$inject = ['brWeeklySchedulerTimeConstantsService'];\r\n\r\n        return factoryFunction;\r\n    }\r\n\r\n    private static addHoursToResult(result: string, hours: number) {\r\n        if (hours) {\r\n            result += `${hours} hours`;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    private static addMinutesToResult(result: string, minutes: number) {\r\n        if (minutes) {\r\n            if (result) {\r\n                result += ` `;\r\n            }\r\n\r\n            result += `${minutes} minute${minutes > 1 ? 's' : ''}`; \r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    private static addSecondsToResult(result: string, seconds: number) {\r\n        if (seconds) {\r\n            if (result) {\r\n                result += ` `;\r\n            }\r\n\r\n            result += `${seconds} second${seconds > 1 ? 's' : ''}`;\r\n        }\r\n\r\n        return result;\r\n    }\r\n}\r\n","/** @internal */\r\nexport class TimeConstantsService {\r\n    static $name = 'brWeeklySchedulerTimeConstantsService';\r\n\r\n    public get SECONDS_IN_DAY() {\r\n        return this.MINUTES_IN_DAY * this.SECONDS_IN_MINUTE; \r\n    }\r\n\r\n    public get SECONDS_IN_HOUR() {\r\n        return this.SECONDS_IN_MINUTE * this.MINUTES_IN_HOUR;\r\n    }\r\n\r\n    public get SECONDS_IN_MINUTE() {\r\n        return 60;\r\n    }\r\n\r\n    public get HOURS_IN_DAY() {\r\n        return 24;\r\n    }\r\n\r\n    public get MINUTES_IN_DAY() {\r\n        return this.MINUTES_IN_HOUR * this.HOURS_IN_DAY;\r\n    }\r\n\r\n    public get MINUTES_IN_HOUR() {\r\n        return 60;\r\n    }\r\n}\r\n","import { TimeConstantsService } from './TimeConstantsService';\r\n\r\n/** @internal */\r\nexport class TimeOfDayFilter {\r\n    static $name = 'brWeeklySchedulerTimeOfDay';\r\n\r\n    public static Factory() {\r\n        let factoryFunction = (timeConstants: TimeConstantsService) => {\r\n            return function(seconds: number): string {\r\n                let hours = Math.floor(seconds / timeConstants.SECONDS_IN_HOUR);\r\n                let meridiem = hours > 11 && hours < 24 ? 'P' : 'A';\r\n\r\n                seconds -= hours * timeConstants.SECONDS_IN_HOUR;\r\n\r\n                let minutes = Math.floor(seconds / timeConstants.SECONDS_IN_MINUTE);\r\n                seconds -= minutes * timeConstants.SECONDS_IN_MINUTE;\r\n\r\n                let remainingMinutes = minutes.toString()\r\n\r\n                if (remainingMinutes.length == 1) {\r\n                    remainingMinutes = '0' + remainingMinutes;\r\n                }\r\n\r\n                let displayHours = hours % 12 || 12;\r\n\r\n                if (!seconds) {\r\n                    return `${displayHours}:${remainingMinutes}${meridiem}`;\r\n                } else {\r\n                    return `${displayHours}:${remainingMinutes}:${seconds}${meridiem}`;\r\n                }\r\n            }\r\n        };\r\n\r\n        factoryFunction.$inject = ['brWeeklySchedulerTimeConstantsService']\r\n\r\n        return factoryFunction;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { TimeRangeComponent, TimeRangeController } from './TimeRangeComponent';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.timeRange', [])\r\n    .component(TimeRangeComponent.$name, new TimeRangeComponent())\r\n    .controller(TimeRangeController.$name, TimeRangeController)\r\n    .name;\r\n","import * as angular from 'angular';\r\nimport { IWeeklySchedulerRange } from '../weekly-scheduler-range/IWeeklySchedulerRange';\r\n\r\n/** @internal */\r\nexport class TimeRangeComponent implements angular.IComponentOptions {\r\n    static $name = 'brTimeRange';\r\n\r\n    bindings = {\r\n        schedule: '<'\r\n    }\r\n\r\n    controller = TimeRangeController.$name;\r\n    controllerAs = TimeRangeController.$controllerAs;\r\n\r\n    template = `\r\n        <span ng-if=\"timeRangeCtrl.hasStart && timeRangeCtrl.hasEnd\">{{ timeRangeCtrl.schedule.start | brWeeklySchedulerTimeOfDay }}-{{ timeRangeCtrl.schedule.end | brWeeklySchedulerTimeOfDay }}</span>\r\n        <span ng-if=\"timeRangeCtrl.hasStart && !timeRangeCtrl.hasEnd\">{{ timeRangeCtrl.schedule.start | brWeeklySchedulerTimeOfDay }} until</span>\r\n    `\r\n}\r\n\r\n/** @internal */\r\nexport class TimeRangeController implements angular.IComponentController {\r\n    static $controllerAs = 'timeRangeCtrl';\r\n    static $name = 'brTimeRangeController';\r\n\r\n    private hasStart: boolean;\r\n    private hasEnd: boolean;\r\n\r\n    private schedule: IWeeklySchedulerRange<any>;\r\n\r\n    $onInit() {\r\n        this.hasStart = angular.isDefined(this.schedule.start);\r\n        this.hasEnd = angular.isDefined(this.schedule.end) && this.schedule.end !== null;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { TouchService } from './TouchService';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.touch', [])\r\n    .service(TouchService.$name, TouchService)\r\n    .name;\r\n","/** @internal */\r\nexport class TouchService {\r\n    static $name = 'brWeeklySchedulerTouchService';\r\n\r\n    public getTouches(event: any): any { // todo\r\n        if (event.originalEvent) {\r\n            if (event.originalEvent.touches && event.originalEvent.touches.length) {\r\n                return event.originalEvent.touches;\r\n            } else if (event.originalEvent.changedTouches && event.originalEvent.changedTouches.length) {\r\n                return event.originalEvent.changedTouches;\r\n            }\r\n        }\r\n\r\n        if (!event.touches) {\r\n            event.touches = [event.originalEvent];\r\n        }\r\n\r\n        return event.touches;\r\n    }\r\n    \r\n    public getPageX(event: any): number {\r\n        let touches = this.getTouches(event);\r\n\r\n        if (touches && touches.length && touches[0]) {\r\n            return touches[0].pageX;\r\n        }\r\n\r\n        return null;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { DayMap } from './DayMap';\r\nimport { NullEndWidth } from './NullEndWidth';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.weeklySchedulerConfig', [])\r\n    .constant(DayMap.$name, DayMap.value)\r\n    .constant(NullEndWidth.$name, NullEndWidth.value)\r\n    .name;\r\n","import { Days } from '../weekly-scheduler-config/Days';\r\n\r\n/** Ahhahhahh! Fighter of the NightMap! */\r\n/** @internal */\r\nexport class DayMap {\r\n    static $name = 'brWeeklySchedulerDayMap';\r\n    \r\n    static value = {\r\n        [Days.Monday]: 'Mon',\r\n        [Days.Tuesday]: 'Tue',\r\n        [Days.Wednesday]: 'Wed',\r\n        [Days.Thursday]: 'Thur',\r\n        [Days.Friday]: 'Fri',\r\n        [Days.Saturday]: 'Sat',\r\n        [Days.Sunday]: 'Sun' \r\n    }\r\n}\r\n","/** @internal */\r\nexport class NullEndWidth {\r\n    static $name = 'brWeeklySchedulerNullEndWidth';\r\n\r\n    static value = 7200; \r\n}\r\n","import * as angular from 'angular';\r\nimport { WeeklySchedulerComponent, WeeklySchedulerController } from './weekly-scheduler';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.weeklyScheduler', [])\r\n    .component(WeeklySchedulerComponent.$name, new WeeklySchedulerComponent())\r\n    .controller(WeeklySchedulerController.$name, WeeklySchedulerController)\r\n    .name;\r\n","import * as angular from 'angular';\r\nimport { AdapterService } from '../adapter/AdapterService';\r\nimport { ConfigurationService } from '../configuration/ConfigurationService';\r\nimport { ConflictingOptionsService } from '../conflicting-options/ConflictingOptionsService';\r\nimport { LastGhostDayService } from '../last-ghost-day/LastGhostDayService';\r\nimport { MissingDaysService } from '../missing-days/MissingDaysService';\r\nimport { IWeeklySchedulerAdapter } from '../adapter/IWeeklySchedulerAdapter';\r\nimport { IWeeklySchedulerConfig } from '../weekly-scheduler-config/IWeeklySchedulerConfig';\r\nimport { IWeeklySchedulerOptions } from '../weekly-scheduler-config/IWeeklySchedulerOptions';\r\nimport { WeeklySchedulerItem } from '../weekly-scheduler-item/WeeklySchedulerItem';\r\nimport { WeeklySchedulerRange } from '../weekly-scheduler-range/WeeklySchedulerRange';\r\nimport { WeeklySchedulerEvents } from '../weekly-scheduler-config/WeeklySchedulerEvents';\r\n\r\n/** @internal */\r\nexport class WeeklySchedulerController implements angular.IController {\r\n  static $controllerAs = 'schedulerCtrl';\r\n  static $name = 'brWeeklySchedulerController';\r\n\r\n  static $inject = [\r\n    '$element',\r\n    '$scope',\r\n    '$timeout',\r\n    'brWeeklySchedulerAdapterService',\r\n    'brWeeklySchedulerConfigurationService',\r\n    'brWeeklySchedulerConflictingOptionsService',\r\n    'brWeeklySchedulerLastGhostDayService',\r\n    'brWeeklySchedulerMissingDaysService'\r\n  ];\r\n\r\n  constructor(\r\n    private $element: angular.IAugmentedJQuery,\r\n    private $scope: angular.IScope,\r\n    private $timeout: angular.ITimeoutService,\r\n    private adapterService: AdapterService,\r\n    private configurationService: ConfigurationService,\r\n    private conflictingOptionsService: ConflictingOptionsService,\r\n    private lastGhostDayService: LastGhostDayService,\r\n    private missingDaysService: MissingDaysService,\r\n  ) {\r\n  }\r\n\r\n  private _originalItems: WeeklySchedulerItem<any>[];\r\n\r\n  private adapter: IWeeklySchedulerAdapter<any, any>;\r\n\r\n  public invalidMessage: string = '';\r\n\r\n  private dragSchedule: WeeklySchedulerRange<any>;\r\n\r\n  private ghostValues: { left: number, right: number };\r\n\r\n  /** this is required to be part of a form for dirty/valid checks */\r\n  public formController: angular.IFormController;\r\n\r\n  public hoverClass: string;\r\n\r\n  public config: IWeeklySchedulerConfig<any>;\r\n  public items: WeeklySchedulerItem<any>[];\r\n  public options: IWeeklySchedulerOptions<any>;\r\n\r\n  $onInit() {\r\n    this.config = this.configurationService.getConfiguration(this.options);\r\n    this.buildItemsFromAdapter();\r\n    this.watchAdapter();\r\n    this.watchHoverClass();\r\n  }\r\n\r\n  $postLink() {\r\n    this.$scope.$on(WeeklySchedulerEvents.SLOT_DRAGGED, (event: angular.IAngularEvent, schedule: WeeklySchedulerRange<any>) => {\r\n      this.dragSchedule = schedule;\r\n    });\r\n\r\n    this.$scope.$on(WeeklySchedulerEvents.DRAG_ENDED, () => {\r\n      this.dragSchedule = null;\r\n    });\r\n\r\n    this.$scope.$on(WeeklySchedulerEvents.GHOST_DRAG_ENDED, (event: angular.IAngularEvent, ghostSchedule: WeeklySchedulerRange<any>) => {\r\n      this.$scope.$broadcast(WeeklySchedulerEvents.COMMIT_GHOST, ghostSchedule);\r\n    });\r\n\r\n    this.$scope.$on(WeeklySchedulerEvents.REMOVE_LAST_GHOST, () => {\r\n      let lastGhostDay = this.lastGhostDayService.getLastGhostDay(this.items);\r\n\r\n      this.$scope.$broadcast(WeeklySchedulerEvents.REMOVE_GHOST, lastGhostDay);\r\n    });\r\n\r\n    this.$scope.$on(WeeklySchedulerEvents.CANCEL_GHOST, () => {\r\n      this.$scope.$broadcast(WeeklySchedulerEvents.REMOVE_ALL_GHOSTS);\r\n    });\r\n\r\n    this.$timeout(() => {\r\n      this.invalidMessage = this.getInvalidMessage();\r\n    });\r\n  }\r\n\r\n  public getInvalidMessage() {\r\n    let conflictingOptions = this.conflictingOptionsService.getConflictingOptions(this.options);\r\n\r\n    if (conflictingOptions) {\r\n      return conflictingOptions;\r\n    }\r\n\r\n    if (this.hasInvalidSchedule()) {\r\n      return 'One or more of the schedules is invalid! Please contact service.';\r\n    }\r\n  }\r\n\r\n  public hasInvalidSchedule() {\r\n    return this.formController.$invalid;\r\n  }\r\n\r\n  private buildItems(items: WeeklySchedulerItem<any>[]) {\r\n    this.items = this.missingDaysService.fillItems(this.config, items);\r\n\r\n    this.items = this.purgeItems(this.items);\r\n\r\n    this.items.forEach(item => item.mergeOverlaps());\r\n\r\n    // keep a reference on the adapter so we can pull it out later\r\n    this.adapter.items = this.items;\r\n\r\n    // keep a copy of the items in case we need to rollback\r\n    this._originalItems = angular.copy(this.items);\r\n  }\r\n\r\n  private buildItemsFromAdapter() {\r\n    let items = this.adapterService.getItemsFromAdapter(this.config, this.adapter);\r\n\r\n    return this.buildItems(items);\r\n  }\r\n\r\n  private purgeItems(items: WeeklySchedulerItem<any>[]) {\r\n    if (this.config.fillEmptyWithDefault) {\r\n      for (let item of items) {\r\n        item.purgeDefaultSchedules();\r\n\r\n        if(this.config.nullEnds) {\r\n          item.forceNullEnds();\r\n        }\r\n      }\r\n    }\r\n\r\n    return items;\r\n  }\r\n\r\n  private prepareItems(items: WeeklySchedulerItem<any>[]) {\r\n    if (this.config.fillEmptyWithDefault) {\r\n      for (let item of items) {\r\n        item.fillEmptySlotsWithDefaultSchedules();\r\n      }\r\n    }\r\n\r\n    return items;\r\n  }\r\n\r\n  private setGhostValues(ghostValues: { left: number, right: number }) {\r\n    this.ghostValues = ghostValues;\r\n  }\r\n\r\n  private resetZoom() {\r\n    this.$scope.$broadcast(WeeklySchedulerEvents.RESET_ZOOM);\r\n  }\r\n\r\n  private zoomIn() {\r\n    this.$scope.$broadcast(WeeklySchedulerEvents.ZOOM_IN);\r\n  }\r\n\r\n  private rollback() {\r\n    this.buildItems(this._originalItems);\r\n    this.formController.$setPristine();\r\n  }\r\n\r\n  private save() {\r\n    this.items = this.prepareItems(this.items);\r\n\r\n    return this.config.saveScheduler().then(() => {\r\n      this.items = this.purgeItems(this.items);\r\n      this.formController.$setPristine();\r\n    });\r\n  }\r\n\r\n  private watchAdapter() {\r\n    this.$scope.$watch(() => {\r\n      return this.adapter;\r\n    }, () => {\r\n      this.buildItemsFromAdapter();\r\n    });\r\n  }\r\n\r\n  private watchHoverClass() {\r\n    const pulseClass = 'pulse';\r\n    const pulseSelector = `.${pulseClass}`;\r\n\r\n    this.$scope.$watch(() => this.hoverClass, () => {\r\n      this.$element.find(pulseSelector).removeClass(pulseClass);\r\n\r\n      if (this.hoverClass) {\r\n        this.$element.find(`.${this.hoverClass}`).addClass(pulseClass);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n/** @internal */\r\nexport class WeeklySchedulerComponent implements angular.IComponentOptions {\r\n  static $name = 'brWeeklyScheduler';\r\n\r\n  bindings = {\r\n    adapter: '<',\r\n    hoverClass: '<',\r\n    options: '='\r\n  };\r\n\r\n  controller = WeeklySchedulerController.$name;\r\n  controllerAs = WeeklySchedulerController.$controllerAs;\r\n\r\n  require = {\r\n    formController: 'form'\r\n  };\r\n\r\n  template = require('./weekly-scheduler.html');\r\n};\r\n","module.exports = \"<div ng-if=\\\"!schedulerCtrl.invalidMessage\\\">\\r\\n  <div class=\\\"labels\\\">\\r\\n    <div class=\\\"srow dummy\\\"></div>\\r\\n    <div class=\\\"srow schedule-animate\\\" ng-repeat=\\\"item in schedulerCtrl.items track by item.day\\\">\\r\\n      {{ item.label }}\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <br-schedule-area-container>\\r\\n    <div class=\\\"schedule-area\\\">\\r\\n\\r\\n      <div class=\\\"srow timestamps\\\">\\r\\n        <br-hourly-grid></br-hourly-grid>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"srow calendar schedule-animate\\\" ng-repeat=\\\"item in schedulerCtrl.items track by item.day\\\">\\r\\n        <br-hourly-grid no-text></br-hourly-grid>\\r\\n        <br-multi-slider config=\\\"schedulerCtrl.config\\\"\\r\\n                        br-full-calendar=\\\"{{ schedulerCtrl.config.fullCalendar }}\\\"\\r\\n                        br-max-time-slot=\\\"{{ schedulerCtrl.config.maxTimeSlot }}\\\"\\r\\n                        br-minimum-separation=\\\"{{ schedulerCtrl.config.minimumSeparation }}\\\"\\r\\n                        br-mono-schedule=\\\"{{ schedulerCtrl.config.monoSchedule }}\\\"\\r\\n                        br-null-end=\\\"{{ schedulerCtrl.config.nullEnds }}\\\"\\r\\n                        br-schedule-count=\\\"{{ schedulerCtrl.config.scheduleCountOptions && schedulerCtrl.config.scheduleCountOptions.count }}\\\"\\r\\n                        br-overlap\\r\\n                        br-revalidate\\r\\n                        drag-schedule=\\\"schedulerCtrl.dragSchedule\\\"\\r\\n                        ghost-values=\\\"schedulerCtrl.ghostValues\\\"\\r\\n                        ng-model=\\\"item\\\"\\r\\n                        ng-model-options=\\\"{allowInvalid: true}\\\"\\r\\n                        set-ghost-values=\\\"schedulerCtrl.setGhostValues(ghostValues)\\\"\\r\\n        ></br-multi-slider>\\r\\n      </div>\\r\\n    </div>\\r\\n  </br-schedule-area-container>\\r\\n\\r\\n  <br-restriction-explanations></br-restriction-explanations>\\r\\n\\r\\n  <div class=\\\"srow buttons\\\">\\r\\n    <button ng-class=\\\"schedulerCtrl.config.buttonClasses\\\" type=\\\"button\\\" ng-click=\\\"schedulerCtrl.rollback()\\\" ng-disabled=\\\"!schedulerCtrl.formController.$dirty\\\">Reset</button>\\r\\n    <button ng-class=\\\"schedulerCtrl.config.buttonClasses\\\" type=\\\"button\\\" ng-click=\\\"schedulerCtrl.save()\\\" ng-disabled=\\\"!schedulerCtrl.formController.$dirty || !schedulerCtrl.formController.$valid\\\" ng-if=\\\"schedulerCtrl.config.saveScheduler\\\">Save</button>\\r\\n    <button ng-class=\\\"schedulerCtrl.config.buttonClasses\\\" type=\\\"button\\\" ng-click=\\\"schedulerCtrl.resetZoom()\\\">Zoom Out</button>\\r\\n    <button ng-class=\\\"schedulerCtrl.config.buttonClasses\\\" type=\\\"button\\\" ng-click=\\\"schedulerCtrl.zoomIn()\\\">Zoom In</button>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"srow\\\" ng-if=\\\"schedulerCtrl.invalidMessage\\\">\\r\\n  {{ schedulerCtrl.invalidMessage }}\\r\\n</div>\";","import * as angular from 'angular';\r\nimport { WeeklySchedulerItemFactory } from './WeeklySchedulerItemFactory';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.weeklySchedulerItem', [])\r\n    .service(WeeklySchedulerItemFactory.$name, WeeklySchedulerItemFactory)\r\n    .name;\r\n","import * as angular from 'angular';\r\nimport { DayMap } from '../weekly-scheduler-config/DayMap';\r\nimport { FillEmptyWithDefaultService } from '../fill-empty-with-default/FillEmptyWithDefaultService';\r\nimport { IInternalWeeklySchedulerItem } from '../weekly-scheduler-item/IInternalWeeklySchedulerItem';\r\nimport { IWeeklySchedulerConfig } from '../weekly-scheduler-config/IWeeklySchedulerConfig';\r\nimport { IWeeklySchedulerItem } from '../weekly-scheduler-item/IWeeklySchedulerItem';\r\nimport { IWeeklySchedulerRange } from '../weekly-scheduler-range/IWeeklySchedulerRange';\r\nimport { OverlapService } from '../overlap/OverlapService';\r\nimport { PurgeDefaultService } from '../purge-default/PurgeDefaultService';\r\nimport { WeeklySchedulerItem } from '../weekly-scheduler-item/WeeklySchedulerItem';\r\nimport { WeeklySchedulerRangeFactory } from '../weekly-scheduler-range/WeeklySchedulerRangeFactory';\r\n\r\n/** @internal */\r\nexport class WeeklySchedulerItemFactory {\r\n    static $name = 'brWeeklySchedulerItemFactory';\r\n\r\n    static $inject = [\r\n        'brWeeklySchedulerDayMap',\r\n        'brWeeklySchedulerFillEmptyWithDefaultService',\r\n        'brWeeklySchedulerOverlapService',\r\n        'brWeeklySchedulerPurgeDefaultService',\r\n        'brWeeklySchedulerRangeFactory'\r\n    ];\r\n\r\n    private constructor(\r\n        private dayMap: DayMap,\r\n        private fillEmptyWithDefaultService: FillEmptyWithDefaultService,\r\n        private overlapService: OverlapService,\r\n        private purgeDefaultService: PurgeDefaultService,\r\n        private rangeFactory: WeeklySchedulerRangeFactory\r\n    ) {\r\n    }\r\n\r\n    public createItem(config: IWeeklySchedulerConfig<any>, day: number, schedules: IWeeklySchedulerRange<any>[]) {\r\n        let result: IInternalWeeklySchedulerItem<any>;\r\n\r\n        let builder: IWeeklySchedulerItem<any> = config.createItem(day, schedules);\r\n    \r\n        result = angular.extend(builder, { label: this.dayMap[day] });\r\n    \r\n        return new WeeklySchedulerItem(config, result, this.fillEmptyWithDefaultService, this.overlapService, this.purgeDefaultService, this.rangeFactory);\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { Days } from '../weekly-scheduler-config/Days';\r\nimport { FillEmptyWithDefaultService } from '../fill-empty-with-default/FillEmptyWithDefaultService';\r\nimport { IInternalWeeklySchedulerItem } from '../weekly-scheduler-item/IInternalWeeklySchedulerItem';\r\nimport { IWeeklySchedulerConfig } from '../weekly-scheduler-config/IWeeklySchedulerConfig';\r\nimport { IWeeklySchedulerRange } from '../weekly-scheduler-range/IWeeklySchedulerRange';\r\nimport { OverlapService } from '../overlap/OverlapService';\r\nimport { PurgeDefaultService } from '../purge-default/PurgeDefaultService';\r\nimport { WeeklySchedulerRange } from '../weekly-scheduler-range/WeeklySchedulerRange';\r\nimport { WeeklySchedulerRangeFactory } from '../weekly-scheduler-range/WeeklySchedulerRangeFactory';\r\nimport { OverlapState } from '../weekly-scheduler-config/OverlapStates';\r\n\r\n/** Provides common functionality for an item -- pass it in and the resulting object will allow you to operate on it */\r\n/** @internal */\r\nexport class WeeklySchedulerItem<T> implements IInternalWeeklySchedulerItem<T> {\r\n    $isGhostOrigin: boolean;\r\n    $renderGhost: boolean;\r\n    day: Days;\r\n    editable: boolean;\r\n    label: string;\r\n    schedules: WeeklySchedulerRange<T>[];\r\n\r\n    constructor(\r\n        public config: IWeeklySchedulerConfig<T>,\r\n        item: IInternalWeeklySchedulerItem<T>,\r\n        private fillEmptyWithDefaultService: FillEmptyWithDefaultService,\r\n        private overlapService: OverlapService,\r\n        private purgeDefaultService: PurgeDefaultService,\r\n        private rangeFactory: WeeklySchedulerRangeFactory\r\n    ) {\r\n        this.day = item.day;\r\n        this.editable = angular.isDefined(item.editable) ? item.editable : true;\r\n        this.label = item.label;\r\n        this.schedules = item.schedules.map(schedule => rangeFactory.createRange(config, schedule));\r\n    }\r\n\r\n    public addSchedule(schedule: IWeeklySchedulerRange<T>) {\r\n        schedule.day = this.day;\r\n        const range = this.rangeFactory.createRange(this.config, schedule);\r\n        this.schedules.push(range);\r\n\r\n        return range;\r\n    }\r\n\r\n    public addScheduleAndMerge(schedule: IWeeklySchedulerRange<T>) {\r\n        let range = this.addSchedule(schedule);\r\n        this.mergeSchedule(range);\r\n\r\n        return range;\r\n    }\r\n\r\n    public canAddSchedule() {\r\n        if (this.config.nullEnds) {\r\n            return this.hasNoSchedules();\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    /** Determine if the conditions allow for a pop-up editor */\r\n    public canEdit() {\r\n        let hasEditFunction = angular.isFunction(this.config.editSlot);\r\n\r\n        return this.editable && hasEditFunction;\r\n    }\r\n\r\n    /** Determine if a schedule is able to be modified */\r\n    public canEditSchedule(schedule: WeeklySchedulerRange<T>) {\r\n        let itemIsEditable = this.editable;\r\n        let scheduleIsEditable = schedule.editable;\r\n\r\n        return itemIsEditable && scheduleIsEditable;\r\n    }\r\n\r\n    /**\r\n     * Rather than having to deal with modifying mergeOverlaps to handle nullEnds calendars,\r\n     * just prevent the user from creating additional slots in nullEnds calendars unless there are no slots there already.\r\n     */\r\n    public canRenderGhost() {\r\n        // This one needs to come first, otherwise renderGhost being set to true would override the protection against addt'l slots in nullEnd calendars\r\n        if (this.config.nullEnds) {\r\n            return this.$renderGhost && this.hasNoSchedules();\r\n        }\r\n\r\n        return this.$renderGhost;\r\n    }\r\n\r\n    public hasSchedule(schedule: WeeklySchedulerRange<T>) {\r\n        return this.schedules.indexOf(schedule) > -1;\r\n    }\r\n\r\n    public hasNoSchedules() {\r\n        return this.schedules.length === 0;\r\n    }\r\n\r\n    public fillEmptySlotsWithDefaultSchedules() {\r\n        this.schedules = this.fillEmptyWithDefaultService.fill(this, this.config);\r\n    }\r\n\r\n    public forceNullEnds() {\r\n        this.schedules.forEach(s => s.end = null);\r\n    }\r\n\r\n    public mergeOverlaps() {\r\n        do {\r\n            this.schedules.forEach(schedule => this.mergeOverlapsForSchedule(schedule));\r\n        } while (this.needsOverlapsMerged());\r\n    }\r\n\r\n    public mergeSchedule(schedule: WeeklySchedulerRange<any>) {\r\n        // We consider the schedule we were working with to be the most important, so handle its overlaps first.\r\n        this.mergeOverlapsForSchedule(schedule);\r\n        this.mergeOverlaps();\r\n    }\r\n\r\n    public purgeDefaultSchedules() {\r\n        this.schedules = this.purgeDefaultService.purge(this.schedules, this.config);\r\n    }\r\n\r\n    public removeSchedule(schedule: WeeklySchedulerRange<T>) {\r\n        let schedules = this.schedules;\r\n\r\n        schedules.splice(schedules.indexOf(schedule), 1);\r\n\r\n        this.config.onRemove();\r\n    }\r\n\r\n    // Overlap handlers\r\n\r\n    private getOverlapHandler(overlapState: OverlapState) {\r\n        const overlapHandlers: { [key: number]: (current: WeeklySchedulerRange<any>, other: WeeklySchedulerRange<any>) => void; } = {\r\n            [OverlapState.NoOverlap]: (current, other) => this.handleNoOverlap(current, other),\r\n            [OverlapState.CurrentIsInsideOther]: (current, other) => this.handleCurrentIsInsideOther(current, other),\r\n            [OverlapState.CurrentCoversOther]: (current, other) => this.handleCurrentCoversOther(current, other),\r\n            [OverlapState.OtherEndIsInsideCurrent]: (current, other) => this.handleOtherEndIsInsideCurrent(current, other),\r\n            [OverlapState.OtherStartIsInsideCurrent]: (current, other) => this.handleOtherStartIsInsideCurrent(current, other),\r\n            [OverlapState.OtherEndIsCurrentStart]: (current, other) => this.handleOtherEndIsCurrentStart(current, other),\r\n            [OverlapState.OtherStartIsCurrentEnd]: (current, other) => this.handleOtherStartIsCurrentEnd(current, other)\r\n        };\r\n\r\n        return overlapHandlers[overlapState];\r\n    }\r\n\r\n    private handleCurrentCoversOther(current: WeeklySchedulerRange<any>, other: WeeklySchedulerRange<any>): void {\r\n        this.removeSchedule(other);\r\n    }\r\n\r\n    private handleCurrentIsInsideOther(current: WeeklySchedulerRange<any>, other: WeeklySchedulerRange<any>): void {\r\n        if (current.hasSameValueAs(other)) {\r\n            // Remove 'other' & make current expand to fit the other slot\r\n            this.removeSchedule(other);\r\n\r\n            current.update({\r\n                day: other.day,\r\n                start: other.start,\r\n                end: other.end,\r\n                value: other.value\r\n            });\r\n        } else {\r\n            // Just remove 'current'\r\n            this.removeSchedule(current);\r\n        }\r\n    }\r\n\r\n    private handleNoOverlap(current: IWeeklySchedulerRange<any>, other: IWeeklySchedulerRange<any>) {\r\n        // Do nothing\r\n    }\r\n\r\n    private handleOtherEndIsInsideCurrent(current: WeeklySchedulerRange<any>, other: WeeklySchedulerRange<any>): void {\r\n        if (current.hasSameValueAs(other)) {\r\n            this.removeSchedule(other);\r\n\r\n            current.update({\r\n                day: current.day,\r\n                start: other.start,\r\n                end: current.end,\r\n                value: other.value\r\n            });\r\n        } else {\r\n            other.update({\r\n                day: other.day,\r\n                start: other.start,\r\n                end: current.start,\r\n                value: current.value\r\n            });\r\n        }\r\n    }\r\n\r\n    private handleOtherStartIsInsideCurrent(current: WeeklySchedulerRange<any>, other: WeeklySchedulerRange<any>): void {\r\n        if (current.hasSameValueAs(other)) {\r\n            this.removeSchedule(other);\r\n\r\n            current.update({\r\n                day: current.day,\r\n                start: current.start,\r\n                end: other.end,\r\n                value: other.value\r\n            });\r\n        } else {\r\n            other.update({\r\n                day: other.day,\r\n                start: current.end,\r\n                end: other.end,\r\n                value: other.value\r\n            });\r\n        }\r\n    }\r\n\r\n    private handleOtherEndIsCurrentStart(current: WeeklySchedulerRange<any>, other: WeeklySchedulerRange<any>): void {\r\n        if (current.hasSameValueAs(other)) {\r\n            this.handleOtherEndIsInsideCurrent(current, other);\r\n        } else {\r\n            // DO NOTHING, this is okay if the values don't match\r\n        }\r\n    }\r\n\r\n    private handleOtherStartIsCurrentEnd(current: WeeklySchedulerRange<any>, other: WeeklySchedulerRange<any>): void {\r\n        if (current.hasSameValueAs(other)) {\r\n            this.handleOtherStartIsInsideCurrent(current, other);\r\n        } else {\r\n            // DO NOTHING, this is okay if the values don't match\r\n        }\r\n    }\r\n\r\n    // End overlap handlers\r\n    private mergeOverlapsForSchedule(schedule: WeeklySchedulerRange<any>) {\r\n        let schedules = this.schedules;\r\n\r\n        schedules.forEach(el => {\r\n            if (!el.equals(schedule)) {\r\n                let schedulesBothEditable = el.editable && schedule.editable;\r\n\r\n                if (schedulesBothEditable) {\r\n                    let overlapState = this.overlapService.getOverlapState(this.config, schedule, el);\r\n                    let overlapHandler = this.getOverlapHandler(overlapState);\r\n\r\n                    overlapHandler(schedule, el);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private needsOverlapsMerged() {\r\n        let len = this.schedules.length;\r\n\r\n        // Compare two at a time\r\n        for (let i = 0; i < len - 1; i += 1) {\r\n            let current = this.schedules[i];\r\n            let next = this.schedules[i + 1];\r\n\r\n            let schedulesBothEditable = current.editable && next.editable;\r\n\r\n            if (!schedulesBothEditable) {\r\n                return false;\r\n            }\r\n\r\n            if (current.hasSameValueAs(next)) {\r\n                let overlapState = this.overlapService.getOverlapState(this.config, current, next);\r\n\r\n                return [OverlapState.OtherEndIsCurrentStart, OverlapState.OtherStartIsCurrentEnd].indexOf(overlapState) > -1;\r\n            }\r\n        }\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { WeeklySchedulerRangeFactory } from './WeeklySchedulerRangeFactory';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.weeklySchedulerRange', [])\r\n    .service(WeeklySchedulerRangeFactory.$name, WeeklySchedulerRangeFactory)\r\n    .name;\r\n","import { EndAdjusterService } from '../end-adjuster/EndAdjusterService';\r\nimport { IWeeklySchedulerConfig } from '../weekly-scheduler-config/IWeeklySchedulerConfig';\r\nimport { IWeeklySchedulerRange } from '../weekly-scheduler-range/IWeeklySchedulerRange';\r\nimport { WeeklySchedulerRange } from '../weekly-scheduler-range/WeeklySchedulerRange';\r\n\r\n/** @internal */\r\nexport class WeeklySchedulerRangeFactory {\r\n    static $name = 'brWeeklySchedulerRangeFactory';\r\n\r\n    static $inject = [\r\n        'brWeeklySchedulerEndAdjusterService'\r\n    ];\r\n\r\n    private constructor(\r\n        private endAdjusterService: EndAdjusterService\r\n    ) {\r\n    }\r\n\r\n    public createRange(config: IWeeklySchedulerConfig<any>, schedule: IWeeklySchedulerRange<any>) {\r\n        return new WeeklySchedulerRange(config, schedule, this.endAdjusterService);\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { Days } from '../weekly-scheduler-config/Days';\r\nimport { EndAdjusterService } from '../end-adjuster/EndAdjusterService';\r\nimport { IWeeklySchedulerConfig } from '../weekly-scheduler-config/IWeeklySchedulerConfig';\r\nimport { IWeeklySchedulerRange } from './IWeeklySchedulerRange';\r\n\r\n\r\n/** Provides common functionality for a schedule -- pass it in and the resulting object will allow you to operate on it */\r\n/** @internal */\r\nexport class WeeklySchedulerRange<T> implements IWeeklySchedulerRange<T> {\r\n    $class: string;\r\n    $isActive: boolean;\r\n    $isDeleting: boolean;\r\n    $isEditing: boolean;\r\n\r\n    day: Days;\r\n    start: number;\r\n    end: number;\r\n    value: T;\r\n\r\n    editable: boolean;\r\n\r\n    constructor(\r\n        private config: IWeeklySchedulerConfig<T>,\r\n        schedule: IWeeklySchedulerRange<T>,\r\n        private endAdjusterService: EndAdjusterService\r\n    ) {\r\n        this.$class = schedule.$class;\r\n        this.$isActive = schedule.$isActive;\r\n        this.$isDeleting = schedule.$isDeleting;\r\n        this.$isEditing = schedule.$isEditing;\r\n        this.day = schedule.day;\r\n        this.start = schedule.start;\r\n        this.end = schedule.end;\r\n        this.value = schedule.value;\r\n        this.editable = angular.isDefined(schedule.editable) ? schedule.editable : true;\r\n    }\r\n\r\n    get duration() {\r\n        return this.end - this.start;\r\n    }\r\n\r\n    public equals(other: WeeklySchedulerRange<T>) {\r\n        return angular.equals(this, other);\r\n    }\r\n\r\n    public hasSameValueAs(other: WeeklySchedulerRange<T>) {\r\n        return this.value === other.value;\r\n    }\r\n\r\n    public update(updatedSchedule: IWeeklySchedulerRange<T>) {\r\n        let updatedStart = this.updateStart(updatedSchedule.start);\r\n        let updatedEnd = this.updateEnd(updatedSchedule.end);\r\n\r\n        if (updatedStart || updatedEnd) {\r\n            this.config.onChange();\r\n        }\r\n    }\r\n\r\n    public updateEnd(updatedEnd: number) {\r\n        if (this.canUpdateEnd(updatedEnd)) {\r\n            this.end = this.endAdjusterService.adjustEndForModel(this.config, updatedEnd);\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public updateStart(updatedStart: number) {\r\n        if (this.canUpdateStart(updatedStart)) {\r\n            this.start = updatedStart;\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    private canUpdateEnd(updatedEnd: number) {\r\n        let changed = this.end !== updatedEnd;\r\n        let newEndBeforeOrAtMax = updatedEnd <= this.config.maxValue;\r\n        let newEndAfterOrAtExistingStart = this.endAdjusterService.adjustEndForView(this.config, updatedEnd) >= this.start + 1;\r\n\r\n        return changed && newEndBeforeOrAtMax && newEndAfterOrAtExistingStart;\r\n    }\r\n\r\n    private canUpdateStart(updatedStart: number) {\r\n        let changed = this.start !== updatedStart;\r\n        let newStartBeforeOrAtExistingEnd = updatedStart <= this.endAdjusterService.adjustEndForView(this.config, this.end) - 1;\r\n        let newStartAfterOrAtMin = updatedStart >= 0;\r\n\r\n        return changed && (this.config.nullEnds || newStartBeforeOrAtExistingEnd) && newStartAfterOrAtMin;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { WeeklySlotComponent, WeeklySlotController } from './weekly-slot';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.weeklySlot', [])\r\n    .component(WeeklySlotComponent.$name, new WeeklySlotComponent())\r\n    .controller(WeeklySlotController.$name, WeeklySlotController)\r\n    .name;\r\n","import * as angular from 'angular';\r\nimport { DragService } from '../drag/DragService';\r\nimport { IWeeklySchedulerConfig } from '../weekly-scheduler-config/IWeeklySchedulerConfig';\r\nimport { IWeeklySchedulerRange } from '../weekly-scheduler-range/IWeeklySchedulerRange';\r\nimport { WeeklySchedulerItem } from '../weekly-scheduler-item/WeeklySchedulerItem';\r\nimport { WeeklySchedulerRange } from '../weekly-scheduler-range/WeeklySchedulerRange';\r\nimport { WeeklySchedulerEvents } from '../weekly-scheduler-config/WeeklySchedulerEvents';\r\n\r\n/** @internal */\r\nexport class WeeklySlotController implements angular.IComponentController {\r\n  static $name = 'weeklySlotController';\r\n  static $controllerAs = 'weeklySlotCtrl';\r\n\r\n  static $inject = [\r\n    '$element',\r\n    '$rootScope',\r\n    '$scope',\r\n    'brWeeklySchedulerDragService'\r\n  ];\r\n\r\n  private config: IWeeklySchedulerConfig<any>;\r\n  private ngModelCtrl: angular.INgModelController;\r\n\r\n  private editSchedule: (options: { schedule: IWeeklySchedulerRange<any> }) => void;\r\n  private getDelta: (options: { pixel: number }) => number;\r\n\r\n  private item: WeeklySchedulerItem<any>;\r\n  private dragSchedule: WeeklySchedulerRange<any>;\r\n  private schedule: WeeklySchedulerRange<any>;\r\n\r\n  private valuesOnDragStart: WeeklySchedulerRange<any>;\r\n\r\n  constructor(\r\n    private $element: angular.IAugmentedJQuery,\r\n    private $rootScope: angular.IRootScopeService,\r\n    private $scope: angular.IScope,\r\n    private dragService: DragService,\r\n  ) {\r\n  }\r\n\r\n  get hasDragSchedule() {\r\n    return angular.isDefined(this.dragSchedule) && this.dragSchedule != null;\r\n  }\r\n\r\n  private getDragStartValues() {\r\n    return this.dragService.getDragRangeFromSchedule(this.config, this.schedule);\r\n  }\r\n\r\n  public editSelf() {\r\n    this.editSchedule({ schedule: this.schedule });\r\n  }\r\n\r\n  public drag(pixel: number) {\r\n    let ui = this.schedule;\r\n    let delta = this.getDelta({ pixel: pixel });\r\n\r\n    let newStart = Math.round(this.valuesOnDragStart.start + delta);\r\n    let newEnd = this.config.nullEnds ? null : Math.round(newStart + this.valuesOnDragStart.duration);\r\n\r\n    this.schedule.update({\r\n      day: ui.day,\r\n      start: newStart,\r\n      end: newEnd,\r\n      value: ui.value\r\n    });\r\n  }\r\n\r\n  public endDrag() {\r\n    // If the schedule was moved to another item, the $scope hierarchy will have been broken, so we need to broadcast this to the whole app\r\n    this.$rootScope.$broadcast(WeeklySchedulerEvents.DRAG_ENDED);\r\n    \r\n    // Was the schedule moved to another item??\r\n    if (!this.item.hasSchedule(this.schedule)) {\r\n      return;\r\n    }\r\n\r\n    // Did the user actually move or resize the slot??\r\n    var changed: boolean = !this.valuesOnDragStart.equals(this.getDragStartValues());\r\n\r\n    this.schedule.$isActive = false;\r\n\r\n    if (changed) {\r\n      this.ngModelCtrl.$setDirty();\r\n      this.item.mergeSchedule(this.schedule);\r\n    } else {\r\n      this.editSelf();\r\n    }\r\n  }\r\n\r\n  public endResize() {\r\n    // Did the user actually move or resize the slot??\r\n    var changed: boolean = !this.valuesOnDragStart.equals(this.getDragStartValues());\r\n\r\n    this.schedule.$isActive = false;\r\n\r\n    if (changed) {\r\n      this.ngModelCtrl.$setDirty();\r\n      this.item.mergeSchedule(this.schedule);\r\n    } else {\r\n      this.editSelf();\r\n    }\r\n  }\r\n\r\n  public resizeStart(pixel: number) {\r\n    let delta = this.getDelta({ pixel: pixel });\r\n    let newStart = Math.round(this.valuesOnDragStart.start + delta);\r\n\r\n    if (this.schedule.updateStart(newStart)) {\r\n      this.config.onChange();\r\n    }\r\n  }\r\n\r\n  public resizeEnd(pixel: number) {\r\n    let delta = this.getDelta({ pixel: pixel });\r\n    let newEnd = Math.round(this.valuesOnDragStart.end + delta);\r\n\r\n    if (this.schedule.updateEnd(newEnd)) {\r\n      this.config.onChange();\r\n    }\r\n  }\r\n\r\n  public startDrag() {\r\n    if (!this.item.canEditSchedule(this.schedule)){\r\n      return;\r\n    }\r\n\r\n    this.$scope.$emit(WeeklySchedulerEvents.SLOT_DRAGGED, this.schedule);\r\n    this.schedule.$isActive = true;\r\n    this.valuesOnDragStart = this.getDragStartValues();\r\n  }\r\n\r\n  public startResize() {\r\n    if (!this.item.canEditSchedule(this.schedule)) {\r\n      return;\r\n    }\r\n    \r\n    this.schedule.$isActive = true;\r\n    this.valuesOnDragStart = this.getDragStartValues();\r\n  }\r\n}\r\n\r\n/** @internal */\r\nexport class WeeklySlotComponent implements angular.IComponentOptions {\r\n  static $name = 'brWeeklySlot';\r\n  \r\n  bindings = {\r\n    config: '<',\r\n    dragSchedule: '<',\r\n    item: '<',\r\n    schedule: '=ngModel',\r\n    editSchedule: '&',\r\n    getDelta: '&'\r\n  };\r\n\r\n  controller = WeeklySlotController.$name;\r\n  controllerAs = WeeklySlotController.$controllerAs;\r\n\r\n  require = {\r\n    ngModelCtrl: 'ngModel'\r\n  };\r\n\r\n  template = require('./weekly-slot.html');\r\n}\r\n","module.exports = \"<div class=\\\"slotWrapper\\\" title=\\\"{{weeklySlotCtrl.schedule.start | brWeeklySchedulerTimeOfDay}} - {{weeklySlotCtrl.schedule.end | brWeeklySchedulerTimeOfDay}}\\\">\\r\\n  <div class=\\\"handle left\\\" ondrag=\\\"weeklySlotCtrl.resizeStart(delta)\\\" ondragstart=\\\"weeklySlotCtrl.startResize()\\\" ondragstop=\\\"weeklySlotCtrl.endResize()\\\" br-handle ng-if=\\\"!weeklySlotCtrl.config.nullEnds\\\"></div>\\r\\n  <div class=\\\"middle\\\" ondrag=\\\"weeklySlotCtrl.drag(delta)\\\" ondragstart=\\\"weeklySlotCtrl.startDrag()\\\" ondragstop=\\\"weeklySlotCtrl.endDrag()\\\" br-handle immediate=\\\"weeklySlotCtrl.hasDragSchedule\\\">\\r\\n    <br-time-range schedule=\\\"weeklySlotCtrl.schedule\\\"></br-time-range>\\r\\n  </div>\\r\\n  <div class=\\\"handle right\\\" ondrag=\\\"weeklySlotCtrl.resizeEnd(delta)\\\" ondragstart=\\\"weeklySlotCtrl.startResize()\\\" ondragstop=\\\"weeklySlotCtrl.endResize()\\\" br-handle ng-if=\\\"!weeklySlotCtrl.config.nullEnds\\\"></div>\\r\\n</div>\";","import * as angular from 'angular';\r\nimport { ValueNormalizationService } from './ValueNormalizationService';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.valueNormalization', [])\r\n    .service(ValueNormalizationService.$name, ValueNormalizationService)\r\n    .name;\r\n","/** @internal */\r\nexport class ValueNormalizationService {\r\n    static $name = 'brWeeklySchedulerValueNormalizationService';\r\n\r\n    public normalizeValue(value: number, min: number, max: number) {\r\n        if (value < min) {\r\n            return min;\r\n        }\r\n\r\n        if (value > max) {\r\n            return max;\r\n        }\r\n\r\n        return value;\r\n    }\r\n}\r\n","import * as angular from 'angular';\r\nimport { ZoomService } from './ZoomService';\r\n\r\nexport default angular\r\n    .module('rr.weeklyScheduler.zoom', [])\r\n    .service(ZoomService.$name, ZoomService)\r\n    .name;\r\n","import { WeeklySchedulerEvents } from '../weekly-scheduler-config/WeeklySchedulerEvents';\r\n\r\n/** @internal */\r\nexport class ZoomService {\r\n    static $name = 'brWeeklySchedulerZoomService';\r\n\r\n    static $inject = ['$rootScope'];\r\n\r\n    private constructor(\r\n        private $rootScope: angular.IRootScopeService\r\n    ) {\r\n    }\r\n\r\n    private selector: string = '.schedule-area';\r\n\r\n    private broadcastZoomedInEvent() {\r\n        this.$rootScope.$broadcast(WeeklySchedulerEvents.ZOOMED_IN);\r\n    }\r\n\r\n    private broadcastZoomedOutEvent() {\r\n        this.$rootScope.$broadcast(WeeklySchedulerEvents.ZOOMED_OUT);\r\n    }\r\n\r\n    private getCurrentZoomWidth(element: any): number {\r\n        return parseInt(element.querySelector(this.selector).style.width, 10);\r\n    }\r\n\r\n    private getZoomElement(container: any) {\r\n        return container.querySelector(this.selector);\r\n    }\r\n\r\n    private setZoomWidth(element: any, width: string): void {\r\n       this.getZoomElement(element).style.width = width;\r\n    }\r\n\r\n    public resetZoom(element: any) {\r\n        this.setZoomWidth(element, '100%');\r\n        this.broadcastZoomedOutEvent();\r\n    }\r\n    \r\n    public zoomIn(element: any) {\r\n        // get current zoom level from zoomed element as a percentage\r\n        let zoom = this.getZoomElement(element).style.width;\r\n        \r\n        // parse to integer & double\r\n        let level = parseInt(zoom, 10) * 2;\r\n\r\n        // Convert back to percentage\r\n        this.setZoomWidth(element, level + '%');\r\n\r\n        this.broadcastZoomedInEvent();\r\n    }\r\n\r\n    public zoomInACell(element: any, event: angular.IAngularEvent, data: any) {\r\n        let elementCount = data.nbElements;\r\n        let i = data.idx;\r\n\r\n        let containerWidth = element.offsetWidth;\r\n\r\n        let boxesToDisplay = 5;\r\n        let boxWidth = containerWidth / boxesToDisplay;\r\n\r\n        let boxesToSkip = 2;\r\n        let gutterSize = boxWidth * boxesToSkip;\r\n\r\n        var scheduleAreaWidthPx = elementCount * boxWidth;\r\n        var scheduleAreaWidthPercent = (scheduleAreaWidthPx / containerWidth) * 100;\r\n\r\n        this.setZoomWidth(element, scheduleAreaWidthPercent + '%');\r\n\r\n        // All cells of a line have the same size\r\n        element.scrollLeft = i * boxWidth - gutterSize;\r\n\r\n        this.broadcastZoomedInEvent();\r\n    }\r\n\r\n    public zoomByScroll(element: any, event: WheelEvent, delta: number) {\r\n        let currentWidth = this.getCurrentZoomWidth(element);\r\n\r\n        if ((event.wheelDelta || event.detail) > 0) {\r\n            this.setZoomWidth(element, (currentWidth + 2 * delta) + '%');\r\n            this.broadcastZoomedInEvent();\r\n        } else {\r\n            let width = currentWidth - 2 * delta;\r\n            this.setZoomWidth(element, (width > 100 ? width : 100) + '%');\r\n            this.broadcastZoomedOutEvent();\r\n        }\r\n    }\r\n}\r\n","import { IWeeklySchedulerItem } from '../weekly-scheduler-item/IWeeklySchedulerItem';\r\nimport { Days } from '../weekly-scheduler-config/Days';\r\nimport { IWeeklySchedulerRange } from '../weekly-scheduler-range/IWeeklySchedulerRange';\r\n\r\n/** @internal */\r\nexport class DemoItem implements IWeeklySchedulerItem<boolean> {\r\n  constructor(\r\n    public day: Days,\r\n    public schedules: IWeeklySchedulerRange<boolean>[]\r\n  ) {\r\n  }\r\n\r\n  get editable() {\r\n    return true;\r\n  }\r\n}\r\n","import { IWeeklySchedulerAdapter } from '../adapter/IWeeklySchedulerAdapter';\r\nimport { IWeeklySchedulerRange } from '../weekly-scheduler-range/IWeeklySchedulerRange';\r\nimport { DemoItem } from './DemoItem';\r\n\r\n\r\n  /** The data is already in an acceptable format for the demo so just pass it through */\r\n  /** @internal */\r\n  export class DemoAdapter implements IWeeklySchedulerAdapter<IWeeklySchedulerRange<boolean>, boolean> {\r\n    public items: DemoItem[] = [];\r\n\r\n    constructor(\r\n      public initialData: IWeeklySchedulerRange<boolean>[],\r\n    ) {\r\n    }\r\n\r\n    public getSnapshot() {\r\n      return Array.prototype.concat.apply([], this.items.map(item => {\r\n        return item.schedules.map(schedule => {\r\n          return {\r\n            day: schedule.day,\r\n            start: schedule.start,\r\n            end: schedule.end,\r\n            value: schedule.value\r\n          }\r\n        });\r\n      }));\r\n    }\r\n\r\n    public customModelToWeeklySchedulerRange(range) {\r\n      range.$class = 'test';\r\n\r\n      return range;\r\n    }\r\n  }"],"sourceRoot":""}